{"code":"var /* @ngInject */ PromotionsSmarteditRestService_1;\r\nimport { __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { PersonalizationsmarteditUtils } from 'personalizationcommons';\r\nimport { IRestServiceFactory, SeDowngradeService } from 'smarteditcommons';\r\n// SeDowngradeService annotation is needed as this servie\r\n// is used by bootstrap provider in PromotionsSmarteditContainerModule\r\nlet /* @ngInject */ PromotionsSmarteditRestService = /* @ngInject */ PromotionsSmarteditRestService_1 = class /* @ngInject */ PromotionsSmarteditRestService {\r\n    constructor(restServiceFactory, smarteditUtils) {\r\n        this.restServiceFactory = restServiceFactory;\r\n        this.smarteditUtils = smarteditUtils;\r\n    }\r\n    getPromotions(catalogVersions) {\r\n        const restService = this.restServiceFactory.get(/* @ngInject */ PromotionsSmarteditRestService_1.AVAILABLE_PROMOTIONS);\r\n        const entries = [];\r\n        catalogVersions = catalogVersions || [];\r\n        catalogVersions.forEach((element, i) => {\r\n            this.smarteditUtils.pushToArrayIfValueExists(entries, 'catalog' + i, element.catalog);\r\n            this.smarteditUtils.pushToArrayIfValueExists(entries, 'version' + i, element.catalogVersion);\r\n        });\r\n        const requestParams = {\r\n            params: {\r\n                entry: entries\r\n            }\r\n        };\r\n        return restService.save(requestParams);\r\n    }\r\n};\r\n/* @ngInject */ PromotionsSmarteditRestService.AVAILABLE_PROMOTIONS = '/personalizationwebservices/v1/query/cxpromotionsforcatalog';\r\n/* @ngInject */ PromotionsSmarteditRestService = /* @ngInject */ PromotionsSmarteditRestService_1 = __decorate([\r\n    SeDowngradeService(),\r\n    __metadata(\"design:paramtypes\", [IRestServiceFactory,\r\n        PersonalizationsmarteditUtils])\r\n], /* @ngInject */ PromotionsSmarteditRestService);\r\nexport { /* @ngInject */ PromotionsSmarteditRestService };\r\n//# sourceMappingURL=PromotionsSmarteditRestService.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationcommons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization-promotion/personalizationpromotionssmartedit/apps/personalizationpromotionssmarteditcommons/src/types.ts"],"map":"{\"version\":3,\"file\":\"PromotionsSmarteditRestService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/services/PromotionsSmarteditRestService.ts\"],\"names\":[],\"mappings\":\";;AAAA;;GAEG;AACH,OAAO,EAAE,6BAA6B,EAAE,MAAM,wBAAwB,CAAC;AACvE,OAAO,EAAE,mBAAmB,EAAE,kBAAkB,EAAE,MAAM,kBAAkB,CAAC;AAG3E,yDAAyD;AACzD,sEAAsE;AAEtE,wGAAA;IAII,YACc,kBAAuC,EACvC,cAA6C;QAD7C,uBAAkB,GAAlB,kBAAkB,CAAqB;QACvC,mBAAc,GAAd,cAAc,CAA+B;IACxD,CAAC;IAEG,aAAa,CAAC,eAAoC;QACrD,MAAM,WAAW,GAAG,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAC3C,gDAA8B,CAAC,oBAAoB,CACtD,CAAC;QACF,MAAM,OAAO,GAAG,EAAE,CAAC;QAEnB,eAAe,GAAG,eAAe,IAAI,EAAE,CAAC;QAExC,eAAe,CAAC,OAAO,CAAC,CAAC,OAAY,EAAE,CAAS,EAAE,EAAE;YAChD,IAAI,CAAC,cAAc,CAAC,wBAAwB,CAAC,OAAO,EAAE,SAAS,GAAG,CAAC,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC;YACtF,IAAI,CAAC,cAAc,CAAC,wBAAwB,CACxC,OAAO,EACP,SAAS,GAAG,CAAC,EACb,OAAO,CAAC,cAAc,CACzB,CAAC;QACN,CAAC,CAAC,CAAC;QAEH,MAAM,aAAa,GAAG;YAClB,MAAM,EAAE;gBACJ,KAAK,EAAE,OAAO;aACjB;SACJ,CAAC;QAEF,OAAO,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IAC3C,CAAC;CACJ,CAAA;AAjC0B,mEAAoB,GACvC,6DAA6D,CAAC;AAFtE;IADC,kBAAkB,EAAE;qCAMiB,mBAAmB;QACvB,6BAA6B;kDA4B9D\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization-promotion/personalizationpromotionssmartedit/apps/personalizationpromotionssmarteditcommons/node_modules/.cache/rollup-plugin-typescript2/placeholder/services/PromotionsSmarteditRestService.d.ts","writeByteOrderMark":false,"text":"import { PersonalizationsmarteditUtils } from 'personalizationcommons';\r\nimport { IRestServiceFactory } from 'smarteditcommons';\r\nimport { PromotionsPage, PromotionsCatalog } from '../types';\r\nexport declare class PromotionsSmarteditRestService {\r\n    protected restServiceFactory: IRestServiceFactory;\r\n    protected smarteditUtils: PersonalizationsmarteditUtils;\r\n    static readonly AVAILABLE_PROMOTIONS: string;\r\n    constructor(restServiceFactory: IRestServiceFactory, smarteditUtils: PersonalizationsmarteditUtils);\r\n    getPromotions(catalogVersions: PromotionsCatalog[]): Promise<PromotionsPage>;\r\n}\r\n"}}
