{"code":"///\r\n/// Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.\r\n///\r\nimport { __decorate, __metadata } from \"tslib\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { from } from \"rxjs\";\r\nimport { switchMap } from \"rxjs/operators\";\r\nimport { CONTEXT_SITE_ID, ISharedDataService, } from \"smarteditcommons\";\r\nvar /* @ngInject */ MerchandisingExperienceInterceptor = /** @class */ (function () {\r\n    function /* @ngInject */ MerchandisingExperienceInterceptor(sharedDataService) {\r\n        this.sharedDataService = sharedDataService;\r\n    }\r\n    /* @ngInject */ MerchandisingExperienceInterceptor_1 = /* @ngInject */ MerchandisingExperienceInterceptor;\r\n    /* @ngInject */ MerchandisingExperienceInterceptor.prototype.intercept = function (request, next) {\r\n        if (/* @ngInject */ MerchandisingExperienceInterceptor_1.MERCHCMSWEBSERVICES_PATH.test(request.url)) {\r\n            return from(this.sharedDataService.get(\"experience\")).pipe(switchMap(function (experience) {\r\n                if (experience) {\r\n                    if (request.url.indexOf(CONTEXT_SITE_ID) > -1) {\r\n                        var params = request.params;\r\n                        if (params) {\r\n                            params = params\r\n                                .delete(\"catalogId\")\r\n                                .delete(\"catalogVersion\")\r\n                                .delete(\"mask\");\r\n                        }\r\n                        var updatedUrlRequest = request.clone({\r\n                            url: request.url.replace(CONTEXT_SITE_ID, experience.catalogDescriptor.siteId),\r\n                            params: params,\r\n                        });\r\n                        return next.handle(updatedUrlRequest);\r\n                    }\r\n                }\r\n                return next.handle(request);\r\n            }));\r\n        }\r\n        else {\r\n            return next.handle(request);\r\n        }\r\n    };\r\n    var /* @ngInject */ MerchandisingExperienceInterceptor_1;\r\n    /* @ngInject */ MerchandisingExperienceInterceptor.MERCHCMSWEBSERVICES_PATH = /\\/merchandisingcmswebservices/;\r\n    /* @ngInject */ MerchandisingExperienceInterceptor = /* @ngInject */ MerchandisingExperienceInterceptor_1 = __decorate([\r\n        Injectable(),\r\n        __metadata(\"design:paramtypes\", [ISharedDataService])\r\n    ], /* @ngInject */ MerchandisingExperienceInterceptor);\r\n    return /* @ngInject */ MerchandisingExperienceInterceptor;\r\n}());\r\nexport { /* @ngInject */ MerchandisingExperienceInterceptor };\r\n","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+common@8.2.14_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@angular/common/http.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/cds-merchandising/merchandisingsmartedit/apps/merchandisingsmarteditcommons/node_modules/.cache/rollup-plugin-typescript2/placeholder/merchandisingExperienceInterceptor.d.ts","writeByteOrderMark":false,"text":"import { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from \"@angular/common/http\";\r\nimport { Observable } from \"rxjs\";\r\nimport { ISharedDataService } from \"smarteditcommons\";\r\nexport declare class MerchandisingExperienceInterceptor implements HttpInterceptor {\r\n    private sharedDataService;\r\n    private static readonly MERCHCMSWEBSERVICES_PATH;\r\n    constructor(sharedDataService: ISharedDataService);\r\n    intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>>;\r\n}\r\n"}}
