{"code":"import { __awaiter, __decorate, __metadata, __param } from \"tslib\";\r\nimport { DOCUMENT } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, Inject, Renderer2, ViewChild } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { cloneDeep, isEqual } from 'lodash';\r\nimport { PersonalizationsmarteditDateUtils, PERSONALIZATION_MODEL_STATUS_CODES, PersonalizationsmarteditMessageHandler, CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS, PersonalizationsmarteditCommerceCustomizationService, CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS, PERSONALIZATION_DATE_FORMATS } from 'personalizationcommons';\r\nimport { from, of } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\nimport { ModalButtonAction, ModalButtonStyle, ModalManagerService, IConfirmationModalService, LogService, SystemEventService, TabsComponent } from 'smarteditcommons';\r\nimport { PersonalizationsmarteditRestService } from '../../service';\r\nimport { BasicInfoTabComponent } from './basicInfoTab';\r\nimport { CustomizationViewService, defaultCustomization } from './CustomizationViewService';\r\nimport { TargetGroupTabComponent } from './targetGroupTab';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"ManageCustomizationViewComponent\", {\r\n    selector: 'perso-manage-customization-view',\r\n    template: `<div class=\"pe-customization-modal__tabs\"><se-tabs *ngIf=\"isReady\" [tabsList]=\"tabs\" [numTabsDisplayed]=\"2\" (onTabSelected)=\"onTabSelected($event)\"></se-tabs></div>`,\r\n    providers: [CustomizationViewService]\r\n});\r\nlet ManageCustomizationViewComponent = class ManageCustomizationViewComponent {\r\n    constructor(persoDateUtils, persoCommerceCustomizationService, persoMessageHandler, persoCustomizationViewService, persoRestService, confirmationModalService, systemEventService, modalManager, translateService, logService, cdr, renderer, document) {\r\n        this.persoDateUtils = persoDateUtils;\r\n        this.persoCommerceCustomizationService = persoCommerceCustomizationService;\r\n        this.persoMessageHandler = persoMessageHandler;\r\n        this.persoCustomizationViewService = persoCustomizationViewService;\r\n        this.persoRestService = persoRestService;\r\n        this.confirmationModalService = confirmationModalService;\r\n        this.systemEventService = systemEventService;\r\n        this.modalManager = modalManager;\r\n        this.translateService = translateService;\r\n        this.logService = logService;\r\n        this.cdr = cdr;\r\n        this.renderer = renderer;\r\n        this.document = document;\r\n        this.isReady = false;\r\n        this.savingCustomizationView = false;\r\n        this.tabs = [];\r\n        this.isReady = false;\r\n        this.isEditMode = false;\r\n        this.tabs = [\r\n            {\r\n                id: CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS.BASIC_INFO_TAB_FORM_NAME,\r\n                title: 'personalization.modal.customizationvariationmanagement.basicinformationtab',\r\n                component: BasicInfoTabComponent,\r\n                hasErrors: false,\r\n                active: true\r\n            },\r\n            {\r\n                id: CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS.TARGET_GROUP_TAB_NAME,\r\n                title: 'personalization.modal.customizationvariationmanagement.targetgrouptab',\r\n                component: TargetGroupTabComponent,\r\n                hasErrors: false,\r\n                active: false\r\n            }\r\n        ];\r\n    }\r\n    ngOnInit() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const modalData = yield this.modalManager.getModalData().pipe(take(1)).toPromise();\r\n            if (modalData) {\r\n                ({\r\n                    customizationCode: this.customizationCode,\r\n                    variationCode: this.variationCode\r\n                } = modalData);\r\n            }\r\n            this.initModalButtons();\r\n            yield this.initCustomization();\r\n            if (this.customizationCode) {\r\n                this.isEditMode = true;\r\n                if (this.variationCode) {\r\n                    this.persoCustomizationViewService.editVariationAction(this.persoCustomizationViewService.selectVariationByCode(this.variationCode));\r\n                }\r\n            }\r\n            if (this.variationCode) {\r\n                this.tabs[0].active = false;\r\n                this.tabs[1].active = true;\r\n                this.modalManager.addButtons(this.modalButtons.targetGroupTabComponent);\r\n            }\r\n            else {\r\n                this.modalManager.addButtons(this.modalButtons.basicInfoTabComponent);\r\n            }\r\n            this.isReady = true;\r\n            this.cdr.detectChanges();\r\n        });\r\n    }\r\n    onTabSelected(tabId) {\r\n        this.modalManager.removeAllButtons();\r\n        if (tabId === CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS.BASIC_INFO_TAB_FORM_NAME) {\r\n            this.modalManager.addButtons([...this.modalButtons.basicInfoTabComponent]);\r\n        }\r\n        else if (tabId === CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS.TARGET_GROUP_TAB_NAME) {\r\n            this.modalManager.addButtons([...this.modalButtons.targetGroupTabComponent]);\r\n        }\r\n    }\r\n    initModalButtons() {\r\n        const modalButtonCancel = {\r\n            id: 'cancel',\r\n            label: 'se.cms.component.confirmation.modal.cancel',\r\n            style: ModalButtonStyle.Default,\r\n            action: ModalButtonAction.None,\r\n            callback: () => from(this.onCancel())\r\n        };\r\n        this.modalButtons = {\r\n            basicInfoTabComponent: [\r\n                {\r\n                    id: CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_NEXT,\r\n                    label: 'personalization.modal.customizationvariationmanagement.basicinformationtab.button.next',\r\n                    style: ModalButtonStyle.Primary,\r\n                    action: ModalButtonAction.None,\r\n                    callback: () => from(this.selectTargetGroupTab()),\r\n                    disabledFn: () => {\r\n                        const isBasicInfoTabValid = this.isBasicInfoTabValid();\r\n                        this.fixDisabledTabStyles(isBasicInfoTabValid);\r\n                        return !isBasicInfoTabValid;\r\n                    }\r\n                },\r\n                modalButtonCancel\r\n            ],\r\n            targetGroupTabComponent: [\r\n                {\r\n                    id: CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_OK,\r\n                    label: 'personalization.modal.customizationvariationmanagement.targetgrouptab.button.submit',\r\n                    style: ModalButtonStyle.Primary,\r\n                    action: ModalButtonAction.None,\r\n                    callback: () => this.savingCustomizationView ? of(null) : from(this.save()),\r\n                    disabledFn: () => {\r\n                        const visibleVariations = this.persoCustomizationViewService.selectVisibleVariations();\r\n                        return visibleVariations.length === 0 && this.savingCustomizationView;\r\n                    }\r\n                },\r\n                modalButtonCancel\r\n            ]\r\n        };\r\n    }\r\n    selectTargetGroupTab() {\r\n        return new Promise(() => {\r\n            this.tabsCmp.selectTab(this.tabs[1]);\r\n        });\r\n    }\r\n    fixDisabledTabStyles(isTabValid) {\r\n        const tab = this.document.querySelector(`[tab-id=\"targetgrptab\"]`);\r\n        if (!tab) {\r\n            return;\r\n        }\r\n        if (isTabValid) {\r\n            this.renderer.setStyle(tab, 'pointer-events', 'unset');\r\n            this.renderer.setStyle(tab, 'opacity', 'unset');\r\n        }\r\n        else {\r\n            this.renderer.setStyle(tab, 'pointer-events', 'none');\r\n            this.renderer.setStyle(tab, 'opacity', 0.4);\r\n        }\r\n    }\r\n    isBasicInfoTabValid() {\r\n        const { name } = this.persoCustomizationViewService.selectCustomization();\r\n        return !!name;\r\n    }\r\n    initCustomization() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.customizationCode) {\r\n                this.initialCustomization = cloneDeep(defaultCustomization);\r\n                return;\r\n            }\r\n            const customization = yield this.getCustomization();\r\n            if (customization) {\r\n                this.persoCustomizationViewService.setCustomization(customization);\r\n                this.initialCustomization = cloneDeep(customization);\r\n            }\r\n        });\r\n    }\r\n    fetchCustomizationAndSetDates() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                const customization = yield this.persoRestService.getCustomization({\r\n                    code: this.customizationCode\r\n                });\r\n                customization.enabledStartDate = this.persoDateUtils.formatDate(customization.enabledStartDate, undefined);\r\n                customization.enabledEndDate = this.persoDateUtils.formatDate(customization.enabledEndDate, undefined);\r\n                customization.statusBoolean =\r\n                    customization.status === PERSONALIZATION_MODEL_STATUS_CODES.ENABLED;\r\n                return customization;\r\n            }\r\n            catch (_a) {\r\n                this.persoMessageHandler.sendError(this.translateService.instant('personalization.error.gettingsegments'));\r\n            }\r\n        });\r\n    }\r\n    getCustomization() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const customization = yield this.fetchCustomizationAndSetDates();\r\n            if (!customization) {\r\n                return;\r\n            }\r\n            const variations = yield this.fetchVariations(this.customizationCode);\r\n            if (!variations) {\r\n                return;\r\n            }\r\n            customization.variations = variations;\r\n            return customization;\r\n        });\r\n    }\r\n    fetchVariations(customizationCode) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                const filter = {\r\n                    includeFullFields: true\r\n                };\r\n                const response = yield this.persoRestService.getVariationsForCustomization(customizationCode, filter);\r\n                response.variations.forEach((variation) => {\r\n                    variation.commerceCustomizations = this.persoCommerceCustomizationService.getCommerceActionsCountMap(variation);\r\n                    variation.numberOfCommerceActions = this.persoCommerceCustomizationService.getCommerceActionsCount(variation);\r\n                    delete variation.actions;\r\n                });\r\n                return response.variations;\r\n            }\r\n            catch (_a) {\r\n                this.persoMessageHandler.sendError(this.translateService.instant('personalization.error.gettingcomponents'));\r\n            }\r\n        });\r\n    }\r\n    onCancel() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this.isModalDirty()) {\r\n                this.modalManager.dismiss();\r\n                return;\r\n            }\r\n            try {\r\n                yield this.confirmationModalService.confirm({\r\n                    description: 'personalization.modal.customizationvariationmanagement.targetgrouptab.cancelconfirmation'\r\n                });\r\n                this.modalManager.dismiss();\r\n            }\r\n            catch (_a) {\r\n                this.logService.log('Confirmation Modal cancelled');\r\n            }\r\n        });\r\n    }\r\n    isModalDirty() {\r\n        const customization = this.persoCustomizationViewService.selectCustomization();\r\n        return !isEqual(this.initialCustomization, customization);\r\n    }\r\n    save() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.savingCustomizationView = true;\r\n            const customization = Object.assign({}, this.persoCustomizationViewService.selectCustomization());\r\n            const payload = this.prepareCustomizationPayload(customization, this.isEditMode);\r\n            if (this.isEditMode) {\r\n                try {\r\n                    yield this.persoRestService.updateCustomizationPackage(payload);\r\n                    this.systemEventService.publishAsync('CUSTOMIZATIONS_MODIFIED', {});\r\n                    this.persoMessageHandler.sendSuccess(this.translateService.instant('personalization.info.updatingcustomization'));\r\n                    this.modalManager.dismiss();\r\n                }\r\n                catch (_a) {\r\n                    this.savingCustomizationView = false;\r\n                    this.persoMessageHandler.sendError(this.translateService.instant('personalization.error.updatingcustomization'));\r\n                }\r\n            }\r\n            else {\r\n                try {\r\n                    yield this.persoRestService.createCustomization(payload);\r\n                    this.systemEventService.publishAsync('CUSTOMIZATIONS_MODIFIED', {});\r\n                    this.persoMessageHandler.sendSuccess(this.translateService.instant('personalization.info.creatingcustomization'));\r\n                    this.modalManager.dismiss();\r\n                }\r\n                catch (_b) {\r\n                    this.savingCustomizationView = false;\r\n                    this.persoMessageHandler.sendError(this.translateService.instant('personalization.error.creatingcustomization'));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    prepareCustomizationPayload(customization, isEditMode) {\r\n        customization.enabledStartDate = customization.enabledStartDate\r\n            ? this.persoDateUtils.formatDate(customization.enabledStartDate, PERSONALIZATION_DATE_FORMATS.MODEL_DATE_FORMAT)\r\n            : undefined;\r\n        customization.enabledEndDate = customization.enabledEndDate\r\n            ? this.persoDateUtils.formatDate(customization.enabledEndDate, PERSONALIZATION_DATE_FORMATS.MODEL_DATE_FORMAT)\r\n            : undefined;\r\n        if (!isEditMode) {\r\n            delete customization.catalog;\r\n            delete customization.code;\r\n            delete customization.rank;\r\n        }\r\n        return customization;\r\n    }\r\n};\r\n__decorate([\r\n    ViewChild(TabsComponent, { static: false }),\r\n    __metadata(\"design:type\", TabsComponent)\r\n], ManageCustomizationViewComponent.prototype, \"tabsCmp\", void 0);\r\nManageCustomizationViewComponent = __decorate([\r\n    Component({\r\n        selector: 'perso-manage-customization-view',\r\n        template: `<div class=\"pe-customization-modal__tabs\"><se-tabs *ngIf=\"isReady\" [tabsList]=\"tabs\" [numTabsDisplayed]=\"2\" (onTabSelected)=\"onTabSelected($event)\"></se-tabs></div>`,\r\n        providers: [CustomizationViewService]\r\n    }),\r\n    __param(12, Inject(DOCUMENT)),\r\n    __metadata(\"design:paramtypes\", [PersonalizationsmarteditDateUtils,\r\n        PersonalizationsmarteditCommerceCustomizationService,\r\n        PersonalizationsmarteditMessageHandler,\r\n        CustomizationViewService,\r\n        PersonalizationsmarteditRestService,\r\n        IConfirmationModalService,\r\n        SystemEventService,\r\n        ModalManagerService,\r\n        TranslateService,\r\n        LogService,\r\n        ChangeDetectorRef,\r\n        Renderer2,\r\n        Document])\r\n], ManageCustomizationViewComponent);\r\nexport { ManageCustomizationViewComponent };\r\n//# sourceMappingURL=ManageCustomizationViewComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+common@8.2.14_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@angular/common/common.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@ngx-translate+core@11.0.1_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@ngx-translate/core/ngx-translate-core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types+lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationcommons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/src/service/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/src/management/manageCustomizationView/basicInfoTab/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/src/management/manageCustomizationView/CustomizationViewService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/src/management/manageCustomizationView/targetGroupTab/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/src/management/manageCustomizationView/types.ts"],"map":"{\"version\":3,\"file\":\"ManageCustomizationViewComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/management/manageCustomizationView/ManageCustomizationViewComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/node_modules/.cache/rollup-plugin-typescript2/placeholder/management/manageCustomizationView/ManageCustomizationViewComponent.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, OnInit, Renderer2 } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { PersonalizationsmarteditDateUtils, Customization, PersonalizationsmarteditMessageHandler, CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS, PersonalizationsmarteditCommerceCustomizationService } from 'personalizationcommons';\r\nimport { ModalManagerService, IConfirmationModalService, LogService, SystemEventService, Tab, TabsComponent } from 'smarteditcommons';\r\nimport { PersonalizationsmarteditRestService } from '../../service';\r\nimport { CustomizationViewService } from './CustomizationViewService';\r\nimport { ManageCustomizationViewModalData } from './types';\r\ndeclare type TabId = keyof typeof CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS;\r\nexport declare class ManageCustomizationViewComponent implements OnInit {\r\n    private persoDateUtils;\r\n    private persoCommerceCustomizationService;\r\n    private persoMessageHandler;\r\n    private persoCustomizationViewService;\r\n    private persoRestService;\r\n    private confirmationModalService;\r\n    private systemEventService;\r\n    private modalManager;\r\n    private translateService;\r\n    private logService;\r\n    private cdr;\r\n    private renderer;\r\n    private document;\r\n    tabsCmp: TabsComponent<unknown>;\r\n    tabs: Tab[];\r\n    customizationCode: ManageCustomizationViewModalData['customizationCode'] | undefined;\r\n    variationCode: ManageCustomizationViewModalData['variationCode'] | undefined;\r\n    initialCustomization: Customization;\r\n    isEditMode: boolean;\r\n    isReady: boolean;\r\n    private savingCustomizationView;\r\n    private modalButtons;\r\n    constructor(persoDateUtils: PersonalizationsmarteditDateUtils, persoCommerceCustomizationService: PersonalizationsmarteditCommerceCustomizationService, persoMessageHandler: PersonalizationsmarteditMessageHandler, persoCustomizationViewService: CustomizationViewService, persoRestService: PersonalizationsmarteditRestService, confirmationModalService: IConfirmationModalService, systemEventService: SystemEventService, modalManager: ModalManagerService<ManageCustomizationViewModalData | undefined>, translateService: TranslateService, logService: LogService, cdr: ChangeDetectorRef, renderer: Renderer2, document: Document);\r\n    ngOnInit(): Promise<void>;\r\n    onTabSelected(tabId: TabId): void;\r\n    private initModalButtons;\r\n    private selectTargetGroupTab;\r\n    private fixDisabledTabStyles;\r\n    private isBasicInfoTabValid;\r\n    private initCustomization;\r\n    private fetchCustomizationAndSetDates;\r\n    private getCustomization;\r\n    private fetchVariations;\r\n    private onCancel;\r\n    private isModalDirty;\r\n    private save;\r\n    private prepareCustomizationPayload;\r\n}\r\nexport {};\r\n"}}
