{"code":"import { __awaiter, __decorate, __metadata, __param } from \"tslib\";\r\nimport { Component, Optional, Inject, Injector, ViewEncapsulation } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { PersonalizationsmarteditUtils, PersonalizationsmarteditMessageHandler, PersonalizationsmarteditCommerceCustomizationService, PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES, PERSONLIZATION_SEARCH_EXTENSION_INJECTOR_TOKEN, PERSONLIZATION_SEARCH_EXTENSION_TOKEN, PERSONLIZATION_PROMOTION_EXTENSION_TOKEN, PERSONLIZATION_PROMOTION_EXTENSION_INJECTOR_TOKEN } from 'personalizationcommons';\r\nimport { from as fromPromise } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\nimport { SystemEventService, LogService, promiseUtils, ModalManagerService, ModalButtonAction, ModalButtonStyle } from 'smarteditcommons';\r\nimport { PersonalizationsmarteditContextService } from '../../service/PersonalizationsmarteditContextServiceOuter';\r\nimport { PersonalizationsmarteditRestService } from '../../service/PersonalizationsmarteditRestService';\r\nimport { ActionsDataFactory } from './ActionsDataFactory';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"CommerceCustomizationViewComponent\", {\r\n    selector: 'commerce-customization-view',\r\n    template: `<div id=\"commerceCustomizationBody-002\" class=\"perso-cc-modal\"><div class=\"perso-cc-modal__title-layout\"><div class=\"perso-wrap-ellipsis perso-cc-modal__title-cname\" [textContent]=\"customization.name\" title=\"{{customization.name}}\"></div><div class=\"perso-cc-modal__title-status\" [ngClass]=\"customizationStatus\" [textContent]=\"' (' + customizationStatusText + ') '\"></div><span>></span><div class=\"perso-wrap-ellipsis perso-cc-modal__title-vname\" [textContent]=\"variation.name\" title=\"{{variation.name}}\"></div><div class=\"perso-cc-modal__title-status\" [ngClass]=\"variationStatus\" [textContent]=\"' (' + variationStatusText + ')'\"></div></div><div class=\"form-group perso-cc-modal__content-layout\"><label for=\"commerce-customization-type-1\" class=\"fd-form__label\" translate=\"personalization.modal.commercecustomization.action.type\"></label><se-select [id]=\"commerce-customization-type-1\" class=\"fd-form__control\" [fetchStrategy]=\"customizationTypeFetchStrategy\" [searchEnabled]=\"false\" [(model)]=\"select.typeId\" [onChange]=\"onActionTypeChange\"></se-select></div><ng-container><ng-container *ngComponentOutlet=\"promotionComponent.component; injector: promotionComponent.injector\"></ng-container></ng-container><ng-container><ng-container *ngComponentOutlet=\"searchProfileComponent.component; injector: searchProfileComponent.injector\"></ng-container></ng-container><div class=\"select2-choices\"><div class=\"ui-select-match-item select2-search-choice\" *ngFor=\"let action of getActionsToDisplay()\"><span [textContent]=\"displayAction(action)\"></span> <span class=\"ui-select-match-close select2-search-choice-close sap-icon--decline\" (click)=\"removeSelectedAction(action)\"></span></div></div></div>`,\r\n    encapsulation: ViewEncapsulation.None\r\n});\r\nlet CommerceCustomizationViewComponent = class CommerceCustomizationViewComponent {\r\n    constructor(injector, personlizationSearchExtensionComponent, personlizationPromotionExtensionComponent, translateService, actionsDataFactory, personalizationsmarteditRestService, personalizationsmarteditMessageHandler, systemEventService, personalizationsmarteditCommerceCustomizationService, personalizationsmarteditContextService, personalizationsmarteditUtils, modalManager, logService) {\r\n        this.injector = injector;\r\n        this.translateService = translateService;\r\n        this.actionsDataFactory = actionsDataFactory;\r\n        this.personalizationsmarteditRestService = personalizationsmarteditRestService;\r\n        this.personalizationsmarteditMessageHandler = personalizationsmarteditMessageHandler;\r\n        this.systemEventService = systemEventService;\r\n        this.personalizationsmarteditCommerceCustomizationService = personalizationsmarteditCommerceCustomizationService;\r\n        this.personalizationsmarteditContextService = personalizationsmarteditContextService;\r\n        this.personalizationsmarteditUtils = personalizationsmarteditUtils;\r\n        this.modalManager = modalManager;\r\n        this.logService = logService;\r\n        this.availableTypes = [];\r\n        this.select = {};\r\n        this.customizationTypeFetchStrategy = {\r\n            fetchAll: () => {\r\n                this.availableTypes = [];\r\n                this.availableTypes = this.personalizationsmarteditCommerceCustomizationService.getAvailableTypes(this.personalizationsmarteditContextService.getSeData().seConfigurationData);\r\n                this.availableTypes.forEach((type) => {\r\n                    type.id = type.type;\r\n                    type.label = type.text;\r\n                });\r\n                return Promise.resolve(this.availableTypes);\r\n            }\r\n        };\r\n        this.isItemInSelectedActions = (action, comparer) => this.actionsDataFactory.isItemInSelectedActions(action, comparer);\r\n        this.addAction = (action, comparer) => {\r\n            this.actionsDataFactory.addAction(action, comparer);\r\n        };\r\n        this.availableTypes = this.personalizationsmarteditCommerceCustomizationService.getAvailableTypes(this.personalizationsmarteditContextService.getSeData().seConfigurationData);\r\n        this.availableTypes.forEach((type) => {\r\n            type.id = type.type;\r\n            type.label = type.text;\r\n        });\r\n        this.select = {\r\n            typeId: this.availableTypes[0].id,\r\n            template: this.availableTypes[0].template\r\n        };\r\n        this.promotionCode = 'cxPromotionActionData';\r\n        this.searchProfilesCode = 'cxSearchProfileActionData';\r\n        this.actionsDataFactory.resetActions();\r\n        this.actionsDataFactory.resetRemovedActions();\r\n        this.actions = this.actionsDataFactory.getActions();\r\n        this.removedActions = this.actionsDataFactory.getRemovedActions();\r\n        this.onActionTypeChange = this.onActionTypeChange.bind(this);\r\n        if (personlizationSearchExtensionComponent) {\r\n            this.initPersonlizationSearchExtensionComponent(personlizationSearchExtensionComponent);\r\n        }\r\n        if (personlizationPromotionExtensionComponent) {\r\n            this.initPersonlizationPromotionExtensionComponent(personlizationPromotionExtensionComponent);\r\n        }\r\n    }\r\n    ngOnInit() {\r\n        this.modalManager\r\n            .getModalData()\r\n            .pipe(take(1))\r\n            .subscribe((data) => {\r\n            this.customization = data.customization;\r\n            this.variation = data.variation;\r\n        });\r\n        this.customizationStatusText = this.personalizationsmarteditUtils.getEnablementTextForCustomization(this.customization, 'personalization.modal.commercecustomization');\r\n        this.variationStatusText = this.personalizationsmarteditUtils.getEnablementTextForVariation(this.variation, 'personalization.modal.commercecustomization');\r\n        this.customizationStatus = this.personalizationsmarteditUtils.getActivityStateForCustomization(this.customization);\r\n        this.variationStatus = this.personalizationsmarteditUtils.getActivityStateForVariation(this.customization, this.variation);\r\n        this.modalManager.addButtons([\r\n            {\r\n                id: 'confirmOk',\r\n                label: 'personalization.modal.commercecustomization.button.submit',\r\n                style: ModalButtonStyle.Primary,\r\n                action: ModalButtonAction.Close,\r\n                callback: () => fromPromise(this.onSave()),\r\n                disabledFn: () => !this.isDirty()\r\n            },\r\n            {\r\n                id: 'confirmCancel',\r\n                label: 'personalization.modal.commercecustomization.button.cancel',\r\n                style: ModalButtonStyle.Default,\r\n                action: ModalButtonAction.Close,\r\n                callback: () => fromPromise(this.onCancel())\r\n            }\r\n        ]);\r\n        this.populateActions();\r\n    }\r\n    onActionTypeChange() {\r\n        this.availableTypes.map((type) => {\r\n            if (type.id === this.select.typeId) {\r\n                this.select.template = type.template;\r\n            }\r\n        });\r\n    }\r\n    getSeData() {\r\n        return this.personalizationsmarteditContextService.getSeData();\r\n    }\r\n    removeSelectedAction(actionWrapper) {\r\n        const index = this.actions.indexOf(actionWrapper);\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        const removed = this.actions.splice(index, 1);\r\n        if (removed[0].status === PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.OLD ||\r\n            removed[0].status === PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.UPDATE) {\r\n            removed[0].status = PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.DELETE;\r\n            this.removedActions.push(removed[0]);\r\n        }\r\n    }\r\n    displayAction(actionWrapper) {\r\n        const action = actionWrapper.action;\r\n        const type = this.getType(action.type);\r\n        if (type.getName) {\r\n            return type.getName(action);\r\n        }\r\n        else {\r\n            return action.code;\r\n        }\r\n    }\r\n    getActionsToDisplay() {\r\n        return this.actionsDataFactory.getActions();\r\n    }\r\n    isDirty() {\r\n        let dirty = false;\r\n        this.actions.forEach((wrapper) => {\r\n            dirty =\r\n                dirty ||\r\n                    wrapper.status === PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.NEW ||\r\n                    wrapper.status === PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.UPDATE;\r\n        });\r\n        dirty = dirty || this.removedActions.length > 0;\r\n        return dirty;\r\n    }\r\n    getSelectedTypeCode() {\r\n        return this.select.typeId;\r\n    }\r\n    getCustomization() {\r\n        return this.customization;\r\n    }\r\n    getViration() {\r\n        return this.variation;\r\n    }\r\n    initPersonlizationSearchExtensionComponent({ component }) {\r\n        this.searchProfileComponent = {\r\n            component,\r\n            injector: Injector.create({\r\n                parent: this.injector,\r\n                providers: [\r\n                    {\r\n                        provide: PERSONLIZATION_SEARCH_EXTENSION_INJECTOR_TOKEN,\r\n                        useValue: {\r\n                            seData: this.getSeData(),\r\n                            actions: this.actions,\r\n                            addAction: (action, comparer) => this.addAction(action, comparer),\r\n                            isActionInSelectDisabled: (action, comparer) => this.isItemInSelectedActions(action, comparer),\r\n                            getSelectedTypeCode: () => this.getSelectedTypeCode(),\r\n                            getCustomization: () => this.getCustomization(),\r\n                            getVariation: () => this.getViration()\r\n                        }\r\n                    }\r\n                ]\r\n            })\r\n        };\r\n    }\r\n    initPersonlizationPromotionExtensionComponent({ component }) {\r\n        this.promotionComponent = {\r\n            component,\r\n            injector: Injector.create({\r\n                parent: this.injector,\r\n                providers: [\r\n                    {\r\n                        provide: PERSONLIZATION_PROMOTION_EXTENSION_INJECTOR_TOKEN,\r\n                        useValue: {\r\n                            addAction: (action, comparer) => this.addAction(action, comparer),\r\n                            isActionInSelectDisabled: (action, comparer) => this.isItemInSelectedActions(action, comparer),\r\n                            getSelectedTypeCode: () => this.getSelectedTypeCode()\r\n                        }\r\n                    }\r\n                ]\r\n            })\r\n        };\r\n    }\r\n    populateActions() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                const response = yield this.personalizationsmarteditRestService.getActions(this.customization.code, this.variation.code, {});\r\n                const actions = response.actions\r\n                    .filter((elem) => elem.type !== 'cxCmsActionData')\r\n                    .map((item) => ({\r\n                    code: item.code,\r\n                    action: item,\r\n                    status: PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.OLD\r\n                }));\r\n                this.actionsDataFactory.resetActions();\r\n                this.personalizationsmarteditUtils.uniqueArray(this.actionsDataFactory.actions, actions || []);\r\n            }\r\n            catch (e) {\r\n                this.personalizationsmarteditMessageHandler.sendError(this.translateService.instant('personalization.error.gettingactions'));\r\n            }\r\n        });\r\n    }\r\n    getType(type) {\r\n        for (const item of this.availableTypes) {\r\n            if (item.type === type) {\r\n                return item;\r\n            }\r\n        }\r\n        return {};\r\n    }\r\n    sendRefreshEvent() {\r\n        this.systemEventService.publishAsync('CUSTOMIZATIONS_MODIFIED', {});\r\n    }\r\n    onCancel() {\r\n        this.modalManager.close(null);\r\n        return Promise.resolve();\r\n    }\r\n    onSave() {\r\n        const createData = {\r\n            actions: this.actions\r\n                .filter((item) => item.status === PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.NEW)\r\n                .map((item) => item.action)\r\n        };\r\n        const deleteData = this.removedActions\r\n            .filter((item) => item.status === PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.DELETE)\r\n            .map((item) => item.action.code);\r\n        const updateData = {\r\n            actions: this.actions\r\n                .filter((item) => item.status ===\r\n                PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.UPDATE)\r\n                .map((item) => item.action)\r\n        };\r\n        const shouldCreate = createData.actions.length > 0;\r\n        const shouldDelete = deleteData.length > 0;\r\n        const shouldUpdate = updateData.actions.length > 0;\r\n        (() => {\r\n            if (shouldCreate) {\r\n                return this.createActions(this.customization.code, this.variation.code, createData);\r\n            }\r\n            else {\r\n                return Promise.resolve();\r\n            }\r\n        })().then((respCreate) => {\r\n            (() => {\r\n                if (shouldDelete) {\r\n                    return this.deleteActions(this.customization.code, this.variation.code, deleteData);\r\n                }\r\n                else {\r\n                    return Promise.resolve();\r\n                }\r\n            })().then((respDelete) => {\r\n                if (shouldUpdate) {\r\n                    this.updateActions(this.customization.code, this.variation.code, updateData, respCreate, respDelete);\r\n                }\r\n                else {\r\n                    return Promise.resolve();\r\n                }\r\n            });\r\n        });\r\n        this.modalManager.close(null);\r\n        return Promise.resolve();\r\n    }\r\n    getActionTypesForActions(actions) {\r\n        return actions\r\n            .map((action) => action.type)\r\n            .filter((item, index, arr) => arr.indexOf(item) === index)\r\n            .map((typeCode) => this.availableTypes.filter((availableType) => availableType.type === typeCode)[0]);\r\n    }\r\n    createActions(customizationCode, variationCode, createData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const deferred = promiseUtils.defer();\r\n            try {\r\n                const response = yield this.personalizationsmarteditRestService.createActions(customizationCode, variationCode, createData, {});\r\n                this.personalizationsmarteditMessageHandler.sendSuccess(this.translateService.instant('personalization.info.creatingaction'));\r\n                this.sendRefreshEvent();\r\n                deferred.resolve(response);\r\n            }\r\n            catch (e) {\r\n                this.personalizationsmarteditMessageHandler.sendError(this.translateService.instant('personalization.error.creatingaction'));\r\n                deferred.reject();\r\n            }\r\n            return deferred.promise;\r\n        });\r\n    }\r\n    deleteActions(customizationCode, variationCode, deleteData) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const deferred = promiseUtils.defer();\r\n            try {\r\n                const response = yield this.personalizationsmarteditRestService.deleteActions(customizationCode, variationCode, deleteData, {});\r\n                this.personalizationsmarteditMessageHandler.sendSuccess(this.translateService.instant('personalization.info.removingaction'));\r\n                this.sendRefreshEvent();\r\n                deferred.resolve(response);\r\n            }\r\n            catch (e) {\r\n                this.personalizationsmarteditMessageHandler.sendError(this.translateService.instant('personalization.error.removingaction'));\r\n                deferred.resolve();\r\n            }\r\n            return deferred.promise;\r\n        });\r\n    }\r\n    updateActions(customizationCode, variationCode, updateData, respCreate, respDelete) {\r\n        const updateTypes = this.getActionTypesForActions(updateData.actions);\r\n        updateTypes.forEach((type) => {\r\n            if (type.updateActions) {\r\n                const actionsForType = updateData.actions.filter((a) => this.getType(a.type) === type);\r\n                type.updateActions(customizationCode, variationCode, actionsForType, respCreate, respDelete).then(() => {\r\n                    this.personalizationsmarteditMessageHandler.sendSuccess(this.translateService.instant('personalization.info.updatingactions'));\r\n                    this.sendRefreshEvent();\r\n                }, () => {\r\n                    this.personalizationsmarteditMessageHandler.sendError(this.translateService.instant('personalization.error.updatingactions'));\r\n                });\r\n            }\r\n            else {\r\n                this.logService.debug(this.translateService.instant('personalization.error.noupdatingactions'));\r\n            }\r\n        });\r\n    }\r\n};\r\nCommerceCustomizationViewComponent = __decorate([\r\n    Component({\r\n        selector: 'commerce-customization-view',\r\n        template: `<div id=\"commerceCustomizationBody-002\" class=\"perso-cc-modal\"><div class=\"perso-cc-modal__title-layout\"><div class=\"perso-wrap-ellipsis perso-cc-modal__title-cname\" [textContent]=\"customization.name\" title=\"{{customization.name}}\"></div><div class=\"perso-cc-modal__title-status\" [ngClass]=\"customizationStatus\" [textContent]=\"' (' + customizationStatusText + ') '\"></div><span>></span><div class=\"perso-wrap-ellipsis perso-cc-modal__title-vname\" [textContent]=\"variation.name\" title=\"{{variation.name}}\"></div><div class=\"perso-cc-modal__title-status\" [ngClass]=\"variationStatus\" [textContent]=\"' (' + variationStatusText + ')'\"></div></div><div class=\"form-group perso-cc-modal__content-layout\"><label for=\"commerce-customization-type-1\" class=\"fd-form__label\" translate=\"personalization.modal.commercecustomization.action.type\"></label><se-select [id]=\"commerce-customization-type-1\" class=\"fd-form__control\" [fetchStrategy]=\"customizationTypeFetchStrategy\" [searchEnabled]=\"false\" [(model)]=\"select.typeId\" [onChange]=\"onActionTypeChange\"></se-select></div><ng-container><ng-container *ngComponentOutlet=\"promotionComponent.component; injector: promotionComponent.injector\"></ng-container></ng-container><ng-container><ng-container *ngComponentOutlet=\"searchProfileComponent.component; injector: searchProfileComponent.injector\"></ng-container></ng-container><div class=\"select2-choices\"><div class=\"ui-select-match-item select2-search-choice\" *ngFor=\"let action of getActionsToDisplay()\"><span [textContent]=\"displayAction(action)\"></span> <span class=\"ui-select-match-close select2-search-choice-close sap-icon--decline\" (click)=\"removeSelectedAction(action)\"></span></div></div></div>`,\r\n        encapsulation: ViewEncapsulation.None\r\n    }),\r\n    __param(1, Optional()),\r\n    __param(1, Inject(PERSONLIZATION_SEARCH_EXTENSION_TOKEN)),\r\n    __param(2, Inject(PERSONLIZATION_PROMOTION_EXTENSION_TOKEN)),\r\n    __metadata(\"design:paramtypes\", [Injector, Object, Object, TranslateService,\r\n        ActionsDataFactory,\r\n        PersonalizationsmarteditRestService,\r\n        PersonalizationsmarteditMessageHandler,\r\n        SystemEventService,\r\n        PersonalizationsmarteditCommerceCustomizationService,\r\n        PersonalizationsmarteditContextService,\r\n        PersonalizationsmarteditUtils,\r\n        ModalManagerService,\r\n        LogService])\r\n], CommerceCustomizationViewComponent);\r\nexport { CommerceCustomizationViewComponent };\r\n//# sourceMappingURL=CommerceCustomizationViewComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@ngx-translate+core@11.0.1_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@ngx-translate/core/ngx-translate-core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationcommons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/src/interfaces/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/src/service/PersonalizationsmarteditContextServiceOuter.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/src/service/PersonalizationsmarteditRestService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/src/management/commerceCustomizationView/ActionsDataFactory.ts"],"map":"{\"version\":3,\"file\":\"CommerceCustomizationViewComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/management/commerceCustomizationView/CommerceCustomizationViewComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/node_modules/.cache/rollup-plugin-typescript2/placeholder/management/commerceCustomizationView/CommerceCustomizationViewComponent.d.ts","writeByteOrderMark":false,"text":"import { OnInit, Type, Injector } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { SeData, Customization, CustomizationVariation, PersonalizationsmarteditUtils, PersonalizationsmarteditMessageHandler, PersonalizationsmarteditCommerceCustomizationService, PersonlizationSearchExtensionComponent, PersonlizationPromotionExtensionComponent } from 'personalizationcommons';\r\nimport { Action, BaseAction } from 'personalizationsmarteditcontainer/interfaces';\r\nimport { SystemEventService, LogService, ModalManagerService } from 'smarteditcommons';\r\nimport { PersonalizationsmarteditContextService } from '../../service/PersonalizationsmarteditContextServiceOuter';\r\nimport { PersonalizationsmarteditRestService } from '../../service/PersonalizationsmarteditRestService';\r\nimport { ActionsDataFactory } from './ActionsDataFactory';\r\nexport interface CommerceCustomizationViewData {\r\n    customization: Customization;\r\n    variation: CustomizationVariation;\r\n}\r\ninterface SearchProfileComponent {\r\n    component: Type<any>;\r\n    injector: Injector;\r\n}\r\ninterface PromotionComponent {\r\n    component: Type<any>;\r\n    injector: Injector;\r\n}\r\nexport declare class CommerceCustomizationViewComponent implements OnInit {\r\n    private injector;\r\n    private translateService;\r\n    private actionsDataFactory;\r\n    private personalizationsmarteditRestService;\r\n    private personalizationsmarteditMessageHandler;\r\n    private systemEventService;\r\n    private personalizationsmarteditCommerceCustomizationService;\r\n    private personalizationsmarteditContextService;\r\n    private personalizationsmarteditUtils;\r\n    private modalManager;\r\n    private logService;\r\n    promotionCode: string;\r\n    searchProfilesCode: string;\r\n    customization: Customization;\r\n    variation: CustomizationVariation;\r\n    actions: Action[];\r\n    availableTypes: any[];\r\n    select: any;\r\n    customizationStatusText: string;\r\n    variationStatusText: string;\r\n    customizationStatus: string;\r\n    variationStatus: string;\r\n    removedActions: Action[];\r\n    customizationTypeFetchStrategy: {\r\n        fetchAll: () => Promise<any[]>;\r\n    };\r\n    searchProfileComponent: SearchProfileComponent | undefined;\r\n    promotionComponent: PromotionComponent | undefined;\r\n    constructor(injector: Injector, personlizationSearchExtensionComponent: PersonlizationSearchExtensionComponent, personlizationPromotionExtensionComponent: PersonlizationPromotionExtensionComponent, translateService: TranslateService, actionsDataFactory: ActionsDataFactory, personalizationsmarteditRestService: PersonalizationsmarteditRestService, personalizationsmarteditMessageHandler: PersonalizationsmarteditMessageHandler, systemEventService: SystemEventService, personalizationsmarteditCommerceCustomizationService: PersonalizationsmarteditCommerceCustomizationService, personalizationsmarteditContextService: PersonalizationsmarteditContextService, personalizationsmarteditUtils: PersonalizationsmarteditUtils, modalManager: ModalManagerService, logService: LogService);\r\n    ngOnInit(): void;\r\n    onActionTypeChange(): void;\r\n    getSeData(): SeData;\r\n    isItemInSelectedActions: (action: BaseAction, comparer: (p1: any, p2: any) => boolean) => Action;\r\n    removeSelectedAction(actionWrapper: any): void;\r\n    addAction: (action: BaseAction, comparer: (p1: any, p2: any) => boolean) => void;\r\n    displayAction(actionWrapper: any): string;\r\n    getActionsToDisplay(): Action[];\r\n    isDirty(): boolean;\r\n    private getSelectedTypeCode;\r\n    private getCustomization;\r\n    private getViration;\r\n    private initPersonlizationSearchExtensionComponent;\r\n    private initPersonlizationPromotionExtensionComponent;\r\n    private populateActions;\r\n    private getType;\r\n    private sendRefreshEvent;\r\n    private onCancel;\r\n    private onSave;\r\n    private getActionTypesForActions;\r\n    private createActions;\r\n    private deleteActions;\r\n    private updateActions;\r\n}\r\nexport {};\r\n"}}
