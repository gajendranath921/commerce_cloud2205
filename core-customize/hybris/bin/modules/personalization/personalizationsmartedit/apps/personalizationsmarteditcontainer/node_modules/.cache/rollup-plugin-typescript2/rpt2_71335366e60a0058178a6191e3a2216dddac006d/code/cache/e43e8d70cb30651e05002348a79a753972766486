{"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport * as lodash from 'lodash';\r\nimport { PersonalizationsmarteditUtils } from 'personalizationcommons';\r\nimport { SeDowngradeService } from 'smarteditcommons';\r\nimport { PersonalizationsmarteditRestService } from '../service';\r\nlet /* @ngInject */ CustomizationDataFactory = class /* @ngInject */ CustomizationDataFactory {\r\n    constructor(personalizationsmarteditRestService, personalizationsmarteditUtils) {\r\n        this.personalizationsmarteditRestService = personalizationsmarteditRestService;\r\n        this.personalizationsmarteditUtils = personalizationsmarteditUtils;\r\n        this.items = [];\r\n        this.defaultFilter = {};\r\n        this.defaultDataArrayName = 'customizations';\r\n    }\r\n    getCustomizations(filter) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                const customizations = yield this.personalizationsmarteditRestService.getCustomizations(filter);\r\n                this.personalizationsmarteditUtils.uniqueArray(this.items, customizations[this.defaultDataArrayName] || []);\r\n                this.defaultSuccessCallbackFunction(customizations);\r\n            }\r\n            catch (e) {\r\n                this.defaultErrorCallbackFunction(e);\r\n            }\r\n        });\r\n    }\r\n    updateData(params, successCallbackFunction, errorCallbackFunction) {\r\n        params = params || {};\r\n        this.defaultFilter = params.filter || this.defaultFilter;\r\n        this.defaultDataArrayName = params.dataArrayName || this.defaultDataArrayName;\r\n        if (successCallbackFunction && typeof successCallbackFunction === 'function') {\r\n            this.defaultSuccessCallbackFunction = successCallbackFunction;\r\n        }\r\n        if (errorCallbackFunction && typeof errorCallbackFunction === 'function') {\r\n            this.defaultErrorCallbackFunction = errorCallbackFunction;\r\n        }\r\n        this.getCustomizations(this.defaultFilter);\r\n    }\r\n    refreshData() {\r\n        if (this.defaultFilter === {}) {\r\n            return;\r\n        }\r\n        const tempFilter = lodash.cloneDeep(this.defaultFilter);\r\n        tempFilter.currentSize = this.items.length;\r\n        tempFilter.currentPage = 0;\r\n        this.resetData();\r\n        this.getCustomizations(tempFilter);\r\n    }\r\n    resetData() {\r\n        this.items.length = 0;\r\n    }\r\n};\r\n/* @ngInject */ CustomizationDataFactory = __decorate([\r\n    SeDowngradeService(),\r\n    __metadata(\"design:paramtypes\", [PersonalizationsmarteditRestService,\r\n        PersonalizationsmarteditUtils])\r\n], /* @ngInject */ CustomizationDataFactory);\r\nexport { /* @ngInject */ CustomizationDataFactory };\r\n//# sourceMappingURL=CustomizationDataFactory.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types+lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationcommons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/src/service/index.ts"],"map":"{\"version\":3,\"file\":\"CustomizationDataFactory.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/dataFactory/CustomizationDataFactory.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,KAAK,MAAM,MAAM,QAAQ,CAAC;AACjC,OAAO,EAAE,6BAA6B,EAAiB,MAAM,wBAAwB,CAAC;AACtF,OAAO,EAAE,kBAAkB,EAAE,MAAM,kBAAkB,CAAC;AACtD,OAAO,EAAE,mCAAmC,EAAE,MAAM,YAAY,CAAC;AAGjE,+CAAA;IAQI,YACc,mCAAwE,EACxE,6BAA4D;QAD5D,wCAAmC,GAAnC,mCAAmC,CAAqC;QACxE,kCAA6B,GAA7B,6BAA6B,CAA+B;QANnE,UAAK,GAAoB,EAAE,CAAC;QAC3B,kBAAa,GAAG,EAAE,CAAC;QACnB,yBAAoB,GAAG,gBAAgB,CAAC;IAK7C,CAAC;IAES,iBAAiB,CAAC,MAAW;;YACtC,IAAI;gBACA,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,mCAAmC,CAAC,iBAAiB,CACnF,MAAM,CACT,CAAC;gBACF,IAAI,CAAC,6BAA6B,CAAC,WAAW,CAC1C,IAAI,CAAC,KAAK,EACV,cAAc,CAAC,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,CAClD,CAAC;gBACF,IAAI,CAAC,8BAA8B,CAAC,cAAc,CAAC,CAAC;aACvD;YAAC,OAAO,CAAC,EAAE;gBACR,IAAI,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC;aACxC;QACL,CAAC;KAAA;IAEM,UAAU,CACb,MAAW,EACX,uBAAgD,EAChD,qBAA8C;QAE9C,MAAM,GAAG,MAAM,IAAI,EAAE,CAAC;QACtB,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,MAAM,IAAI,IAAI,CAAC,aAAa,CAAC;QACzD,IAAI,CAAC,oBAAoB,GAAG,MAAM,CAAC,aAAa,IAAI,IAAI,CAAC,oBAAoB,CAAC;QAC9E,IAAI,uBAAuB,IAAI,OAAO,uBAAuB,KAAK,UAAU,EAAE;YAC1E,IAAI,CAAC,8BAA8B,GAAG,uBAAuB,CAAC;SACjE;QACD,IAAI,qBAAqB,IAAI,OAAO,qBAAqB,KAAK,UAAU,EAAE;YACtE,IAAI,CAAC,4BAA4B,GAAG,qBAAqB,CAAC;SAC7D;QAED,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;IAC/C,CAAC;IAEM,WAAW;QACd,IAAI,IAAI,CAAC,aAAa,KAAK,EAAE,EAAE;YAC3B,OAAO;SACV;QACD,MAAM,UAAU,GAAQ,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC7D,UAAU,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAC3C,UAAU,CAAC,WAAW,GAAG,CAAC,CAAC;QAC3B,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC;IACvC,CAAC;IAEM,SAAS;QACZ,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC;IAC1B,CAAC;CACJ,CAAA;AA5DD;IADC,kBAAkB,EAAE;qCAUkC,mCAAmC;QACzC,6BAA6B;4CAkD7E\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/node_modules/.cache/rollup-plugin-typescript2/placeholder/dataFactory/CustomizationDataFactory.d.ts","writeByteOrderMark":false,"text":"import { PersonalizationsmarteditUtils, Customization } from 'personalizationcommons';\r\nimport { PersonalizationsmarteditRestService } from '../service';\r\nexport declare class CustomizationDataFactory {\r\n    protected personalizationsmarteditRestService: PersonalizationsmarteditRestService;\r\n    protected personalizationsmarteditUtils: PersonalizationsmarteditUtils;\r\n    defaultSuccessCallbackFunction: (repsonse: any) => void;\r\n    defaultErrorCallbackFunction: (response: any) => void;\r\n    items: Customization[];\r\n    private defaultFilter;\r\n    private defaultDataArrayName;\r\n    constructor(personalizationsmarteditRestService: PersonalizationsmarteditRestService, personalizationsmarteditUtils: PersonalizationsmarteditUtils);\r\n    getCustomizations(filter: any): Promise<void>;\r\n    updateData(params: any, successCallbackFunction: (response: any) => void, errorCallbackFunction: (response: any) => void): any;\r\n    refreshData(): void;\r\n    resetData(): void;\r\n}\r\n"}}
