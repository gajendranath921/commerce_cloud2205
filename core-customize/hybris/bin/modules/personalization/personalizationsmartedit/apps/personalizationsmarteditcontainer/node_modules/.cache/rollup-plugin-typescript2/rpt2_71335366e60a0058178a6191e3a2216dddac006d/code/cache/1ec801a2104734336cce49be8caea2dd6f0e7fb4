{"code":"import { __decorate, __metadata } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nimport * as lodash from 'lodash';\r\nimport { PersonalizationsmarteditContextUtils, COMBINED_VIEW_TOOLBAR_ITEM_KEY } from 'personalizationcommons';\r\nimport { CombinedViewCommonsService } from 'personalizationsmarteditcontainer/combinedView/CombinedViewCommonsService';\r\nimport { PersonalizationsmarteditContextService } from 'personalizationsmarteditcontainer/service/PersonalizationsmarteditContextServiceOuter';\r\nimport { CrossFrameEventService, SHOW_TOOLBAR_ITEM_CONTEXT, HIDE_TOOLBAR_ITEM_CONTEXT } from 'smarteditcommons';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"CombinedViewToolbarContextComponent\", {\r\n    selector: 'combined-view-toolbar-context',\r\n    template: `<div *ngIf=\"visible\" class=\"pe-toolbar-item-context\"><span class=\"sap-icon--slim-arrow-right pe-toolbar-item-context__icon\"></span><div class=\"pe-toolbar-item-context__btn\"><div class=\"pe-toolbar-item-context__btn-txt\"><div title=\"{{title}}\" class=\"perso-wrap-ellipsis pe-toolbar-item-context__btn-title\">{{title}}</div><div title=\"{{subtitle}}\" class=\"perso-wrap-ellipsis pe-toolbar-item-context__btn-subtitle\">{{subtitle}}</div></div></div><div class=\"pe-toolbar-item-context__btn-hyicon\" (click)=\"clear()\"><span class=\"sap-icon--decline\"></span></div></div>`\r\n});\r\nlet CombinedViewToolbarContextComponent = class CombinedViewToolbarContextComponent {\r\n    constructor(combinedViewCommonsService, personalizationsmarteditContextService, personalizationsmarteditContextUtils, crossFrameEventService) {\r\n        this.combinedViewCommonsService = combinedViewCommonsService;\r\n        this.personalizationsmarteditContextService = personalizationsmarteditContextService;\r\n        this.personalizationsmarteditContextUtils = personalizationsmarteditContextUtils;\r\n        this.crossFrameEventService = crossFrameEventService;\r\n    }\r\n    ngOnInit() {\r\n        const combinedView = this.personalizationsmarteditContextService.getCombinedView();\r\n        this.visible = false;\r\n        this.selectedCustomization = lodash.cloneDeep(combinedView.customize.selectedCustomization);\r\n        if (this.selectedCustomization) {\r\n            this.title = combinedView.customize.selectedCustomization.name;\r\n            this.subtitle = combinedView.customize\r\n                .selectedVariations.name;\r\n            this.visible = true;\r\n        }\r\n        this.oldSelectedCustomization = combinedView.customize.selectedCustomization;\r\n        this.oldSelectedCustomizationEnabled = combinedView.enabled;\r\n    }\r\n    ngDoCheck() {\r\n        const combinedView = this.personalizationsmarteditContextService.getCombinedView();\r\n        const selectedCustomization = combinedView.customize.selectedCustomization;\r\n        if (selectedCustomization && selectedCustomization !== this.oldSelectedCustomization) {\r\n            this.oldSelectedCustomization = selectedCustomization;\r\n            this.title = selectedCustomization.name;\r\n            this.subtitle = combinedView.customize\r\n                .selectedVariations.name;\r\n            this.visible = true;\r\n            this.crossFrameEventService.publish(SHOW_TOOLBAR_ITEM_CONTEXT, COMBINED_VIEW_TOOLBAR_ITEM_KEY);\r\n        }\r\n        else if (!selectedCustomization) {\r\n            this.visible = false;\r\n            this.crossFrameEventService.publish(HIDE_TOOLBAR_ITEM_CONTEXT, COMBINED_VIEW_TOOLBAR_ITEM_KEY);\r\n        }\r\n        const selectedCustomizationEnabled = combinedView.enabled;\r\n        if (selectedCustomizationEnabled &&\r\n            selectedCustomizationEnabled !== this.oldSelectedCustomizationEnabled) {\r\n            this.oldSelectedCustomizationEnabled = selectedCustomizationEnabled;\r\n            this.personalizationsmarteditContextUtils.clearCombinedViewCustomizeContext(this.personalizationsmarteditContextService);\r\n        }\r\n    }\r\n    clear() {\r\n        this.personalizationsmarteditContextUtils.clearCombinedViewCustomizeContext(this.personalizationsmarteditContextService);\r\n        const combinedView = this.personalizationsmarteditContextService.getCombinedView();\r\n        const variations = [];\r\n        (combinedView.selectedItems || []).forEach((item) => {\r\n            variations.push({\r\n                customizationCode: item.customization.code,\r\n                variationCode: item.variation.code,\r\n                catalog: item.variation.catalog,\r\n                catalogVersion: item.variation.catalogVersion\r\n            });\r\n        });\r\n        this.combinedViewCommonsService.updatePreview(variations);\r\n        this.crossFrameEventService.publish(HIDE_TOOLBAR_ITEM_CONTEXT, COMBINED_VIEW_TOOLBAR_ITEM_KEY);\r\n    }\r\n};\r\nCombinedViewToolbarContextComponent = __decorate([\r\n    Component({\r\n        selector: 'combined-view-toolbar-context',\r\n        template: `<div *ngIf=\"visible\" class=\"pe-toolbar-item-context\"><span class=\"sap-icon--slim-arrow-right pe-toolbar-item-context__icon\"></span><div class=\"pe-toolbar-item-context__btn\"><div class=\"pe-toolbar-item-context__btn-txt\"><div title=\"{{title}}\" class=\"perso-wrap-ellipsis pe-toolbar-item-context__btn-title\">{{title}}</div><div title=\"{{subtitle}}\" class=\"perso-wrap-ellipsis pe-toolbar-item-context__btn-subtitle\">{{subtitle}}</div></div></div><div class=\"pe-toolbar-item-context__btn-hyicon\" (click)=\"clear()\"><span class=\"sap-icon--decline\"></span></div></div>`\r\n    }),\r\n    __metadata(\"design:paramtypes\", [CombinedViewCommonsService,\r\n        PersonalizationsmarteditContextService,\r\n        PersonalizationsmarteditContextUtils,\r\n        CrossFrameEventService])\r\n], CombinedViewToolbarContextComponent);\r\nexport { CombinedViewToolbarContextComponent };\r\n//# sourceMappingURL=CombinedViewToolbarContextComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types+lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationcommons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/src/combinedView/CombinedViewCommonsService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/src/service/PersonalizationsmarteditContextServiceOuter.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"CombinedViewToolbarContextComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/toolbarContext/CombinedViewToolbarContextComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmarteditcontainer/node_modules/.cache/rollup-plugin-typescript2/placeholder/toolbarContext/CombinedViewToolbarContextComponent.d.ts","writeByteOrderMark":false,"text":"import { OnInit, DoCheck } from '@angular/core';\r\nimport { PersonalizationsmarteditContextUtils } from 'personalizationcommons';\r\nimport { CombinedViewCommonsService } from 'personalizationsmarteditcontainer/combinedView/CombinedViewCommonsService';\r\nimport { PersonalizationsmarteditContextService } from 'personalizationsmarteditcontainer/service/PersonalizationsmarteditContextServiceOuter';\r\nimport { CrossFrameEventService } from 'smarteditcommons';\r\nexport declare class CombinedViewToolbarContextComponent implements OnInit, DoCheck {\r\n    private combinedViewCommonsService;\r\n    private personalizationsmarteditContextService;\r\n    private personalizationsmarteditContextUtils;\r\n    private crossFrameEventService;\r\n    visible: boolean;\r\n    title: string;\r\n    subtitle: string;\r\n    private selectedCustomization;\r\n    private oldSelectedCustomization;\r\n    private oldSelectedCustomizationEnabled;\r\n    constructor(combinedViewCommonsService: CombinedViewCommonsService, personalizationsmarteditContextService: PersonalizationsmarteditContextService, personalizationsmarteditContextUtils: PersonalizationsmarteditContextUtils, crossFrameEventService: CrossFrameEventService);\r\n    ngOnInit(): void;\r\n    ngDoCheck(): void;\r\n    clear(): void;\r\n}\r\n"}}
