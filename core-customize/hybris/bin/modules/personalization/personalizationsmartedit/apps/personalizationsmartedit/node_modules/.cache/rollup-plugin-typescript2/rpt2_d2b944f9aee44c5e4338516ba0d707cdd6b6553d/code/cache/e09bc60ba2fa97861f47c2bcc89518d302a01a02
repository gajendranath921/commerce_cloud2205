{"code":"import { __decorate, __metadata, __param } from \"tslib\";\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, Inject } from '@angular/core';\r\nimport { PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING } from 'personalizationcommons';\r\nimport { AbstractDecorator, CrossFrameEventService, OVERLAY_RERENDERED_EVENT, SeDecorator, YJQUERY_TOKEN } from 'smarteditcommons';\r\nimport { PersonalizationsmarteditContextService } from '../service';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"PersonalizationsmarteditCombinedViewComponentLightUpDecorator\", {\r\n    selector: 'personalizationsmartedit-combined-view-component-light-up',\r\n    template: `<div [ngClass]=\"classForElement\" class=\"pe-combined-view-component-letter\">{{ letterForElement }}</div><div><ng-content></ng-content></div>`,\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n});\r\nlet /* @ngInject */ PersonalizationsmarteditCombinedViewComponentLightUpDecorator = class /* @ngInject */ PersonalizationsmarteditCombinedViewComponentLightUpDecorator extends AbstractDecorator {\r\n    constructor(personalizationsmarteditContextService, crossFrameEventService, cdr, yjQuery, element) {\r\n        super();\r\n        this.personalizationsmarteditContextService = personalizationsmarteditContextService;\r\n        this.crossFrameEventService = crossFrameEventService;\r\n        this.cdr = cdr;\r\n        this.$element = yjQuery(element.nativeElement);\r\n        this.letterForElement = '';\r\n        this.classForElement = '';\r\n    }\r\n    ngOnInit() {\r\n        this.allBorderClassess = Object.values(PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING)\r\n            .map(({ borderClass }) => borderClass)\r\n            .join(' ');\r\n        this.unSubscribeRegOverlayRerender = this.crossFrameEventService.subscribe(OVERLAY_RERENDERED_EVENT, () => {\r\n            this.calculate();\r\n        });\r\n        this.calculate();\r\n    }\r\n    ngOnDestroy() {\r\n        this.unSubscribeRegOverlayRerender();\r\n    }\r\n    calculate() {\r\n        const combinedView = this.personalizationsmarteditContextService.getCombinedView();\r\n        if (!combinedView.enabled) {\r\n            return;\r\n        }\r\n        const container = this.$element\r\n            .parent()\r\n            .closest('[class~=\"smartEditComponentX\"][data-smartedit-container-source-id][data-smartedit-container-type=\"CxCmsComponentContainer\"][data-smartedit-personalization-customization-id][data-smartedit-personalization-variation-id]');\r\n        if (container.length === 0) {\r\n            return;\r\n        }\r\n        container.removeClass(this.allBorderClassess);\r\n        (combinedView.selectedItems || []).forEach((element, index) => {\r\n            let state = container.data().smarteditPersonalizationCustomizationId ===\r\n                element.customization.code;\r\n            state =\r\n                state &&\r\n                    container.data().smarteditPersonalizationVariationId === element.variation.code;\r\n            if (state) {\r\n                const wrappedIndex = index % Object.keys(PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING).length;\r\n                container.addClass(PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING[wrappedIndex].borderClass);\r\n                this.letterForElement = String.fromCharCode('a'.charCodeAt(0) + wrappedIndex).toUpperCase();\r\n                this.classForElement =\r\n                    PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING[wrappedIndex].listClass;\r\n                this.cdr.detectChanges();\r\n            }\r\n        });\r\n    }\r\n};\r\n/* @ngInject */ PersonalizationsmarteditCombinedViewComponentLightUpDecorator = __decorate([\r\n    SeDecorator(),\r\n    Component({\r\n        selector: 'personalizationsmartedit-combined-view-component-light-up',\r\n        template: `<div [ngClass]=\"classForElement\" class=\"pe-combined-view-component-letter\">{{ letterForElement }}</div><div><ng-content></ng-content></div>`,\r\n        changeDetection: ChangeDetectionStrategy.OnPush\r\n    }),\r\n    __param(3, Inject(YJQUERY_TOKEN)),\r\n    __metadata(\"design:paramtypes\", [PersonalizationsmarteditContextService,\r\n        CrossFrameEventService,\r\n        ChangeDetectorRef, Function, ElementRef])\r\n], /* @ngInject */ PersonalizationsmarteditCombinedViewComponentLightUpDecorator);\r\nexport { /* @ngInject */ PersonalizationsmarteditCombinedViewComponentLightUpDecorator };\r\n//# sourceMappingURL=CombinedViewComponentLightUpDecorator.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationcommons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmartedit/src/service/index.ts"],"map":"{\"version\":3,\"file\":\"CombinedViewComponentLightUpDecorator.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/combinedView/CombinedViewComponentLightUpDecorator.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmartedit/node_modules/.cache/rollup-plugin-typescript2/placeholder/combinedView/CombinedViewComponentLightUpDecorator.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, ElementRef, OnDestroy, OnInit } from '@angular/core';\r\nimport { AbstractDecorator, CrossFrameEventService } from 'smarteditcommons';\r\nimport { PersonalizationsmarteditContextService } from '../service';\r\nexport declare class PersonalizationsmarteditCombinedViewComponentLightUpDecorator extends AbstractDecorator implements OnInit, OnDestroy {\r\n    private personalizationsmarteditContextService;\r\n    private crossFrameEventService;\r\n    private cdr;\r\n    letterForElement: string;\r\n    classForElement: string;\r\n    private $element;\r\n    private allBorderClassess;\r\n    private unSubscribeRegOverlayRerender;\r\n    constructor(personalizationsmarteditContextService: PersonalizationsmarteditContextService, crossFrameEventService: CrossFrameEventService, cdr: ChangeDetectorRef, yjQuery: JQueryStatic, element: ElementRef);\r\n    ngOnInit(): void;\r\n    ngOnDestroy(): void;\r\n    private calculate;\r\n}\r\n"}}
