{"code":"import { __decorate, __metadata, __param } from \"tslib\";\r\nimport { ChangeDetectorRef, Component, Inject } from '@angular/core';\r\nimport { CrossFrameEventService, EVENT_OUTER_FRAME_CLICKED, CONTEXTUAL_MENU_ITEM_DATA } from 'smarteditcommons';\r\nimport { PersonalizationsmarteditComponentHandlerService } from '../service';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"SharedSlotComponent\", {\r\n    selector: 'perso-shared-slot',\r\n    template: `<div class=\"se-decorative-panel-wrapper\"><div class=\"cmsx-ctx-wrapper1 se-slot-contextual-menu-level1\"><div class=\"cmsx-ctx-wrapper2 se-slot-contextual-menu-level2\"><div *ngIf=\"slotSharedFlag\"><div class=\"se-decorator-panel-padding-center\"></div><div class=\"se-decorative-panel-slot-contextual-menu\"><div class=\"se-shared-slot-button-template\" *ngIf=\"slotSharedFlag\"><se-popup-overlay [popupOverlay]=\"popupConfig\" [popupOverlayTrigger]=\"isPopupOpened\" (popupOverlayOnHide)=\"hidePopup()\"><button type=\"button\" class=\"se-slot-ctx-menu__dropdown-toggle sap-icon--chain-link se-slot-ctx-menu__dropdown-toggle-icon\" [ngClass]=\"{'se-slot-ctx-menu__dropdown-toggle--open': isPopupOpened}\" id=\"sharedSlotButton-{{ slotId }}\" (click)=\"onButtonClick()\"></button><div class=\"se-slot__dropdown-menu\" se-popup-overlay-body><div class=\"se-shared-slot__body\"><div class=\"se-shared-slot__description\" translate=\"personalization.slot.shared.popover.message\"></div></div></div></se-popup-overlay></div></div></div></div></div></div>`\r\n});\r\nlet SharedSlotComponent = class SharedSlotComponent {\r\n    constructor(contextualMenuItem, persoComponentHandlerService, crossFrameEventService, cdr) {\r\n        this.contextualMenuItem = contextualMenuItem;\r\n        this.persoComponentHandlerService = persoComponentHandlerService;\r\n        this.crossFrameEventService = crossFrameEventService;\r\n        this.cdr = cdr;\r\n        this.popupConfig = {\r\n            halign: 'left',\r\n            valign: 'bottom',\r\n            additionalClasses: [\r\n                'se-slot-ctx-menu__divider',\r\n                'se-slot-ctx-menu__dropdown-toggle-wrapper'\r\n            ]\r\n        };\r\n        this.buttonName = 'SharedSlotButton';\r\n        this.isPopupOpened = false;\r\n        this.isPopupOpenedPreviousValue = false;\r\n    }\r\n    ngOnInit() {\r\n        this.slotSharedFlag = false;\r\n        this.persoComponentHandlerService.isSlotShared(this.slotId).then((result) => {\r\n            this.slotSharedFlag = result;\r\n        });\r\n        this.unRegOuterFrameClicked = this.crossFrameEventService.subscribe(EVENT_OUTER_FRAME_CLICKED, () => {\r\n            this.isPopupOpened = false;\r\n        });\r\n        this.cdr.detectChanges();\r\n    }\r\n    ngOnChanges(changes) {\r\n        if (changes.active && changes.active.currentValue) {\r\n            this.isPopupOpened = false;\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.unRegOuterFrameClicked) {\r\n            this.unRegOuterFrameClicked();\r\n        }\r\n    }\r\n    ngDoCheck() {\r\n        if (this.isPopupOpenedPreviousValue !== this.isPopupOpened) {\r\n            this.contextualMenuItem.setRemainOpen(this.buttonName, this.isPopupOpened);\r\n            this.isPopupOpenedPreviousValue = this.isPopupOpened;\r\n        }\r\n    }\r\n    onButtonClick() {\r\n        this.isPopupOpened = !this.isPopupOpened;\r\n    }\r\n    hidePopup() {\r\n        this.isPopupOpened = false;\r\n    }\r\n    get componentAttributes() {\r\n        return this.contextualMenuItem.componentAttributes;\r\n    }\r\n    get slotId() {\r\n        return this.componentAttributes.smarteditComponentId;\r\n    }\r\n};\r\nSharedSlotComponent = __decorate([\r\n    Component({\r\n        selector: 'perso-shared-slot',\r\n        template: `<div class=\"se-decorative-panel-wrapper\"><div class=\"cmsx-ctx-wrapper1 se-slot-contextual-menu-level1\"><div class=\"cmsx-ctx-wrapper2 se-slot-contextual-menu-level2\"><div *ngIf=\"slotSharedFlag\"><div class=\"se-decorator-panel-padding-center\"></div><div class=\"se-decorative-panel-slot-contextual-menu\"><div class=\"se-shared-slot-button-template\" *ngIf=\"slotSharedFlag\"><se-popup-overlay [popupOverlay]=\"popupConfig\" [popupOverlayTrigger]=\"isPopupOpened\" (popupOverlayOnHide)=\"hidePopup()\"><button type=\"button\" class=\"se-slot-ctx-menu__dropdown-toggle sap-icon--chain-link se-slot-ctx-menu__dropdown-toggle-icon\" [ngClass]=\"{'se-slot-ctx-menu__dropdown-toggle--open': isPopupOpened}\" id=\"sharedSlotButton-{{ slotId }}\" (click)=\"onButtonClick()\"></button><div class=\"se-slot__dropdown-menu\" se-popup-overlay-body><div class=\"se-shared-slot__body\"><div class=\"se-shared-slot__description\" translate=\"personalization.slot.shared.popover.message\"></div></div></div></se-popup-overlay></div></div></div></div></div></div>`\r\n    }),\r\n    __param(0, Inject(CONTEXTUAL_MENU_ITEM_DATA)),\r\n    __metadata(\"design:paramtypes\", [Object, PersonalizationsmarteditComponentHandlerService,\r\n        CrossFrameEventService,\r\n        ChangeDetectorRef])\r\n], SharedSlotComponent);\r\nexport { SharedSlotComponent };\r\n//# sourceMappingURL=SharedSlotComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmartedit/src/service/index.ts"],"map":"{\"version\":3,\"file\":\"SharedSlotComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/sharedSlotDecorator/SharedSlotComponent.ts\"],\"names\":[],\"mappings\":\";AAEA,OAAO,EACH,iBAAiB,EACjB,SAAS,EACT,MAAM,EAMT,MAAM,eAAe,CAAC;AACvB,OAAO,EAEH,sBAAsB,EACtB,yBAAyB,EAEzB,yBAAyB,EAE5B,MAAM,kBAAkB,CAAC;AAC1B,OAAO,EAAE,+CAA+C,EAAE,MAAM,YAAY,CAAC;6EAClE;IACP,QAAQ,EAAE,mBAAmB;IAC7B,QAAQ,EAAE,w/BAAw/B;CACrgC;AACD,IAAa,mBAAmB,GAAhC,MAAa,mBAAmB;IAS5B,YAC+C,kBAA0C,EAC7E,4BAA6E,EAC7E,sBAA8C,EAC9C,GAAsB;QAHa,uBAAkB,GAAlB,kBAAkB,CAAwB;QAC7E,iCAA4B,GAA5B,4BAA4B,CAAiD;QAC7E,2BAAsB,GAAtB,sBAAsB,CAAwB;QAC9C,QAAG,GAAH,GAAG,CAAmB;QAE9B,IAAI,CAAC,WAAW,GAAG;YACf,MAAM,EAAE,MAAM;YACd,MAAM,EAAE,QAAQ;YAChB,iBAAiB,EAAE;gBACf,2BAA2B;gBAC3B,2CAA2C;aAC9C;SACJ,CAAC;QACF,IAAI,CAAC,UAAU,GAAG,kBAAkB,CAAC;QACrC,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,0BAA0B,GAAG,KAAK,CAAC;IAC5C,CAAC;IACD,QAAQ;QACJ,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,4BAA4B,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,MAAW,EAAE,EAAE;YAC7E,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC;QACjC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,sBAAsB,CAAC,SAAS,CAC/D,yBAAyB,EACzB,GAAG,EAAE;YACD,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC/B,CAAC,CACJ,CAAC;QACF,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;IAC7B,CAAC;IAED,WAAW,CAAC,OAAsB;QAC9B,IAAI,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC,YAAY,EAAE;YAC/C,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;SAC9B;IACL,CAAC;IAED,WAAW;QACP,IAAI,IAAI,CAAC,sBAAsB,EAAE;YAC7B,IAAI,CAAC,sBAAsB,EAAE,CAAC;SACjC;IACL,CAAC;IAED,SAAS;QACL,IAAI,IAAI,CAAC,0BAA0B,KAAK,IAAI,CAAC,aAAa,EAAE;YAExD,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAC3E,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC,aAAa,CAAC;SACxD;IACL,CAAC;IAEM,aAAa;QAChB,IAAI,CAAC,aAAa,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC;IAC7C,CAAC;IAEM,SAAS;QACZ,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;IAC/B,CAAC;IAED,IAAI,mBAAmB;QACnB,OAAO,IAAI,CAAC,kBAAkB,CAAC,mBAAmB,CAAC;IACvD,CAAC;IAED,IAAI,MAAM;QACN,OAAO,IAAI,CAAC,mBAAmB,CAAC,oBAAoB,CAAC;IACzD,CAAC;CACJ,CAAA;AA5EY,mBAAmB;IAJ/B,SAAS,CAAC;QACP,QAAQ,EAAE,mBAAmB;QAC7B,QAAQ,EAAE,w/BAAw/B;KACrgC,CAAC;IAWO,WAAA,MAAM,CAAC,yBAAyB,CAAC,CAAA;6CACI,+CAA+C;QACrD,sBAAsB;QACzC,iBAAiB;GAbzB,mBAAmB,CA4E/B;SA5EY,mBAAmB\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmartedit/node_modules/.cache/rollup-plugin-typescript2/placeholder/sharedSlotDecorator/SharedSlotComponent.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, OnInit, OnChanges, OnDestroy, SimpleChanges, DoCheck } from '@angular/core';\r\nimport { PopupOverlayConfig, CrossFrameEventService, ContextualMenuItemData, ComponentAttributes } from 'smarteditcommons';\r\nimport { PersonalizationsmarteditComponentHandlerService } from '../service';\r\nexport declare class SharedSlotComponent implements OnInit, OnChanges, OnDestroy, DoCheck {\r\n    private contextualMenuItem;\r\n    private persoComponentHandlerService;\r\n    private crossFrameEventService;\r\n    private cdr;\r\n    smarteditComponentId: string;\r\n    isPopupOpened: boolean;\r\n    slotSharedFlag: boolean;\r\n    popupConfig: PopupOverlayConfig;\r\n    private unRegOuterFrameClicked;\r\n    private isPopupOpenedPreviousValue;\r\n    private readonly buttonName;\r\n    constructor(contextualMenuItem: ContextualMenuItemData, persoComponentHandlerService: PersonalizationsmarteditComponentHandlerService, crossFrameEventService: CrossFrameEventService, cdr: ChangeDetectorRef);\r\n    ngOnInit(): void;\r\n    ngOnChanges(changes: SimpleChanges): void;\r\n    ngOnDestroy(): void;\r\n    ngDoCheck(): void;\r\n    onButtonClick(): void;\r\n    hidePopup(): void;\r\n    get componentAttributes(): ComponentAttributes;\r\n    get slotId(): string;\r\n}\r\n"}}
