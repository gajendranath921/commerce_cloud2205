{"code":"var /* @ngInject */ PersonalizationsmarteditContextualMenuService_1;\r\nimport { __awaiter, __decorate, __metadata } from \"tslib\";\r\nimport { isString, isObject, isArray, isUndefined, map } from 'lodash';\r\nimport { IPersonalizationsmarteditContextMenuServiceProxy, PersonalizationsmarteditUtils } from 'personalizationcommons';\r\nimport { PersonalizationsmarteditComponentHandlerService } from 'personalizationsmartedit/service/PersonalizationsmarteditComponentHandlerService';\r\nimport { PersonalizationsmarteditContextService } from 'personalizationsmartedit/service/PersonalizationsmarteditContextServiceInner';\r\nimport { CrossFrameEventService, EVENTS, SeDowngradeService } from 'smarteditcommons';\r\nlet /* @ngInject */ PersonalizationsmarteditContextualMenuService = /* @ngInject */ PersonalizationsmarteditContextualMenuService_1 = class /* @ngInject */ PersonalizationsmarteditContextualMenuService {\r\n    constructor(personalizationsmarteditContextService, personalizationsmarteditComponentHandlerService, personalizationsmarteditUtils, personalizationsmarteditContextMenuServiceProxy, crossFrameEventService) {\r\n        this.personalizationsmarteditContextService = personalizationsmarteditContextService;\r\n        this.personalizationsmarteditComponentHandlerService = personalizationsmarteditComponentHandlerService;\r\n        this.personalizationsmarteditUtils = personalizationsmarteditUtils;\r\n        this.personalizationsmarteditContextMenuServiceProxy = personalizationsmarteditContextMenuServiceProxy;\r\n        this.crossFrameEventService = crossFrameEventService;\r\n        this.isWorkflowRunningBoolean = false;\r\n        this.init();\r\n    }\r\n    updateWorkflowStatus() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.isWorkflowRunningBoolean = yield this.personalizationsmarteditContextService.isCurrentPageActiveWorkflowRunning();\r\n        });\r\n    }\r\n    openDeleteAction(config) {\r\n        const configProperties = isString(config.componentAttributes)\r\n            ? JSON.parse(config.componentAttributes)\r\n            : config.componentAttributes;\r\n        const configurationToPass = {};\r\n        configurationToPass.containerId = config.containerId;\r\n        configurationToPass.containerSourceId = configProperties.smarteditContainerSourceId;\r\n        configurationToPass.slotId = config.slotId;\r\n        configurationToPass.actionId = configProperties.smarteditPersonalizationActionId || null;\r\n        configurationToPass.selectedVariationCode =\r\n            configProperties.smarteditPersonalizationVariationId || null;\r\n        configurationToPass.selectedCustomizationCode =\r\n            configProperties.smarteditPersonalizationCustomizationId || null;\r\n        const componentCatalog = configProperties.smarteditCatalogVersionUuid.split('/');\r\n        configurationToPass.componentCatalog = componentCatalog[0];\r\n        configurationToPass.componentCatalogVersion = componentCatalog[1];\r\n        const contextCustomization = this.getSelectedCustomization(configurationToPass.selectedCustomizationCode);\r\n        configurationToPass.catalog = contextCustomization.catalog;\r\n        configurationToPass.catalogVersion = contextCustomization.catalogVersion;\r\n        configurationToPass.slotsToRefresh = this.getSlotsToRefresh(configProperties.smarteditContainerSourceId);\r\n        this.personalizationsmarteditContextMenuServiceProxy.openDeleteAction(configurationToPass);\r\n    }\r\n    openAddAction(config) {\r\n        const configProperties = isString(config.componentAttributes)\r\n            ? JSON.parse(config.componentAttributes)\r\n            : config.componentAttributes;\r\n        const configurationToPass = {};\r\n        configurationToPass.componentType = config.componentType;\r\n        configurationToPass.componentId = config.componentId;\r\n        configurationToPass.containerId = config.containerId;\r\n        configurationToPass.containerSourceId = configProperties.smarteditContainerSourceId;\r\n        configurationToPass.slotId = config.slotId;\r\n        configurationToPass.actionId = configProperties.smarteditPersonalizationActionId || null;\r\n        configurationToPass.selectedVariationCode = this.getSelectedVariationCode();\r\n        const componentCatalog = configProperties.smarteditCatalogVersionUuid.split('/');\r\n        configurationToPass.componentCatalog = componentCatalog[0];\r\n        const contextCustomization = this.getSelectedCustomization();\r\n        configurationToPass.catalog = contextCustomization.catalog;\r\n        configurationToPass.selectedCustomizationCode = contextCustomization.code;\r\n        const slot = this.personalizationsmarteditComponentHandlerService.getParentSlotForComponent(config.element);\r\n        const slotCatalog = this.personalizationsmarteditComponentHandlerService\r\n            .getCatalogVersionUuid(slot)\r\n            .split('/');\r\n        configurationToPass.slotCatalog = slotCatalog[0];\r\n        configurationToPass.slotsToRefresh = this.getSlotsToRefresh(configProperties.smarteditContainerSourceId);\r\n        configurationToPass.slotsToRefresh.push(config.slotId);\r\n        return this.personalizationsmarteditContextMenuServiceProxy.openAddAction(configurationToPass);\r\n    }\r\n    openEditAction(config) {\r\n        const configProperties = isString(config.componentAttributes)\r\n            ? JSON.parse(config.componentAttributes)\r\n            : config.componentAttributes;\r\n        const configurationToPass = {};\r\n        configurationToPass.componentType = config.componentType;\r\n        configurationToPass.componentId = config.componentId;\r\n        configurationToPass.containerId = config.containerId;\r\n        configurationToPass.containerSourceId = configProperties.smarteditContainerSourceId;\r\n        configurationToPass.slotId = config.slotId;\r\n        configurationToPass.actionId = configProperties.smarteditPersonalizationActionId || null;\r\n        configurationToPass.selectedVariationCode =\r\n            configProperties.smarteditPersonalizationVariationId || null;\r\n        configurationToPass.selectedCustomizationCode =\r\n            configProperties.smarteditPersonalizationCustomizationId || null;\r\n        configurationToPass.componentUuid = configProperties.smarteditComponentUuid || null;\r\n        configurationToPass.slotsToRefresh = this.getSlotsToRefresh(configProperties.smarteditContainerSourceId);\r\n        return this.personalizationsmarteditContextMenuServiceProxy.openEditAction(configurationToPass);\r\n    }\r\n    openEditComponentAction(config) {\r\n        const configProperties = isString(config.componentAttributes)\r\n            ? JSON.parse(config.componentAttributes)\r\n            : config.componentAttributes;\r\n        const configurationToPass = {};\r\n        configurationToPass.smarteditComponentType = configProperties.smarteditComponentType;\r\n        configurationToPass.smarteditComponentUuid = configProperties.smarteditComponentUuid;\r\n        configurationToPass.smarteditCatalogVersionUuid =\r\n            configProperties.smarteditCatalogVersionUuid;\r\n        return this.personalizationsmarteditContextMenuServiceProxy.openEditComponentAction(configurationToPass);\r\n    }\r\n    isCustomizationFromCurrentCatalog(config) {\r\n        const items = this.contextCombinedView.selectedItems || [];\r\n        const foundItems = items.filter((item) => item.customization.code ===\r\n            config.componentAttributes.smarteditPersonalizationCustomizationId &&\r\n            item.variation.code ===\r\n                config.componentAttributes.smarteditPersonalizationVariationId);\r\n        const foundItem = foundItems.shift();\r\n        if (foundItem) {\r\n            return this.personalizationsmarteditUtils.isItemFromCurrentCatalog(foundItem.customization, this.personalizationsmarteditContextService.getSeData());\r\n        }\r\n        return false;\r\n    }\r\n    isPersonalizationAllowedInWorkflow() {\r\n        this.refreshContext();\r\n        return this.isEditPersonalizationInWorkflowAllowed(this.contextPersonalization.enabled);\r\n    }\r\n    isContextualMenuAddItemEnabled(config) {\r\n        this.refreshContext();\r\n        let isEnabled = this.isContextualMenuEnabled();\r\n        isEnabled = isEnabled && !this.isElementHighlighted(config);\r\n        isEnabled = isEnabled && this.isSlotInCurrentCatalog(config);\r\n        isEnabled = isEnabled && this.isSelectedCustomizationFromCurrentCatalog();\r\n        return this.isEditPersonalizationInWorkflowAllowed(isEnabled);\r\n    }\r\n    isContextualMenuEditItemEnabled(config) {\r\n        this.refreshContext();\r\n        let isEnabled = this.contextPersonalization.enabled;\r\n        isEnabled =\r\n            isEnabled && !isUndefined(config.componentAttributes.smarteditPersonalizationActionId);\r\n        isEnabled = isEnabled && this.isSlotInCurrentCatalog(config);\r\n        isEnabled =\r\n            isEnabled &&\r\n                (this.isSelectedCustomizationFromCurrentCatalog() ||\r\n                    this.isCustomizationFromCurrentCatalog(config));\r\n        return this.isEditPersonalizationInWorkflowAllowed(isEnabled);\r\n    }\r\n    isContextualMenuDeleteItemEnabled(config) {\r\n        return this.isContextualMenuEditItemEnabled(config);\r\n    }\r\n    isContextualMenuShowActionListEnabled(config) {\r\n        this.refreshContext();\r\n        let isEnabled = !isUndefined(config.componentAttributes.smarteditPersonalizationActionId);\r\n        isEnabled = isEnabled && this.contextCombinedView.enabled;\r\n        isEnabled = isEnabled && !this.contextCombinedView.customize.selectedCustomization;\r\n        return isEnabled;\r\n    }\r\n    isContextualMenuInfoEnabled() {\r\n        this.refreshContext();\r\n        let isEnabled = this.contextPersonalization.enabled;\r\n        isEnabled = isEnabled && !isObject(this.contextCustomize.selectedVariations);\r\n        isEnabled = isEnabled || isArray(this.contextCustomize.selectedVariations);\r\n        isEnabled = isEnabled && !this.contextCombinedView.enabled;\r\n        return isEnabled;\r\n    }\r\n    isContextualMenuInfoItemEnabled() {\r\n        const isEnabled = this.isContextualMenuInfoEnabled();\r\n        return (isEnabled ||\r\n            !this.isEditPersonalizationInWorkflowAllowed(this.contextPersonalization.enabled));\r\n    }\r\n    isContextualMenuEditComponentItemEnabled(config) {\r\n        this.refreshContext();\r\n        let isEnabled = this.contextPersonalization.enabled;\r\n        isEnabled =\r\n            isEnabled &&\r\n                !this.contextCombinedView.enabled &&\r\n                this.isComponentInCurrentCatalog(config);\r\n        return isEnabled;\r\n    }\r\n    isEditPersonalizationInWorkflowAllowed(condition) {\r\n        const seConfigurationData = this.personalizationsmarteditContextService.getSeData().seConfigurationData || [];\r\n        const isEditPersonalizationInWorkflowPropertyEnabled = seConfigurationData[/* @ngInject */ PersonalizationsmarteditContextualMenuService_1.EDIT_PERSONALIZATION_IN_WORKFLOW] === true;\r\n        if (isEditPersonalizationInWorkflowPropertyEnabled) {\r\n            return condition;\r\n        }\r\n        else {\r\n            return condition && !this.isWorkflowRunningBoolean;\r\n        }\r\n    }\r\n    isCustomizeObjectValid(customize) {\r\n        return (isObject(customize.selectedCustomization) &&\r\n            isObject(customize.selectedVariations) &&\r\n            !isArray(customize.selectedVariations));\r\n    }\r\n    isContextualMenuEnabled() {\r\n        return (this.isCustomizeObjectValid(this.contextCustomize) ||\r\n            (this.contextCombinedView.enabled &&\r\n                this.isCustomizeObjectValid(this.contextCombinedView.customize)));\r\n    }\r\n    isElementHighlighted(config) {\r\n        if (this.contextCombinedView.enabled) {\r\n            return this.contextCombinedView.customize.selectedComponents.includes(config.componentAttributes.smarteditContainerSourceId);\r\n        }\r\n        else {\r\n            return this.contextCustomize.selectedComponents.includes(config.componentAttributes.smarteditContainerSourceId);\r\n        }\r\n    }\r\n    isSlotInCurrentCatalog(config) {\r\n        const slot = this.personalizationsmarteditComponentHandlerService.getParentSlotForComponent(config.element);\r\n        const catalogUuid = this.personalizationsmarteditComponentHandlerService.getCatalogVersionUuid(slot);\r\n        const experienceCV = this.contextSeData.seExperienceData.catalogDescriptor\r\n            .catalogVersionUuid;\r\n        return experienceCV === catalogUuid;\r\n    }\r\n    isComponentInCurrentCatalog(config) {\r\n        const experienceCV = this.contextSeData.seExperienceData.catalogDescriptor\r\n            .catalogVersionUuid;\r\n        const componentCV = config.componentAttributes.smarteditCatalogVersionUuid;\r\n        return experienceCV === componentCV;\r\n    }\r\n    isSelectedCustomizationFromCurrentCatalog() {\r\n        const customization = this.contextCustomize.selectedCustomization ||\r\n            this.contextCombinedView.customize.selectedCustomization;\r\n        if (customization) {\r\n            return this.personalizationsmarteditUtils.isItemFromCurrentCatalog(customization, this.personalizationsmarteditContextService.getSeData());\r\n        }\r\n        return false;\r\n    }\r\n    init() {\r\n        this.crossFrameEventService.subscribe(EVENTS.PAGE_CHANGE, () => {\r\n            this.updateWorkflowStatus();\r\n        });\r\n        this.crossFrameEventService.subscribe(EVENTS.PAGE_UPDATED, () => {\r\n            this.updateWorkflowStatus();\r\n        });\r\n    }\r\n    refreshContext() {\r\n        this.contextPersonalization = this.personalizationsmarteditContextService.getPersonalization();\r\n        this.contextCustomize = this.personalizationsmarteditContextService.getCustomize();\r\n        this.contextCombinedView = this.personalizationsmarteditContextService.getCombinedView();\r\n        this.contextSeData = this.personalizationsmarteditContextService.getSeData();\r\n    }\r\n    getSelectedVariationCode() {\r\n        if (this.personalizationsmarteditContextService.getCombinedView().enabled) {\r\n            return this.personalizationsmarteditContextService.getCombinedView().customize\r\n                .selectedVariations.code;\r\n        }\r\n        return this.personalizationsmarteditContextService.getCustomize()\r\n            .selectedVariations.code;\r\n    }\r\n    // return type should be Customization but it's in container\r\n    getSelectedCustomization(customizationCode) {\r\n        if (this.personalizationsmarteditContextService.getCombinedView().enabled) {\r\n            let customization = this.personalizationsmarteditContextService.getCombinedView()\r\n                .customize.selectedCustomization;\r\n            if (!customization && customizationCode) {\r\n                customization = this.personalizationsmarteditContextService\r\n                    .getCombinedView()\r\n                    .selectedItems.filter((elem) => elem.customization.code === customizationCode)[0].customization;\r\n            }\r\n            return customization;\r\n        }\r\n        return this.personalizationsmarteditContextService.getCustomize().selectedCustomization;\r\n    }\r\n    getSlotsToRefresh(containerSourceId) {\r\n        let slotsSelector = this.personalizationsmarteditComponentHandlerService.getAllSlotsSelector();\r\n        slotsSelector += ' [data-smartedit-container-source-id=\"' + containerSourceId + '\"]'; // space at beginning is important\r\n        const slots = this.personalizationsmarteditComponentHandlerService.getFromSelector(slotsSelector);\r\n        const slotIds = Array.prototype.slice.call(map(slots, (el) => this.personalizationsmarteditComponentHandlerService.getParentSlotIdForComponent(this.personalizationsmarteditComponentHandlerService.getFromSelector(el))));\r\n        return slotIds;\r\n    }\r\n};\r\n/* @ngInject */ PersonalizationsmarteditContextualMenuService.EDIT_PERSONALIZATION_IN_WORKFLOW = 'personalizationsmartedit.editPersonalizationInWorkflow.enabled';\r\n/* @ngInject */ PersonalizationsmarteditContextualMenuService = /* @ngInject */ PersonalizationsmarteditContextualMenuService_1 = __decorate([\r\n    SeDowngradeService(),\r\n    __metadata(\"design:paramtypes\", [PersonalizationsmarteditContextService,\r\n        PersonalizationsmarteditComponentHandlerService,\r\n        PersonalizationsmarteditUtils,\r\n        IPersonalizationsmarteditContextMenuServiceProxy,\r\n        CrossFrameEventService])\r\n], /* @ngInject */ PersonalizationsmarteditContextualMenuService);\r\nexport { /* @ngInject */ PersonalizationsmarteditContextualMenuService };\r\n//# sourceMappingURL=PersonalizationsmarteditContextualMenuService.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types+lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationcommons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmartedit/src/service/PersonalizationsmarteditComponentHandlerService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmartedit/src/service/PersonalizationsmarteditContextServiceInner.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"PersonalizationsmarteditContextualMenuService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/service/PersonalizationsmarteditContextualMenuService.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationsmartedit/node_modules/.cache/rollup-plugin-typescript2/placeholder/service/PersonalizationsmarteditContextualMenuService.d.ts","writeByteOrderMark":false,"text":"import { IPersonalizationsmarteditContextMenuServiceProxy, PersonalizationsmarteditUtils, ContextMenuDto, Personalization, Customize, CombinedView, SeData } from 'personalizationcommons';\r\nimport { PersonalizationsmarteditComponentHandlerService } from 'personalizationsmartedit/service/PersonalizationsmarteditComponentHandlerService';\r\nimport { PersonalizationsmarteditContextService } from 'personalizationsmartedit/service/PersonalizationsmarteditContextServiceInner';\r\nimport { CrossFrameEventService } from 'smarteditcommons';\r\nexport declare class PersonalizationsmarteditContextualMenuService {\r\n    protected personalizationsmarteditContextService: PersonalizationsmarteditContextService;\r\n    protected personalizationsmarteditComponentHandlerService: PersonalizationsmarteditComponentHandlerService;\r\n    protected personalizationsmarteditUtils: PersonalizationsmarteditUtils;\r\n    protected personalizationsmarteditContextMenuServiceProxy: IPersonalizationsmarteditContextMenuServiceProxy;\r\n    protected crossFrameEventService: CrossFrameEventService;\r\n    static readonly EDIT_PERSONALIZATION_IN_WORKFLOW = \"personalizationsmartedit.editPersonalizationInWorkflow.enabled\";\r\n    contextPersonalization: Personalization;\r\n    contextCustomize: Customize;\r\n    contextCombinedView: CombinedView;\r\n    contextSeData: SeData;\r\n    private isWorkflowRunningBoolean;\r\n    constructor(personalizationsmarteditContextService: PersonalizationsmarteditContextService, personalizationsmarteditComponentHandlerService: PersonalizationsmarteditComponentHandlerService, personalizationsmarteditUtils: PersonalizationsmarteditUtils, personalizationsmarteditContextMenuServiceProxy: IPersonalizationsmarteditContextMenuServiceProxy, crossFrameEventService: CrossFrameEventService);\r\n    updateWorkflowStatus(): Promise<void>;\r\n    openDeleteAction(config: ContextMenuDto): void;\r\n    openAddAction(config: ContextMenuDto): void;\r\n    openEditAction(config: ContextMenuDto): void;\r\n    openEditComponentAction(config: ContextMenuDto): void;\r\n    isCustomizationFromCurrentCatalog(config: ContextMenuDto): boolean;\r\n    isPersonalizationAllowedInWorkflow(): boolean;\r\n    isContextualMenuAddItemEnabled(config: ContextMenuDto): boolean;\r\n    isContextualMenuEditItemEnabled(config: ContextMenuDto): boolean;\r\n    isContextualMenuDeleteItemEnabled(config: ContextMenuDto): boolean;\r\n    isContextualMenuShowActionListEnabled(config: any): boolean;\r\n    isContextualMenuInfoEnabled(): boolean;\r\n    isContextualMenuInfoItemEnabled(): boolean;\r\n    isContextualMenuEditComponentItemEnabled(config: ContextMenuDto): boolean;\r\n    private isEditPersonalizationInWorkflowAllowed;\r\n    private isCustomizeObjectValid;\r\n    private isContextualMenuEnabled;\r\n    private isElementHighlighted;\r\n    private isSlotInCurrentCatalog;\r\n    private isComponentInCurrentCatalog;\r\n    private isSelectedCustomizationFromCurrentCatalog;\r\n    private init;\r\n    private refreshContext;\r\n    private getSelectedVariationCode;\r\n    private getSelectedCustomization;\r\n    private getSlotsToRefresh;\r\n}\r\n"}}
