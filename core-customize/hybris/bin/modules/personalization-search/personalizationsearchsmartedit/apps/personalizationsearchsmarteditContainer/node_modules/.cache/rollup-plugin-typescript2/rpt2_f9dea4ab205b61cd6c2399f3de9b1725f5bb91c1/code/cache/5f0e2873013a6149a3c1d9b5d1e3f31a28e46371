{"code":"import { __decorate } from \"tslib\";\r\n/*\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n *\r\n * This software is the confidential and proprietary information of SAP\r\n * (\"Confidential Information\"). You shall not disclose such Confidential\r\n * Information and shall use it only in accordance with the terms of the\r\n * license agreement you entered into with SAP.\r\n */\r\nimport { DragDropModule } from \"@angular/cdk/drag-drop\";\r\nimport { NgModule } from \"@angular/core\";\r\nimport { BrowserModule } from \"@angular/platform-browser\";\r\nimport { PopoverModule } from \"@fundamental-ngx/core\";\r\nimport { TranslateService } from \"@ngx-translate/core\";\r\nimport { PersonalizationsmarteditCommerceCustomizationService, PersonalizationsmarteditCommonsComponentsModule, PersonalizationsmarteditMessageHandler, PERSONLIZATION_SEARCH_EXTENSION_TOKEN, } from \"personalizationcommons\";\r\nimport { SearchProfilesSmarteditComponent } from \"personalizationsearchsmarteditcontainer/searchSmarteditComponent/SearchProfilesSmarteditComponent\";\r\nimport { SearchProfilesContextService, SearchRestService, } from \"personalizationsearchsmarteditcontainer/service\";\r\nimport { SEARCH_PROFILE_ACTION_TYPE } from \"personalizationsearchsmarteditcontainer/utils/constants\";\r\nimport { SeEntryModule, promiseUtils, moduleUtils, TranslationModule, SelectModule, SharedComponentsModule, } from \"smarteditcommons\";\r\nimport \"../../styling/style.less\";\r\nlet PersonalizationsearchSmarteditContainerModule = class PersonalizationsearchSmarteditContainerModule {\r\n};\r\nPersonalizationsearchSmarteditContainerModule = __decorate([\r\n    SeEntryModule(\"personalizationsearchsmarteditContainer\"),\r\n    NgModule({\r\n        imports: [\r\n            TranslationModule.forChild(),\r\n            SelectModule,\r\n            PopoverModule,\r\n            BrowserModule,\r\n            SharedComponentsModule,\r\n            DragDropModule,\r\n            PersonalizationsmarteditCommonsComponentsModule,\r\n        ],\r\n        declarations: [SearchProfilesSmarteditComponent],\r\n        entryComponents: [SearchProfilesSmarteditComponent],\r\n        exports: [],\r\n        providers: [\r\n            SearchProfilesContextService,\r\n            SearchRestService,\r\n            {\r\n                provide: PERSONLIZATION_SEARCH_EXTENSION_TOKEN,\r\n                useValue: {\r\n                    component: SearchProfilesSmarteditComponent,\r\n                },\r\n            },\r\n            moduleUtils.bootstrap((translateService, searchProfilesContextService, searchRestService, personalizationsmarteditMessageHandler, personalizationsmarteditCommerceCustomizationService) => {\r\n                personalizationsmarteditCommerceCustomizationService.registerType({\r\n                    type: SEARCH_PROFILE_ACTION_TYPE,\r\n                    text: \"personalizationsearchsmartedit.commercecustomization.action.type.search\",\r\n                    confProperty: \"personalizationsearch.commercecustomization.search.profile.enabled\",\r\n                    getName: (action) => translateService.instant(\"personalizationsearchsmartedit.commercecustomization.search.display.name\") +\r\n                        \" - \" +\r\n                        action.searchProfileCode,\r\n                    updateActions(customizationCode, variationCode, actions, respCreate) {\r\n                        const deferred = promiseUtils.defer();\r\n                        if (respCreate !== undefined) {\r\n                            searchProfilesContextService.updateSearchActionContext(respCreate.actions);\r\n                        }\r\n                        const searchProfilesCtx = searchProfilesContextService.searchProfileActionContext;\r\n                        const rankAfterAction = searchProfilesCtx.searchProfilesOrder.splice(0, 1)[0];\r\n                        const spActionCodes = searchProfilesCtx.searchProfilesOrder\r\n                            .map(function (sp) {\r\n                            return sp.code;\r\n                        })\r\n                            .join(\",\");\r\n                        const filter = {\r\n                            customizationCode: searchProfilesCtx.customizationCode,\r\n                            variationCode: searchProfilesCtx.variationCode,\r\n                            rankAfterAction: rankAfterAction.code,\r\n                            actions: spActionCodes,\r\n                        };\r\n                        searchRestService.updateSearchProfileActionRank(filter).then(function successCallback() {\r\n                            deferred.resolve();\r\n                        }, function errorCallback() {\r\n                            personalizationsmarteditMessageHandler.sendError(this.translateService.instant(\"personalization.error.updatingcustomization\"));\r\n                            deferred.reject();\r\n                        });\r\n                        return deferred.promise;\r\n                    },\r\n                });\r\n            }, [\r\n                TranslateService,\r\n                SearchProfilesContextService,\r\n                SearchRestService,\r\n                PersonalizationsmarteditMessageHandler,\r\n                PersonalizationsmarteditCommerceCustomizationService,\r\n            ]),\r\n        ],\r\n    })\r\n], PersonalizationsearchSmarteditContainerModule);\r\nexport { PersonalizationsearchSmarteditContainerModule };\r\n//# sourceMappingURL=personalizationsearchsmarteditContainer.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+cdk@8.2.3_ecb0ad61817e3ede6ce462931a5e5041/node_modules/@angular/cdk/drag-drop.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+platform-browser@8.2.14_ecb0ad61817e3ede6ce462931a5e5041/node_modules/@angular/platform-browser/platform-browser.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@fundamental-ngx+core@0.13.2_9a9a80bb6ff375d99f90188f858ebbd5/node_modules/@fundamental-ngx/core/fundamental-ngx-core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@ngx-translate+core@11.0.1_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@ngx-translate/core/ngx-translate-core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationcommons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization-search/personalizationsearchsmartedit/apps/personalizationsearchsmarteditContainer/src/searchSmarteditComponent/SearchProfilesSmarteditComponent.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization-search/personalizationsearchsmartedit/apps/personalizationsearchsmarteditContainer/src/service/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization-search/personalizationsearchsmartedit/apps/personalizationsearchsmarteditContainer/src/utils/constants.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"personalizationsearchsmarteditContainer.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/personalizationsearchsmarteditContainer.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization-search/personalizationsearchsmartedit/apps/personalizationsearchsmarteditContainer/node_modules/.cache/rollup-plugin-typescript2/placeholder/personalizationsearchsmarteditContainer.d.ts","writeByteOrderMark":false,"text":"import \"../../styling/style.less\";\r\nexport declare class PersonalizationsearchSmarteditContainerModule {\r\n}\r\n"}}
