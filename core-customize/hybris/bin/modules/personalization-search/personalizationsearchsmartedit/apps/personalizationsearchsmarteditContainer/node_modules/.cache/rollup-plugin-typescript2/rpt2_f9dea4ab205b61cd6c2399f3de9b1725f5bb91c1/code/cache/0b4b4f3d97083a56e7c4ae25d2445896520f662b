{"code":"import { __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n *\r\n * This software is the confidential and proprietary information of SAP\r\n * (\"Confidential Information\"). You shall not disclose such Confidential\r\n * Information and shall use it only in accordance with the terms of the\r\n * license agreement you entered into with SAP.\r\n */\r\nimport { PersonalizationsmarteditUtils } from \"personalizationcommons\";\r\nimport { SeDowngradeService, IRestServiceFactory } from \"smarteditcommons\";\r\nlet /* @ngInject */ SearchRestService = class /* @ngInject */ SearchRestService {\r\n    constructor(personalizationsmarteditUtils, restServiceFactory) {\r\n        this.personalizationsmarteditUtils = personalizationsmarteditUtils;\r\n        this.restServiceFactory = restServiceFactory;\r\n        this.SEARCH_PROFILES = \"/adaptivesearchwebservices/v1/searchprofiles\";\r\n        this.UPDATE_CUSTOMIZATION_RANK = \"/personalizationwebservices/v1/query/cxUpdateSearchProfileActionRank\";\r\n        this.GET_INDEX_TYPES_FOR_SITE = \"/personalizationwebservices/v1/query/cxGetIndexTypesForSite\";\r\n    }\r\n    initSeData(seData) {\r\n        this.seData = seData;\r\n    }\r\n    getSeExperienceData() {\r\n        return this.seData.seExperienceData;\r\n    }\r\n    getSearchProfiles(filter) {\r\n        const experienceData = this.getSeExperienceData();\r\n        const catalogVersionsStr = (experienceData.productCatalogVersions || [])\r\n            .map(function (cv) {\r\n            return cv.catalog + \":\" + cv.catalogVersion;\r\n        })\r\n            .join(\",\");\r\n        const restService = this.restServiceFactory.get(this.SEARCH_PROFILES);\r\n        filter = Object.assign({ catalogVersions: catalogVersionsStr }, filter);\r\n        return restService.get(filter);\r\n    }\r\n    updateSearchProfileActionRank(filter) {\r\n        const experienceData = this.getSeExperienceData();\r\n        const restService = this.restServiceFactory.get(this.UPDATE_CUSTOMIZATION_RANK);\r\n        const entries = [];\r\n        this.personalizationsmarteditUtils.pushToArrayIfValueExists(entries, \"customization\", filter.customizationCode);\r\n        this.personalizationsmarteditUtils.pushToArrayIfValueExists(entries, \"variation\", filter.variationCode);\r\n        this.personalizationsmarteditUtils.pushToArrayIfValueExists(entries, \"rankBeforeAction\", filter.rankBeforeAction);\r\n        this.personalizationsmarteditUtils.pushToArrayIfValueExists(entries, \"rankAfterAction\", filter.rankAfterAction);\r\n        this.personalizationsmarteditUtils.pushToArrayIfValueExists(entries, \"actions\", filter.actions);\r\n        this.personalizationsmarteditUtils.pushToArrayIfValueExists(entries, \"catalog\", experienceData.catalogDescriptor.catalogId);\r\n        this.personalizationsmarteditUtils.pushToArrayIfValueExists(entries, \"catalogVersion\", experienceData.catalogDescriptor.catalogVersion);\r\n        const requestParams = {\r\n            params: {\r\n                entry: entries,\r\n            },\r\n        };\r\n        return restService.save(requestParams);\r\n    }\r\n    getIndexTypesForCatalogVersion(productCV) {\r\n        const experienceData = this.getSeExperienceData();\r\n        const restService = this.restServiceFactory.get(this.GET_INDEX_TYPES_FOR_SITE);\r\n        const entries = [];\r\n        this.personalizationsmarteditUtils.pushToArrayIfValueExists(entries, \"baseSiteId\", experienceData.catalogDescriptor.siteId);\r\n        this.personalizationsmarteditUtils.pushToArrayIfValueExists(entries, \"catalog\", productCV.catalog);\r\n        this.personalizationsmarteditUtils.pushToArrayIfValueExists(entries, \"catalogVersion\", productCV.catalogVersion);\r\n        const requestParams = {\r\n            params: {\r\n                entry: entries,\r\n            },\r\n        };\r\n        return restService.save(requestParams);\r\n    }\r\n};\r\n/* @ngInject */ SearchRestService = __decorate([\r\n    SeDowngradeService(),\r\n    __metadata(\"design:paramtypes\", [PersonalizationsmarteditUtils,\r\n        IRestServiceFactory])\r\n], /* @ngInject */ SearchRestService);\r\nexport { /* @ngInject */ SearchRestService };\r\n//# sourceMappingURL=SearchRestService.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization/personalizationsmartedit/apps/personalizationcommons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"SearchRestService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/service/SearchRestService.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/personalization-search/personalizationsearchsmartedit/apps/personalizationsearchsmarteditContainer/node_modules/.cache/rollup-plugin-typescript2/placeholder/service/SearchRestService.d.ts","writeByteOrderMark":false,"text":"import { PersonalizationsmarteditUtils, SeData } from \"personalizationcommons\";\r\nimport { IRestServiceFactory } from \"smarteditcommons\";\r\nexport declare class SearchRestService {\r\n    private personalizationsmarteditUtils;\r\n    private restServiceFactory;\r\n    private readonly SEARCH_PROFILES;\r\n    private readonly UPDATE_CUSTOMIZATION_RANK;\r\n    private readonly GET_INDEX_TYPES_FOR_SITE;\r\n    private seData;\r\n    constructor(personalizationsmarteditUtils: PersonalizationsmarteditUtils, restServiceFactory: IRestServiceFactory);\r\n    initSeData(seData: SeData): void;\r\n    getSeExperienceData(): any;\r\n    getSearchProfiles(filter: any): any;\r\n    updateSearchProfileActionRank(filter: any): any;\r\n    getIndexTypesForCatalogVersion(productCV: any): any;\r\n}\r\n"}}
