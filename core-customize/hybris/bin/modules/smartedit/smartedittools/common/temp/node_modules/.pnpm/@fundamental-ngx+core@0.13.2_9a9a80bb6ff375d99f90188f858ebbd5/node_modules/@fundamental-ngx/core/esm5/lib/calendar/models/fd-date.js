/**
 * @fileoverview added by tsickle
 * Generated from: lib/calendar/models/fd-date.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/**
 * Default date model used by the fundamental components.
 */
import { CalendarService } from '../calendar.service';
var FdDate = /** @class */ (function () {
    /**
     * Constructor to build a FdDate object from a year, month and day.
     * @param year The year of the date.
     * @param month The month of the date (1-12).
     * @param day The day of the date (1-31, generally).
     */
    function FdDate(year, month, day) {
        this.year = year;
        this.month = month;
        this.day = day;
    }
    /**
     * Static function to get the current date in FdDate form.
     */
    /**
     * Static function to get the current date in FdDate form.
     * @return {?}
     */
    FdDate.getToday = /**
     * Static function to get the current date in FdDate form.
     * @return {?}
     */
    function () {
        /** @type {?} */
        var tempDate = new Date();
        return new FdDate(tempDate.getFullYear(), tempDate.getMonth() + 1, tempDate.getDate());
    };
    /**
     *  Static function allowing convert js date object to FdDate model
     */
    /**
     *  Static function allowing convert js date object to FdDate model
     * @param {?} date
     * @return {?}
     */
    FdDate.getModelFromDate = /**
     *  Static function allowing convert js date object to FdDate model
     * @param {?} date
     * @return {?}
     */
    function (date) {
        if (date) {
            return new FdDate(date.getFullYear(), date.getMonth() + 1, date.getDate());
        }
    };
    /**
     * Get Luxon date object converted to string from FdDate.
     */
    /**
     * Get Luxon date object converted to string from FdDate.
     * @return {?}
     */
    FdDate.prototype.toDateString = /**
     * Get Luxon date object converted to string from FdDate.
     * @return {?}
     */
    function () {
        if (this.year && this.month && this.day && this.isDateValid()) {
            return this.toDate().toDateString();
        }
        else {
            return '';
        }
    };
    /**
     * Get amount of milliseconds from 01.01.1970
     * -1 is thrown when some some of properties (day,month,year) are not defined
     */
    /**
     * Get amount of milliseconds from 01.01.1970
     * -1 is thrown when some some of properties (day,month,year) are not defined
     * @return {?}
     */
    FdDate.prototype.getTimeStamp = /**
     * Get amount of milliseconds from 01.01.1970
     * -1 is thrown when some some of properties (day,month,year) are not defined
     * @return {?}
     */
    function () {
        if (this.year && this.month && this.day) {
            return this.toDate().getTime();
        }
        else {
            return -1;
        }
    };
    /**
     * Get number of weekday ex. Sunday = 1, Monday = 2, Tuesday = 3 etc.
     * -1 is thrown when some some of properties (day,month,year) are not defined
     * Native javascript date getDay() function returns Sunday as 0, Monday as 1, etc, to it's needed to increment value
     *
     */
    /**
     * Get number of weekday ex. Sunday = 1, Monday = 2, Tuesday = 3 etc.
     * -1 is thrown when some some of properties (day,month,year) are not defined
     * Native javascript date getDay() function returns Sunday as 0, Monday as 1, etc, to it's needed to increment value
     *
     * @return {?}
     */
    FdDate.prototype.getDay = /**
     * Get number of weekday ex. Sunday = 1, Monday = 2, Tuesday = 3 etc.
     * -1 is thrown when some some of properties (day,month,year) are not defined
     * Native javascript date getDay() function returns Sunday as 0, Monday as 1, etc, to it's needed to increment value
     *
     * @return {?}
     */
    function () {
        if (this.year && this.month && this.day) {
            return this.toDate().getDay() + 1;
        }
        else {
            return -1;
        }
    };
    /** Get next day */
    /**
     * Get next day
     * @return {?}
     */
    FdDate.prototype.nextDay = /**
     * Get next day
     * @return {?}
     */
    function () {
        /** @type {?} */
        var maxDays = CalendarService.getDaysInMonth(this.month, this.year);
        /** @type {?} */
        var isNextMonth = this.day >= maxDays;
        /** @type {?} */
        var isNextYear = isNextMonth && this.month === 12;
        /** @type {?} */
        var day = isNextMonth ? 1 : this.day + 1;
        /** @type {?} */
        var month = isNextMonth ? (isNextYear ? 1 : this.month + 1) : this.month;
        /** @type {?} */
        var year = isNextYear ? this.year + 1 : this.year;
        return new FdDate(year, month, day);
    };
    /** Get previous day  */
    /**
     * Get previous day
     * @return {?}
     */
    FdDate.prototype.previousDay = /**
     * Get previous day
     * @return {?}
     */
    function () {
        /**
         * Check if should switch month to previous one
         * @type {?}
         */
        var prevMonth = this.day === 1;
        /**
         * Check if should switch year to previous one
         * @type {?}
         */
        var prevYear = prevMonth && (this.month === 1);
        /** @type {?} */
        var year = prevYear ? this.year - 1 : this.year;
        /** @type {?} */
        var month = prevYear ? 12 : (prevMonth ? this.month - 1 : this.month);
        /**
         * Amount of days in month
         * @type {?}
         */
        var maxDays = CalendarService.getDaysInMonth(month, year);
        /** @type {?} */
        var day = this.day === 1 ? maxDays : this.day - 1;
        return new FdDate(year, month, day);
    };
    /**
     * Get native date object from FdDate.
     */
    /**
     * Get native date object from FdDate.
     * @return {?}
     */
    FdDate.prototype.toDate = /**
     * Get native date object from FdDate.
     * @return {?}
     */
    function () {
        return new Date(this.year, this.month - 1, this.day);
    };
    /**
     * Method that checks validity of current FdDate object.
     */
    /**
     * Method that checks validity of current FdDate object.
     * @return {?}
     */
    FdDate.prototype.isDateValid = /**
     * Method that checks validity of current FdDate object.
     * @return {?}
     */
    function () {
        if (!this) {
            return false;
        }
        if (!this.year || !this.month || !this.day) {
            return false;
        }
        if (this.year <= 0 ||
            this.month < 1 ||
            this.month > 12 ||
            isNaN(this.year) ||
            isNaN(this.month) ||
            isNaN(this.day)) {
            return false;
        }
        if (this.day < 1 || this.day > CalendarService.getDaysInMonth(this.month, this.year)) {
            return false;
        }
        return true;
    };
    return FdDate;
}());
export { FdDate };
if (false) {
    /**
     * The year of the date.
     * @type {?}
     */
    FdDate.prototype.year;
    /**
     * The month of the date. 1 = January, 12 = December.
     * @type {?}
     */
    FdDate.prototype.month;
    /**
     * Day of the date. Starts at 1.
     * @type {?}
     */
    FdDate.prototype.day;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmQtZGF0ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BmdW5kYW1lbnRhbC1uZ3gvY29yZS8iLCJzb3VyY2VzIjpbImxpYi9jYWxlbmRhci9tb2RlbHMvZmQtZGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUdBLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUV0RDtJQWtDSTs7Ozs7T0FLRztJQUNILGdCQUFZLElBQVksRUFBRSxLQUFhLEVBQUUsR0FBVztRQUNoRCxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztJQUNuQixDQUFDO0lBM0JEOztPQUVHOzs7OztJQUNJLGVBQVE7Ozs7SUFBZjs7WUFDVSxRQUFRLEdBQVMsSUFBSSxJQUFJLEVBQUU7UUFDakMsT0FBTyxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLEVBQUUsUUFBUSxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsRUFBRSxRQUFRLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUMzRixDQUFDO0lBRUQ7O09BRUc7Ozs7OztJQUNJLHVCQUFnQjs7Ozs7SUFBdkIsVUFBd0IsSUFBVTtRQUM5QixJQUFJLElBQUksRUFBRTtZQUNOLE9BQU8sSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7U0FDOUU7SUFDTCxDQUFDO0lBY0Q7O09BRUc7Ozs7O0lBQ0ksNkJBQVk7Ozs7SUFBbkI7UUFDSSxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUUsRUFBRTtZQUMzRCxP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LElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDekQsQ0FBQztJQUVEOztPQUVHOzs7OztJQUNJLDRCQUFXOzs7O0lBQWxCO1FBQ0ksSUFBSSxDQUFDLElBQUksRUFBRTtZQUNQLE9BQU8sS0FBSyxDQUFDO1NBQ2hCO1FBRUQsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTtZQUN4QyxPQUFPLEtBQUssQ0FBQztTQUNoQjtRQUVELElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDO1lBQ2QsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDO1lBQ2QsSUFBSSxDQUFDLEtBQUssR0FBRyxFQUFFO1lBQ2YsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7WUFDaEIsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7WUFDakIsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFDakI7WUFDRSxPQUFPLEtBQUssQ0FBQztTQUNoQjtRQUVELElBQUksSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLEdBQUcsR0FBRyxlQUFlLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ2xGLE9BQU8sS0FBSyxDQUFDO1NBQ2hCO1FBRUQsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVMLGFBQUM7QUFBRCxDQUFDLEFBdkpELElBdUpDOzs7Ozs7O0lBbEpHLHNCQUFvQjs7Ozs7SUFLcEIsdUJBQXFCOzs7OztJQUtyQixxQkFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIERlZmF1bHQgZGF0ZSBtb2RlbCB1c2VkIGJ5IHRoZSBmdW5kYW1lbnRhbCBjb21wb25lbnRzLlxuICovXG5pbXBvcnQgeyBDYWxlbmRhclNlcnZpY2UgfSBmcm9tICcuLi9jYWxlbmRhci5zZXJ2aWNlJztcblxuZXhwb3J0IGNsYXNzIEZkRGF0ZSB7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgeWVhciBvZiB0aGUgZGF0ZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgeWVhcjogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG1vbnRoIG9mIHRoZSBkYXRlLiAxID0gSmFudWFyeSwgMTIgPSBEZWNlbWJlci5cbiAgICAgKi9cbiAgICBwdWJsaWMgbW9udGg6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIERheSBvZiB0aGUgZGF0ZS4gU3RhcnRzIGF0IDEuXG4gICAgICovXG4gICAgcHVibGljIGRheTogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogU3RhdGljIGZ1bmN0aW9uIHRvIGdldCB0aGUgY3VycmVudCBkYXRlIGluIEZkRGF0ZSBmb3JtLlxuICAgICAqL1xuICAgIHN0YXRpYyBnZXRUb2RheSgpOiBGZERhdGUge1xuICAgICAgICBjb25zdCB0ZW1wRGF0ZTogRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJldHVybiBuZXcgRmREYXRlKHRlbXBEYXRlLmdldEZ1bGxZZWFyKCksIHRlbXBEYXRlLmdldE1vbnRoKCkgKyAxLCB0ZW1wRGF0ZS5nZXREYXRlKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqICBTdGF0aWMgZnVuY3Rpb24gYWxsb3dpbmcgY29udmVydCBqcyBkYXRlIG9iamVjdCB0byBGZERhdGUgbW9kZWxcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0TW9kZWxGcm9tRGF0ZShkYXRlOiBEYXRlKTogRmREYXRlIHtcbiAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmREYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwgZGF0ZS5nZXRNb250aCgpICsgMSwgZGF0ZS5nZXREYXRlKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0b3IgdG8gYnVpbGQgYSBGZERhdGUgb2JqZWN0IGZyb20gYSB5ZWFyLCBtb250aCBhbmQgZGF5LlxuICAgICAqIEBwYXJhbSB5ZWFyIFRoZSB5ZWFyIG9mIHRoZSBkYXRlLlxuICAgICAqIEBwYXJhbSBtb250aCBUaGUgbW9udGggb2YgdGhlIGRhdGUgKDEtMTIpLlxuICAgICAqIEBwYXJhbSBkYXkgVGhlIGRheSBvZiB0aGUgZGF0ZSAoMS0zMSwgZ2VuZXJhbGx5KS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih5ZWFyOiBudW1iZXIsIG1vbnRoOiBudW1iZXIsIGRheTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMueWVhciA9IHllYXI7XG4gICAgICAgIHRoaXMubW9udGggPSBtb250aDtcbiAgICAgICAgdGhpcy5kYXkgPSBkYXk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IEx1eG9uIGRhdGUgb2JqZWN0IGNvbnZlcnRlZCB0byBzdHJpbmcgZnJvbSBGZERhdGUuXG4gICAgICovXG4gICAgcHVibGljIHRvRGF0ZVN0cmluZygpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy55ZWFyICYmIHRoaXMubW9udGggJiYgdGhpcy5kYXkgJiYgdGhpcy5pc0RhdGVWYWxpZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0RhdGUoKS50b0RhdGVTdHJpbmcoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIGZyb20gMDEuMDEuMTk3MFxuICAgICAqIC0xIGlzIHRocm93biB3aGVuIHNvbWUgc29tZSBvZiBwcm9wZXJ0aWVzIChkYXksbW9udGgseWVhcikgYXJlIG5vdCBkZWZpbmVkXG4gICAgICovXG4gICAgcHVibGljIGdldFRpbWVTdGFtcCgpOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy55ZWFyICYmIHRoaXMubW9udGggJiYgdGhpcy5kYXkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBudW1iZXIgb2Ygd2Vla2RheSBleC4gU3VuZGF5ID0gMSwgTW9uZGF5ID0gMiwgVHVlc2RheSA9IDMgZXRjLlxuICAgICAqIC0xIGlzIHRocm93biB3aGVuIHNvbWUgc29tZSBvZiBwcm9wZXJ0aWVzIChkYXksbW9udGgseWVhcikgYXJlIG5vdCBkZWZpbmVkXG4gICAgICogTmF0aXZlIGphdmFzY3JpcHQgZGF0ZSBnZXREYXkoKSBmdW5jdGlvbiByZXR1cm5zIFN1bmRheSBhcyAwLCBNb25kYXkgYXMgMSwgZXRjLCB0byBpdCdzIG5lZWRlZCB0byBpbmNyZW1lbnQgdmFsdWVcbiAgICAgKlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXREYXkoKTogbnVtYmVyIHtcbiAgICAgICAgaWYgKHRoaXMueWVhciAmJiB0aGlzLm1vbnRoICYmIHRoaXMuZGF5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0RhdGUoKS5nZXREYXkoKSArIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogR2V0IG5leHQgZGF5ICovXG4gICAgcHVibGljIG5leHREYXkoKTogRmREYXRlIHtcbiAgICAgICAgY29uc3QgbWF4RGF5cyA9IENhbGVuZGFyU2VydmljZS5nZXREYXlzSW5Nb250aCh0aGlzLm1vbnRoLCB0aGlzLnllYXIpO1xuICAgICAgICBjb25zdCBpc05leHRNb250aCA9IHRoaXMuZGF5ID49IG1heERheXM7XG4gICAgICAgIGNvbnN0IGlzTmV4dFllYXIgPSBpc05leHRNb250aCAmJiB0aGlzLm1vbnRoID09PSAxMjtcblxuICAgICAgICBjb25zdCBkYXkgPSBpc05leHRNb250aCA/IDEgOiB0aGlzLmRheSArIDE7XG4gICAgICAgIGNvbnN0IG1vbnRoID0gaXNOZXh0TW9udGggPyAoaXNOZXh0WWVhciA/IDEgOiB0aGlzLm1vbnRoICsgMSkgOiB0aGlzLm1vbnRoO1xuICAgICAgICBjb25zdCB5ZWFyID0gaXNOZXh0WWVhciA/IHRoaXMueWVhciArIDEgOiB0aGlzLnllYXI7XG4gICAgICAgIHJldHVybiBuZXcgRmREYXRlKHllYXIsIG1vbnRoLCBkYXkpO1xuICAgIH1cblxuICAgIC8qKiBHZXQgcHJldmlvdXMgZGF5ICAqL1xuICAgIHB1YmxpYyBwcmV2aW91c0RheSgpOiBGZERhdGUge1xuXG4gICAgICAgIC8qKiBDaGVjayBpZiBzaG91bGQgc3dpdGNoIG1vbnRoIHRvIHByZXZpb3VzIG9uZSAqL1xuICAgICAgICBjb25zdCBwcmV2TW9udGg6IGJvb2xlYW4gPSB0aGlzLmRheSA9PT0gMTtcblxuICAgICAgICAvKiogQ2hlY2sgaWYgc2hvdWxkIHN3aXRjaCB5ZWFyIHRvIHByZXZpb3VzIG9uZSAqL1xuICAgICAgICBjb25zdCBwcmV2WWVhcjogYm9vbGVhbiA9IHByZXZNb250aCAmJiAoIHRoaXMubW9udGggPT09IDEgKTtcblxuICAgICAgICBjb25zdCB5ZWFyID0gcHJldlllYXIgPyB0aGlzLnllYXIgLSAxIDogdGhpcy55ZWFyO1xuICAgICAgICBjb25zdCBtb250aCA9IHByZXZZZWFyID8gMTIgOiAoIHByZXZNb250aCA/IHRoaXMubW9udGggLSAxIDogdGhpcy5tb250aCApO1xuXG4gICAgICAgIC8qKiBBbW91bnQgb2YgZGF5cyBpbiBtb250aCAqL1xuICAgICAgICBjb25zdCBtYXhEYXlzOiBudW1iZXIgPSBDYWxlbmRhclNlcnZpY2UuZ2V0RGF5c0luTW9udGgobW9udGgsIHllYXIpO1xuXG4gICAgICAgIGNvbnN0IGRheSA9IHRoaXMuZGF5ID09PSAxID8gbWF4RGF5cyA6IHRoaXMuZGF5IC0gMTtcblxuICAgICAgICByZXR1cm4gbmV3IEZkRGF0ZSh5ZWFyLCBtb250aCwgZGF5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgbmF0aXZlIGRhdGUgb2JqZWN0IGZyb20gRmREYXRlLlxuICAgICAqL1xuICAgIHB1YmxpYyB0b0RhdGUoKTogRGF0ZSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnllYXIsIHRoaXMubW9udGggLSAxLCB0aGlzLmRheSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRoYXQgY2hlY2tzIHZhbGlkaXR5IG9mIGN1cnJlbnQgRmREYXRlIG9iamVjdC5cbiAgICAgKi9cbiAgICBwdWJsaWMgaXNEYXRlVmFsaWQoKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghdGhpcykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnllYXIgfHwgIXRoaXMubW9udGggfHwgIXRoaXMuZGF5KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy55ZWFyIDw9IDAgfHxcbiAgICAgICAgICAgIHRoaXMubW9udGggPCAxIHx8XG4gICAgICAgICAgICB0aGlzLm1vbnRoID4gMTIgfHxcbiAgICAgICAgICAgIGlzTmFOKHRoaXMueWVhcikgfHxcbiAgICAgICAgICAgIGlzTmFOKHRoaXMubW9udGgpIHx8XG4gICAgICAgICAgICBpc05hTih0aGlzLmRheSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kYXkgPCAxIHx8IHRoaXMuZGF5ID4gQ2FsZW5kYXJTZXJ2aWNlLmdldERheXNJbk1vbnRoKHRoaXMubW9udGgsIHRoaXMueWVhcikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxufVxuIl19