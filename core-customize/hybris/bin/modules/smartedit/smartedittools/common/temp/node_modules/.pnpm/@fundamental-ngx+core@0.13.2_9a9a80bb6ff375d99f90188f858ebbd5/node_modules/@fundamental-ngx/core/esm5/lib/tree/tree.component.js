/**
 * @fileoverview added by tsickle
 * Generated from: lib/tree/tree.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output, QueryList, ViewChildren, ViewEncapsulation } from '@angular/core';
import { TreeChildComponent } from './tree-child.component';
var TreeComponent = /** @class */ (function () {
    function TreeComponent() {
        this.editRowClicked = new EventEmitter();
        this.deleteRowClicked = new EventEmitter();
    }
    /**
     * @return {?}
     */
    TreeComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.hideAll = false;
    };
    /**
     * @return {?}
     */
    TreeComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.treeData && this.treeData.length) {
            this.treeData.forEach((/**
             * @param {?} row
             * @return {?}
             */
            function (row) {
                _this.getChildDepth(row, 0);
                _this.handleEmptyTrailingCells(row); // handle empty cells for parents
            }));
        }
    };
    /**
     * @return {?}
     */
    TreeComponent.prototype.toggleDisplayAll = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.hideAll = !this.hideAll;
        this.treeChildren.forEach((/**
         * @param {?} child
         * @return {?}
         */
        function (child) {
            child.toggleDisplayChildren(_this.hideAll);
        }));
    };
    /**
     * @param {?} row
     * @param {?} depth
     * @return {?}
     */
    TreeComponent.prototype.getChildDepth = /**
     * @param {?} row
     * @param {?} depth
     * @return {?}
     */
    function (row, depth) {
        var _this = this;
        if (depth > 0) {
            row.sublevelClass = 'fd-tree__group--sublevel-' + depth;
        }
        if (row.children) {
            row.children.forEach((/**
             * @param {?} child
             * @return {?}
             */
            function (child) {
                _this.getChildDepth(child, depth + 1);
                _this.handleEmptyTrailingCells(child); // handle empty cells for children
            }));
        }
    };
    /**
     * @param {?} row
     * @return {?}
     */
    TreeComponent.prototype.handleEmptyTrailingCells = /**
     * @param {?} row
     * @return {?}
     */
    function (row) {
        if (row &&
            row.rowData &&
            row.rowData.length &&
            typeof row.rowData[0] !== 'object' &&
            this.headers &&
            this.headers.length) {
            while (row.rowData.length < this.headers.length) {
                row.rowData.push('');
            }
        }
        else if (row &&
            row.rowData &&
            row.rowData.length &&
            typeof row.rowData[0] === 'object' &&
            this.headers &&
            this.headers.length) {
            while (row.rowData.length < this.headers.length) {
                row.rowData.push({
                    displayText: ''
                });
            }
        }
    };
    /**
     * @param {?} row
     * @return {?}
     */
    TreeComponent.prototype.editClicked = /**
     * @param {?} row
     * @return {?}
     */
    function (row) {
        this.editRowClicked.emit(row);
    };
    /**
     * @param {?} row
     * @return {?}
     */
    TreeComponent.prototype.deleteClicked = /**
     * @param {?} row
     * @return {?}
     */
    function (row) {
        this.deleteRowClicked.emit(row);
    };
    TreeComponent.decorators = [
        { type: Component, args: [{
                    selector: 'fd-tree',
                    template: "<div class=\"fd-tree fd-tree--header\"\n     *ngIf=\"headers.length > 0\">\n  <div class=\"fd-tree__row fd-tree__row--header\">\n    <div class=\"fd-tree__col fd-tree__col--control\">\n      <button (click)=\"toggleDisplayAll()\"\n              class=\"fd-tree__control\"\n              aria-label=\"Expand all\"\n              [ngClass]=\"{'is-pressed' : !hideAll}\"\n              [attr.aria-pressed]=\"!hideAll\"></button>\n      {{headers[0]}}\n    </div>\n    <div class=\"fd-tree__col\"\n         *ngFor=\"let header of headers | slice:1\">\n      {{header}}\n    </div>\n    <div class=\"fd-tree__col fd-tree__col--actions\"></div>\n  </div>\n</div>\n<ul class=\"fd-tree\"\n    id=\"ENusD653\"\n    role=\"tree\">\n  <fd-tree-child (editClicked)=\"editClicked($event)\"\n                 (deleteClicked)=\"deleteClicked($event)\"\n                 [displayTreeActions]=\"displayTreeActions\"\n                 *ngFor=\"let row of treeData\"\n                 [row]=\"row\"></fd-tree-child>\n</ul>\n",
                    encapsulation: ViewEncapsulation.None,
                    styles: ["@charset \"UTF-8\";/*!\n * Fundamental Library Styles v0.4.1\n * Copyright (c) 2020 SAP SE or an SAP affiliate company.\n * Licensed under Apache License 2.0 (https://github.com/SAP/fundamental-styles/blob/master/LICENSE)\n *//*!\n.fd-tree+(--header)\n    .fd-tree__group+(--sublevel-1...-6, ([aria-hidden] | .is-hidden))\n    .fd-tree__item\n        .fd-tree__row+(--header, ([aria-selected] | .is-selected))\n            .fd-tree__col+(--control, --actions)\n                .fd-tree__control+([aria-pressed] | .is-pressed)\n*/.fd-tree{--fd-tree-cell-spacing:var(--fd-width-gutter);--fd-tree-border-color:var(--fd-color-neutral-2);--fd-tree-background-color:var(--fd-color-background-2);--fd-tree-link-color:var(--fd-color-action-1);--fd-tree-header-color:var(--fd-color-text-3);--fd-tree-header-background-color:var(--fd-color-neutral-2);font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0 0 12px;border:0;position:relative;width:100%;max-width:100%;background-color:#fff;background-color:var(--fd-tree-background-color,#fff);border-bottom-color:var(--fd-tree-border-color,#eeeeef);border-bottom:0 solid #eeeeef}.fd-tree:after,.fd-tree:before{box-sizing:inherit;font-size:inherit}.fd-tree:last-child{margin-right:0;margin-bottom:0}.fd-tree--header{border-bottom:0;border-top-color:var(--fd-tree-border-color,#eeeeef);margin-bottom:0;background-color:#eeeeef;background-color:var(--fd-tree-header-background-color,#eeeeef);border-top:0 solid #eeeeef}.fd-tree__group{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0;border:0;transition:opacity 125ms linear;max-height:auto;opacity:1}.fd-tree__group:after,.fd-tree__group:before{box-sizing:inherit;font-size:inherit}.fd-tree__group.is-hidden{max-height:0;opacity:0;overflow:hidden}.fd-tree__item{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0;border:0;border-top-color:var(--fd-tree-border-color,#eeeeef);list-style:none;border-top:0 solid #eeeeef}.fd-tree__item:after,.fd-tree__item:before{box-sizing:inherit;font-size:inherit}.fd-tree__row{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0 16px;margin:0;border:0;padding-left:var(--fd-tree-cell-spacing,16px);padding-right:var(--fd-tree-cell-spacing,16px);display:flex;align-items:center;position:relative;transition:background-color 125ms ease-in}.fd-tree__row:after,.fd-tree__row:before{box-sizing:inherit;font-size:inherit}.fd-tree__row .is-hover,.fd-tree__row:hover{background-color:#fafafa;background-color:var(--fd-color-background-hover,#fafafa)}.fd-tree__row--header{color:#6a6d70;color:var(--fd-tree-header-color,#6a6d70);background-color:#eeeeef;background-color:var(--fd-tree-header-background-color,#eeeeef);text-transform:uppercase}.fd-tree__row--header .is-hover,.fd-tree__row--header:hover{background-color:initial}.fd-tree__row.is-selected,.fd-tree__row[aria-selected=true]{background-color:rgba(10,110,209,.07);background-color:var(--fd-color-background-selected,rgba(10,110,209,.07))}.fd-tree__col{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:12px 0;margin:0;border:0;flex:1;padding-left:30px}.fd-tree__col:after,.fd-tree__col:before{box-sizing:inherit;font-size:inherit}.fd-tree__col[dir=rtl],[dir=rtl] .fd-tree__col{padding-left:0;padding-right:30px}.fd-tree__col--control{flex:auto;width:20%}.fd-tree__group--sublevel-1 .fd-tree__col--control{padding-left:60px}.fd-tree__group--sublevel-1 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-1 .fd-tree__col--control{padding-left:0;padding-right:60px}.fd-tree__group--sublevel-2 .fd-tree__col--control{padding-left:90px}.fd-tree__group--sublevel-2 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-2 .fd-tree__col--control{padding-left:0;padding-right:90px}.fd-tree__group--sublevel-3 .fd-tree__col--control{padding-left:120px}.fd-tree__group--sublevel-3 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-3 .fd-tree__col--control{padding-left:0;padding-right:120px}.fd-tree__group--sublevel-4 .fd-tree__col--control{padding-left:150px}.fd-tree__group--sublevel-4 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-4 .fd-tree__col--control{padding-left:0;padding-right:150px}.fd-tree__group--sublevel-5 .fd-tree__col--control{padding-left:180px}.fd-tree__group--sublevel-5 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-5 .fd-tree__col--control{padding-left:0;padding-right:180px}.fd-tree__group--sublevel-6 .fd-tree__col--control{padding-left:210px}.fd-tree__group--sublevel-6 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-6 .fd-tree__col--control{padding-left:0;padding-right:210px}.fd-tree__group--sublevel-7 .fd-tree__col--control{padding-left:240px}.fd-tree__group--sublevel-7 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-7 .fd-tree__col--control{padding-left:0;padding-right:240px}.fd-tree__group--sublevel-8 .fd-tree__col--control{padding-left:270px}.fd-tree__group--sublevel-8 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-8 .fd-tree__col--control{padding-left:0;padding-right:270px}.fd-tree__col--actions{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0;border:0;text-align:right}.fd-tree__col--actions:after,.fd-tree__col--actions:before{box-sizing:inherit;font-size:inherit}.fd-tree__col--actions[dir=rtl],[dir=rtl] .fd-tree__col--actions{text-align:left}.fd-tree__control{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;display:inline-block;margin:-8px 12px 0 -36px;padding:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:0;border:0;text-decoration:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;background-color:transparent;border-radius:.25rem;border-radius:var(--sapButton_BorderCornerRadius,.25rem);position:absolute;top:calc(50% - 9px);width:34px;height:34px;transform:rotate(180deg);vertical-align:middle;transition:transform 125ms linear;color:#0a6ed1;color:var(--fd-color-action-1,#0a6ed1)}.fd-tree__control:after,.fd-tree__control:before{box-sizing:inherit;font-size:inherit}.fd-tree__control::-moz-focus-inner{border:0}.fd-tree__control:before{font-family:SAP-icons;font-style:normal;font-weight:400;text-align:center;display:inline-block;text-decoration:inherit;text-transform:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;speak:none;content:\"\uE1EB\";font-size:14px;line-height:1.42857}.fd-tree__control.is-focus,.fd-tree__control:focus{box-shadow:0 0 0 1px #085caf;box-shadow:0 0 0 1px var(--fd-color-action-focus,#085caf);z-index:5}.fd-tree__control[dir=rtl],[dir=rtl] .fd-tree__control{margin-right:-40px;transform:rotate(0)}.fd-tree__control.is-pressed{transform:rotate(270deg)}"]
                }] }
    ];
    TreeComponent.propDecorators = {
        headers: [{ type: Input }],
        treeData: [{ type: Input }],
        hideAll: [{ type: Input }],
        displayTreeActions: [{ type: Input }],
        editRowClicked: [{ type: Output }],
        deleteRowClicked: [{ type: Output }],
        treeChildren: [{ type: ViewChildren, args: [TreeChildComponent,] }]
    };
    return TreeComponent;
}());
export { TreeComponent };
if (false) {
    /** @type {?} */
    TreeComponent.prototype.headers;
    /** @type {?} */
    TreeComponent.prototype.treeData;
    /** @type {?} */
    TreeComponent.prototype.hideAll;
    /** @type {?} */
    TreeComponent.prototype.displayTreeActions;
    /** @type {?} */
    TreeComponent.prototype.editRowClicked;
    /** @type {?} */
    TreeComponent.prototype.deleteRowClicked;
    /** @type {?} */
    TreeComponent.prototype.treeChildren;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJlZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZnVuZGFtZW50YWwtbmd4L2NvcmUvIiwic291cmNlcyI6WyJsaWIvdHJlZS90cmVlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFFSCxTQUFTLEVBQ1QsWUFBWSxFQUNaLEtBQUssRUFFTCxNQUFNLEVBQ04sU0FBUyxFQUNULFlBQVksRUFDWixpQkFBaUIsRUFDcEIsTUFBTSxlQUFlLENBQUM7QUFHdkIsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFFNUQ7SUFBQTtRQWVjLG1CQUFjLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7UUFFNUQscUJBQWdCLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7SUF1RTVFLENBQUM7Ozs7SUFuRUcsZ0NBQVE7OztJQUFSO1FBQ0ksSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7SUFDekIsQ0FBQzs7OztJQUVELDBDQUFrQjs7O0lBQWxCO1FBQUEsaUJBT0M7UUFORyxJQUFJLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUU7WUFDdkMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPOzs7O1lBQUMsVUFBQSxHQUFHO2dCQUNyQixLQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDM0IsS0FBSSxDQUFDLHdCQUF3QixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsaUNBQWlDO1lBQ3pFLENBQUMsRUFBQyxDQUFDO1NBQ047SUFDTCxDQUFDOzs7O0lBRUQsd0NBQWdCOzs7SUFBaEI7UUFBQSxpQkFLQztRQUpHLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQzdCLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTzs7OztRQUFDLFVBQUEsS0FBSztZQUMzQixLQUFLLENBQUMscUJBQXFCLENBQUMsS0FBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzlDLENBQUMsRUFBQyxDQUFDO0lBQ1AsQ0FBQzs7Ozs7O0lBRUQscUNBQWE7Ozs7O0lBQWIsVUFBYyxHQUFHLEVBQUUsS0FBSztRQUF4QixpQkFVQztRQVRHLElBQUksS0FBSyxHQUFHLENBQUMsRUFBRTtZQUNYLEdBQUcsQ0FBQyxhQUFhLEdBQUcsMkJBQTJCLEdBQUcsS0FBSyxDQUFDO1NBQzNEO1FBQ0QsSUFBSSxHQUFHLENBQUMsUUFBUSxFQUFFO1lBQ2QsR0FBRyxDQUFDLFFBQVEsQ0FBQyxPQUFPOzs7O1lBQUMsVUFBQSxLQUFLO2dCQUN0QixLQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JDLEtBQUksQ0FBQyx3QkFBd0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLGtDQUFrQztZQUM1RSxDQUFDLEVBQUMsQ0FBQztTQUNOO0lBQ0wsQ0FBQzs7Ozs7SUFFRCxnREFBd0I7Ozs7SUFBeEIsVUFBeUIsR0FBRztRQUN4QixJQUNJLEdBQUc7WUFDSCxHQUFHLENBQUMsT0FBTztZQUNYLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTTtZQUNsQixPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssUUFBUTtZQUNsQyxJQUFJLENBQUMsT0FBTztZQUNaLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUNyQjtZQUNFLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUU7Z0JBQzdDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2FBQ3hCO1NBQ0o7YUFBTSxJQUNILEdBQUc7WUFDSCxHQUFHLENBQUMsT0FBTztZQUNYLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTTtZQUNsQixPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssUUFBUTtZQUNsQyxJQUFJLENBQUMsT0FBTztZQUNaLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUNyQjtZQUNFLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUU7Z0JBQzdDLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO29CQUNiLFdBQVcsRUFBRSxFQUFFO2lCQUNsQixDQUFDLENBQUM7YUFDTjtTQUNKO0lBQ0wsQ0FBQzs7Ozs7SUFFRCxtQ0FBVzs7OztJQUFYLFVBQVksR0FBRztRQUNYLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2xDLENBQUM7Ozs7O0lBRUQscUNBQWE7Ozs7SUFBYixVQUFjLEdBQUc7UUFDYixJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3BDLENBQUM7O2dCQXZGSixTQUFTLFNBQUM7b0JBQ1AsUUFBUSxFQUFFLFNBQVM7b0JBQ25CLHkvQkFBb0M7b0JBQ3BDLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJOztpQkFFeEM7OzswQkFFSSxLQUFLOzJCQUVMLEtBQUs7MEJBRUwsS0FBSztxQ0FFTCxLQUFLO2lDQUVMLE1BQU07bUNBRU4sTUFBTTsrQkFFTixZQUFZLFNBQUMsa0JBQWtCOztJQXFFcEMsb0JBQUM7Q0FBQSxBQXhGRCxJQXdGQztTQWxGWSxhQUFhOzs7SUFDdEIsZ0NBQTJCOztJQUUzQixpQ0FBbUM7O0lBRW5DLGdDQUEwQjs7SUFFMUIsMkNBQXFDOztJQUVyQyx1Q0FBc0U7O0lBRXRFLHlDQUF3RTs7SUFFeEUscUNBQThFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgICBBZnRlckNvbnRlbnRJbml0LFxuICAgIENvbXBvbmVudCxcbiAgICBFdmVudEVtaXR0ZXIsXG4gICAgSW5wdXQsXG4gICAgT25Jbml0LFxuICAgIE91dHB1dCxcbiAgICBRdWVyeUxpc3QsXG4gICAgVmlld0NoaWxkcmVuLFxuICAgIFZpZXdFbmNhcHN1bGF0aW9uXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBUcmVlUm93T2JqZWN0IH0gZnJvbSAnLi90cmVlLXJvdy1vYmplY3QubW9kZWwnO1xuaW1wb3J0IHsgVHJlZUNoaWxkQ29tcG9uZW50IH0gZnJvbSAnLi90cmVlLWNoaWxkLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnZmQtdHJlZScsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3RyZWUuY29tcG9uZW50Lmh0bWwnLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gICAgc3R5bGVVcmxzOiBbJy4vdHJlZS5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIFRyZWVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyQ29udGVudEluaXQge1xuICAgIEBJbnB1dCgpIGhlYWRlcnM6IHN0cmluZ1tdO1xuXG4gICAgQElucHV0KCkgdHJlZURhdGE6IFRyZWVSb3dPYmplY3RbXTtcblxuICAgIEBJbnB1dCgpIGhpZGVBbGw6IGJvb2xlYW47XG5cbiAgICBASW5wdXQoKSBkaXNwbGF5VHJlZUFjdGlvbnM6IGJvb2xlYW47XG5cbiAgICBAT3V0cHV0KCkgZWRpdFJvd0NsaWNrZWQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgICBAT3V0cHV0KCkgZGVsZXRlUm93Q2xpY2tlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAgIEBWaWV3Q2hpbGRyZW4oVHJlZUNoaWxkQ29tcG9uZW50KSB0cmVlQ2hpbGRyZW46IFF1ZXJ5TGlzdDxUcmVlQ2hpbGRDb21wb25lbnQ+O1xuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuaGlkZUFsbCA9IGZhbHNlO1xuICAgIH1cblxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMudHJlZURhdGEgJiYgdGhpcy50cmVlRGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMudHJlZURhdGEuZm9yRWFjaChyb3cgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2hpbGREZXB0aChyb3csIDApO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRW1wdHlUcmFpbGluZ0NlbGxzKHJvdyk7IC8vIGhhbmRsZSBlbXB0eSBjZWxscyBmb3IgcGFyZW50c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0b2dnbGVEaXNwbGF5QWxsKCkge1xuICAgICAgICB0aGlzLmhpZGVBbGwgPSAhdGhpcy5oaWRlQWxsO1xuICAgICAgICB0aGlzLnRyZWVDaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgICAgIGNoaWxkLnRvZ2dsZURpc3BsYXlDaGlsZHJlbih0aGlzLmhpZGVBbGwpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRDaGlsZERlcHRoKHJvdywgZGVwdGgpIHtcbiAgICAgICAgaWYgKGRlcHRoID4gMCkge1xuICAgICAgICAgICAgcm93LnN1YmxldmVsQ2xhc3MgPSAnZmQtdHJlZV9fZ3JvdXAtLXN1YmxldmVsLScgKyBkZXB0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm93LmNoaWxkcmVuKSB7XG4gICAgICAgICAgICByb3cuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDaGlsZERlcHRoKGNoaWxkLCBkZXB0aCArIDEpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRW1wdHlUcmFpbGluZ0NlbGxzKGNoaWxkKTsgLy8gaGFuZGxlIGVtcHR5IGNlbGxzIGZvciBjaGlsZHJlblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVFbXB0eVRyYWlsaW5nQ2VsbHMocm93KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHJvdyAmJlxuICAgICAgICAgICAgcm93LnJvd0RhdGEgJiZcbiAgICAgICAgICAgIHJvdy5yb3dEYXRhLmxlbmd0aCAmJlxuICAgICAgICAgICAgdHlwZW9mIHJvdy5yb3dEYXRhWzBdICE9PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgdGhpcy5oZWFkZXJzICYmXG4gICAgICAgICAgICB0aGlzLmhlYWRlcnMubGVuZ3RoXG4gICAgICAgICkge1xuICAgICAgICAgICAgd2hpbGUgKHJvdy5yb3dEYXRhLmxlbmd0aCA8IHRoaXMuaGVhZGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByb3cucm93RGF0YS5wdXNoKCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHJvdyAmJlxuICAgICAgICAgICAgcm93LnJvd0RhdGEgJiZcbiAgICAgICAgICAgIHJvdy5yb3dEYXRhLmxlbmd0aCAmJlxuICAgICAgICAgICAgdHlwZW9mIHJvdy5yb3dEYXRhWzBdID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgdGhpcy5oZWFkZXJzICYmXG4gICAgICAgICAgICB0aGlzLmhlYWRlcnMubGVuZ3RoXG4gICAgICAgICkge1xuICAgICAgICAgICAgd2hpbGUgKHJvdy5yb3dEYXRhLmxlbmd0aCA8IHRoaXMuaGVhZGVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByb3cucm93RGF0YS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQ6ICcnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBlZGl0Q2xpY2tlZChyb3cpIHtcbiAgICAgICAgdGhpcy5lZGl0Um93Q2xpY2tlZC5lbWl0KHJvdyk7XG4gICAgfVxuXG4gICAgZGVsZXRlQ2xpY2tlZChyb3cpIHtcbiAgICAgICAgdGhpcy5kZWxldGVSb3dDbGlja2VkLmVtaXQocm93KTtcbiAgICB9XG59XG4iXX0=