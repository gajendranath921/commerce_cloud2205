/**
 * @fileoverview added by tsickle
 * Generated from: lib/tree/tree.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output, QueryList, ViewChildren, ViewEncapsulation } from '@angular/core';
import { TreeChildComponent } from './tree-child.component';
export class TreeComponent {
    constructor() {
        this.editRowClicked = new EventEmitter();
        this.deleteRowClicked = new EventEmitter();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.hideAll = false;
    }
    /**
     * @return {?}
     */
    ngAfterContentInit() {
        if (this.treeData && this.treeData.length) {
            this.treeData.forEach((/**
             * @param {?} row
             * @return {?}
             */
            row => {
                this.getChildDepth(row, 0);
                this.handleEmptyTrailingCells(row); // handle empty cells for parents
            }));
        }
    }
    /**
     * @return {?}
     */
    toggleDisplayAll() {
        this.hideAll = !this.hideAll;
        this.treeChildren.forEach((/**
         * @param {?} child
         * @return {?}
         */
        child => {
            child.toggleDisplayChildren(this.hideAll);
        }));
    }
    /**
     * @param {?} row
     * @param {?} depth
     * @return {?}
     */
    getChildDepth(row, depth) {
        if (depth > 0) {
            row.sublevelClass = 'fd-tree__group--sublevel-' + depth;
        }
        if (row.children) {
            row.children.forEach((/**
             * @param {?} child
             * @return {?}
             */
            child => {
                this.getChildDepth(child, depth + 1);
                this.handleEmptyTrailingCells(child); // handle empty cells for children
            }));
        }
    }
    /**
     * @param {?} row
     * @return {?}
     */
    handleEmptyTrailingCells(row) {
        if (row &&
            row.rowData &&
            row.rowData.length &&
            typeof row.rowData[0] !== 'object' &&
            this.headers &&
            this.headers.length) {
            while (row.rowData.length < this.headers.length) {
                row.rowData.push('');
            }
        }
        else if (row &&
            row.rowData &&
            row.rowData.length &&
            typeof row.rowData[0] === 'object' &&
            this.headers &&
            this.headers.length) {
            while (row.rowData.length < this.headers.length) {
                row.rowData.push({
                    displayText: ''
                });
            }
        }
    }
    /**
     * @param {?} row
     * @return {?}
     */
    editClicked(row) {
        this.editRowClicked.emit(row);
    }
    /**
     * @param {?} row
     * @return {?}
     */
    deleteClicked(row) {
        this.deleteRowClicked.emit(row);
    }
}
TreeComponent.decorators = [
    { type: Component, args: [{
                selector: 'fd-tree',
                template: "<div class=\"fd-tree fd-tree--header\"\n     *ngIf=\"headers.length > 0\">\n  <div class=\"fd-tree__row fd-tree__row--header\">\n    <div class=\"fd-tree__col fd-tree__col--control\">\n      <button (click)=\"toggleDisplayAll()\"\n              class=\"fd-tree__control\"\n              aria-label=\"Expand all\"\n              [ngClass]=\"{'is-pressed' : !hideAll}\"\n              [attr.aria-pressed]=\"!hideAll\"></button>\n      {{headers[0]}}\n    </div>\n    <div class=\"fd-tree__col\"\n         *ngFor=\"let header of headers | slice:1\">\n      {{header}}\n    </div>\n    <div class=\"fd-tree__col fd-tree__col--actions\"></div>\n  </div>\n</div>\n<ul class=\"fd-tree\"\n    id=\"ENusD653\"\n    role=\"tree\">\n  <fd-tree-child (editClicked)=\"editClicked($event)\"\n                 (deleteClicked)=\"deleteClicked($event)\"\n                 [displayTreeActions]=\"displayTreeActions\"\n                 *ngFor=\"let row of treeData\"\n                 [row]=\"row\"></fd-tree-child>\n</ul>\n",
                encapsulation: ViewEncapsulation.None,
                styles: ["@charset \"UTF-8\";/*!\n * Fundamental Library Styles v0.4.1\n * Copyright (c) 2020 SAP SE or an SAP affiliate company.\n * Licensed under Apache License 2.0 (https://github.com/SAP/fundamental-styles/blob/master/LICENSE)\n *//*!\n.fd-tree+(--header)\n    .fd-tree__group+(--sublevel-1...-6, ([aria-hidden] | .is-hidden))\n    .fd-tree__item\n        .fd-tree__row+(--header, ([aria-selected] | .is-selected))\n            .fd-tree__col+(--control, --actions)\n                .fd-tree__control+([aria-pressed] | .is-pressed)\n*/.fd-tree{--fd-tree-cell-spacing:var(--fd-width-gutter);--fd-tree-border-color:var(--fd-color-neutral-2);--fd-tree-background-color:var(--fd-color-background-2);--fd-tree-link-color:var(--fd-color-action-1);--fd-tree-header-color:var(--fd-color-text-3);--fd-tree-header-background-color:var(--fd-color-neutral-2);font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0 0 12px;border:0;position:relative;width:100%;max-width:100%;background-color:#fff;background-color:var(--fd-tree-background-color,#fff);border-bottom-color:var(--fd-tree-border-color,#eeeeef);border-bottom:0 solid #eeeeef}.fd-tree:after,.fd-tree:before{box-sizing:inherit;font-size:inherit}.fd-tree:last-child{margin-right:0;margin-bottom:0}.fd-tree--header{border-bottom:0;border-top-color:var(--fd-tree-border-color,#eeeeef);margin-bottom:0;background-color:#eeeeef;background-color:var(--fd-tree-header-background-color,#eeeeef);border-top:0 solid #eeeeef}.fd-tree__group{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0;border:0;transition:opacity 125ms linear;max-height:auto;opacity:1}.fd-tree__group:after,.fd-tree__group:before{box-sizing:inherit;font-size:inherit}.fd-tree__group.is-hidden{max-height:0;opacity:0;overflow:hidden}.fd-tree__item{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0;border:0;border-top-color:var(--fd-tree-border-color,#eeeeef);list-style:none;border-top:0 solid #eeeeef}.fd-tree__item:after,.fd-tree__item:before{box-sizing:inherit;font-size:inherit}.fd-tree__row{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0 16px;margin:0;border:0;padding-left:var(--fd-tree-cell-spacing,16px);padding-right:var(--fd-tree-cell-spacing,16px);display:flex;align-items:center;position:relative;transition:background-color 125ms ease-in}.fd-tree__row:after,.fd-tree__row:before{box-sizing:inherit;font-size:inherit}.fd-tree__row .is-hover,.fd-tree__row:hover{background-color:#fafafa;background-color:var(--fd-color-background-hover,#fafafa)}.fd-tree__row--header{color:#6a6d70;color:var(--fd-tree-header-color,#6a6d70);background-color:#eeeeef;background-color:var(--fd-tree-header-background-color,#eeeeef);text-transform:uppercase}.fd-tree__row--header .is-hover,.fd-tree__row--header:hover{background-color:initial}.fd-tree__row.is-selected,.fd-tree__row[aria-selected=true]{background-color:rgba(10,110,209,.07);background-color:var(--fd-color-background-selected,rgba(10,110,209,.07))}.fd-tree__col{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:12px 0;margin:0;border:0;flex:1;padding-left:30px}.fd-tree__col:after,.fd-tree__col:before{box-sizing:inherit;font-size:inherit}.fd-tree__col[dir=rtl],[dir=rtl] .fd-tree__col{padding-left:0;padding-right:30px}.fd-tree__col--control{flex:auto;width:20%}.fd-tree__group--sublevel-1 .fd-tree__col--control{padding-left:60px}.fd-tree__group--sublevel-1 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-1 .fd-tree__col--control{padding-left:0;padding-right:60px}.fd-tree__group--sublevel-2 .fd-tree__col--control{padding-left:90px}.fd-tree__group--sublevel-2 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-2 .fd-tree__col--control{padding-left:0;padding-right:90px}.fd-tree__group--sublevel-3 .fd-tree__col--control{padding-left:120px}.fd-tree__group--sublevel-3 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-3 .fd-tree__col--control{padding-left:0;padding-right:120px}.fd-tree__group--sublevel-4 .fd-tree__col--control{padding-left:150px}.fd-tree__group--sublevel-4 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-4 .fd-tree__col--control{padding-left:0;padding-right:150px}.fd-tree__group--sublevel-5 .fd-tree__col--control{padding-left:180px}.fd-tree__group--sublevel-5 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-5 .fd-tree__col--control{padding-left:0;padding-right:180px}.fd-tree__group--sublevel-6 .fd-tree__col--control{padding-left:210px}.fd-tree__group--sublevel-6 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-6 .fd-tree__col--control{padding-left:0;padding-right:210px}.fd-tree__group--sublevel-7 .fd-tree__col--control{padding-left:240px}.fd-tree__group--sublevel-7 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-7 .fd-tree__col--control{padding-left:0;padding-right:240px}.fd-tree__group--sublevel-8 .fd-tree__col--control{padding-left:270px}.fd-tree__group--sublevel-8 .fd-tree__col--control[dir=rtl],[dir=rtl] .fd-tree__group--sublevel-8 .fd-tree__col--control{padding-left:0;padding-right:270px}.fd-tree__col--actions{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0;border:0;text-align:right}.fd-tree__col--actions:after,.fd-tree__col--actions:before{box-sizing:inherit;font-size:inherit}.fd-tree__col--actions[dir=rtl],[dir=rtl] .fd-tree__col--actions{text-align:left}.fd-tree__control{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:var(--sapTextColor,#32363a);font-family:\"72\",\"72full\",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, \"72\", \"72full\", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;display:inline-block;margin:-8px 12px 0 -36px;padding:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:0;border:0;text-decoration:none;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;background-color:transparent;border-radius:.25rem;border-radius:var(--sapButton_BorderCornerRadius,.25rem);position:absolute;top:calc(50% - 9px);width:34px;height:34px;transform:rotate(180deg);vertical-align:middle;transition:transform 125ms linear;color:#0a6ed1;color:var(--fd-color-action-1,#0a6ed1)}.fd-tree__control:after,.fd-tree__control:before{box-sizing:inherit;font-size:inherit}.fd-tree__control::-moz-focus-inner{border:0}.fd-tree__control:before{font-family:SAP-icons;font-style:normal;font-weight:400;text-align:center;display:inline-block;text-decoration:inherit;text-transform:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;speak:none;content:\"\uE1EB\";font-size:14px;line-height:1.42857}.fd-tree__control.is-focus,.fd-tree__control:focus{box-shadow:0 0 0 1px #085caf;box-shadow:0 0 0 1px var(--fd-color-action-focus,#085caf);z-index:5}.fd-tree__control[dir=rtl],[dir=rtl] .fd-tree__control{margin-right:-40px;transform:rotate(0)}.fd-tree__control.is-pressed{transform:rotate(270deg)}"]
            }] }
];
TreeComponent.propDecorators = {
    headers: [{ type: Input }],
    treeData: [{ type: Input }],
    hideAll: [{ type: Input }],
    displayTreeActions: [{ type: Input }],
    editRowClicked: [{ type: Output }],
    deleteRowClicked: [{ type: Output }],
    treeChildren: [{ type: ViewChildren, args: [TreeChildComponent,] }]
};
if (false) {
    /** @type {?} */
    TreeComponent.prototype.headers;
    /** @type {?} */
    TreeComponent.prototype.treeData;
    /** @type {?} */
    TreeComponent.prototype.hideAll;
    /** @type {?} */
    TreeComponent.prototype.displayTreeActions;
    /** @type {?} */
    TreeComponent.prototype.editRowClicked;
    /** @type {?} */
    TreeComponent.prototype.deleteRowClicked;
    /** @type {?} */
    TreeComponent.prototype.treeChildren;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJlZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZnVuZGFtZW50YWwtbmd4L2NvcmUvIiwic291cmNlcyI6WyJsaWIvdHJlZS90cmVlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFFSCxTQUFTLEVBQ1QsWUFBWSxFQUNaLEtBQUssRUFFTCxNQUFNLEVBQ04sU0FBUyxFQUNULFlBQVksRUFDWixpQkFBaUIsRUFDcEIsTUFBTSxlQUFlLENBQUM7QUFHdkIsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFRNUQsTUFBTSxPQUFPLGFBQWE7SUFOMUI7UUFlYyxtQkFBYyxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO1FBRTVELHFCQUFnQixHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO0lBdUU1RSxDQUFDOzs7O0lBbkVHLFFBQVE7UUFDSixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztJQUN6QixDQUFDOzs7O0lBRUQsa0JBQWtCO1FBQ2QsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFO1lBQ3ZDLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTzs7OztZQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUN4QixJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDM0IsSUFBSSxDQUFDLHdCQUF3QixDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsaUNBQWlDO1lBQ3pFLENBQUMsRUFBQyxDQUFDO1NBQ047SUFDTCxDQUFDOzs7O0lBRUQsZ0JBQWdCO1FBQ1osSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDN0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPOzs7O1FBQUMsS0FBSyxDQUFDLEVBQUU7WUFDOUIsS0FBSyxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM5QyxDQUFDLEVBQUMsQ0FBQztJQUNQLENBQUM7Ozs7OztJQUVELGFBQWEsQ0FBQyxHQUFHLEVBQUUsS0FBSztRQUNwQixJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUU7WUFDWCxHQUFHLENBQUMsYUFBYSxHQUFHLDJCQUEyQixHQUFHLEtBQUssQ0FBQztTQUMzRDtRQUNELElBQUksR0FBRyxDQUFDLFFBQVEsRUFBRTtZQUNkLEdBQUcsQ0FBQyxRQUFRLENBQUMsT0FBTzs7OztZQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUN6QixJQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ3JDLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLGtDQUFrQztZQUM1RSxDQUFDLEVBQUMsQ0FBQztTQUNOO0lBQ0wsQ0FBQzs7Ozs7SUFFRCx3QkFBd0IsQ0FBQyxHQUFHO1FBQ3hCLElBQ0ksR0FBRztZQUNILEdBQUcsQ0FBQyxPQUFPO1lBQ1gsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNO1lBQ2xCLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxRQUFRO1lBQ2xDLElBQUksQ0FBQyxPQUFPO1lBQ1osSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQ3JCO1lBQ0UsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRTtnQkFDN0MsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7YUFDeEI7U0FDSjthQUFNLElBQ0gsR0FBRztZQUNILEdBQUcsQ0FBQyxPQUFPO1lBQ1gsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNO1lBQ2xCLE9BQU8sR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxRQUFRO1lBQ2xDLElBQUksQ0FBQyxPQUFPO1lBQ1osSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQ3JCO1lBQ0UsT0FBTyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRTtnQkFDN0MsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7b0JBQ2IsV0FBVyxFQUFFLEVBQUU7aUJBQ2xCLENBQUMsQ0FBQzthQUNOO1NBQ0o7SUFDTCxDQUFDOzs7OztJQUVELFdBQVcsQ0FBQyxHQUFHO1FBQ1gsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbEMsQ0FBQzs7Ozs7SUFFRCxhQUFhLENBQUMsR0FBRztRQUNiLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDcEMsQ0FBQzs7O1lBdkZKLFNBQVMsU0FBQztnQkFDUCxRQUFRLEVBQUUsU0FBUztnQkFDbkIseS9CQUFvQztnQkFDcEMsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7O2FBRXhDOzs7c0JBRUksS0FBSzt1QkFFTCxLQUFLO3NCQUVMLEtBQUs7aUNBRUwsS0FBSzs2QkFFTCxNQUFNOytCQUVOLE1BQU07MkJBRU4sWUFBWSxTQUFDLGtCQUFrQjs7OztJQVpoQyxnQ0FBMkI7O0lBRTNCLGlDQUFtQzs7SUFFbkMsZ0NBQTBCOztJQUUxQiwyQ0FBcUM7O0lBRXJDLHVDQUFzRTs7SUFFdEUseUNBQXdFOztJQUV4RSxxQ0FBOEUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICAgIEFmdGVyQ29udGVudEluaXQsXG4gICAgQ29tcG9uZW50LFxuICAgIEV2ZW50RW1pdHRlcixcbiAgICBJbnB1dCxcbiAgICBPbkluaXQsXG4gICAgT3V0cHV0LFxuICAgIFF1ZXJ5TGlzdCxcbiAgICBWaWV3Q2hpbGRyZW4sXG4gICAgVmlld0VuY2Fwc3VsYXRpb25cbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFRyZWVSb3dPYmplY3QgfSBmcm9tICcuL3RyZWUtcm93LW9iamVjdC5tb2RlbCc7XG5pbXBvcnQgeyBUcmVlQ2hpbGRDb21wb25lbnQgfSBmcm9tICcuL3RyZWUtY2hpbGQuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdmZC10cmVlJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vdHJlZS5jb21wb25lbnQuaHRtbCcsXG4gICAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgICBzdHlsZVVybHM6IFsnLi90cmVlLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgVHJlZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJDb250ZW50SW5pdCB7XG4gICAgQElucHV0KCkgaGVhZGVyczogc3RyaW5nW107XG5cbiAgICBASW5wdXQoKSB0cmVlRGF0YTogVHJlZVJvd09iamVjdFtdO1xuXG4gICAgQElucHV0KCkgaGlkZUFsbDogYm9vbGVhbjtcblxuICAgIEBJbnB1dCgpIGRpc3BsYXlUcmVlQWN0aW9uczogYm9vbGVhbjtcblxuICAgIEBPdXRwdXQoKSBlZGl0Um93Q2xpY2tlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAgIEBPdXRwdXQoKSBkZWxldGVSb3dDbGlja2VkOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gICAgQFZpZXdDaGlsZHJlbihUcmVlQ2hpbGRDb21wb25lbnQpIHRyZWVDaGlsZHJlbjogUXVlcnlMaXN0PFRyZWVDaGlsZENvbXBvbmVudD47XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5oaWRlQWxsID0gZmFsc2U7XG4gICAgfVxuXG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xuICAgICAgICBpZiAodGhpcy50cmVlRGF0YSAmJiB0aGlzLnRyZWVEYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy50cmVlRGF0YS5mb3JFYWNoKHJvdyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDaGlsZERlcHRoKHJvdywgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFbXB0eVRyYWlsaW5nQ2VsbHMocm93KTsgLy8gaGFuZGxlIGVtcHR5IGNlbGxzIGZvciBwYXJlbnRzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRvZ2dsZURpc3BsYXlBbGwoKSB7XG4gICAgICAgIHRoaXMuaGlkZUFsbCA9ICF0aGlzLmhpZGVBbGw7XG4gICAgICAgIHRoaXMudHJlZUNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgICAgICAgY2hpbGQudG9nZ2xlRGlzcGxheUNoaWxkcmVuKHRoaXMuaGlkZUFsbCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldENoaWxkRGVwdGgocm93LCBkZXB0aCkge1xuICAgICAgICBpZiAoZGVwdGggPiAwKSB7XG4gICAgICAgICAgICByb3cuc3VibGV2ZWxDbGFzcyA9ICdmZC10cmVlX19ncm91cC0tc3VibGV2ZWwtJyArIGRlcHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyb3cuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIHJvdy5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldENoaWxkRGVwdGgoY2hpbGQsIGRlcHRoICsgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFbXB0eVRyYWlsaW5nQ2VsbHMoY2hpbGQpOyAvLyBoYW5kbGUgZW1wdHkgY2VsbHMgZm9yIGNoaWxkcmVuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUVtcHR5VHJhaWxpbmdDZWxscyhyb3cpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcm93ICYmXG4gICAgICAgICAgICByb3cucm93RGF0YSAmJlxuICAgICAgICAgICAgcm93LnJvd0RhdGEubGVuZ3RoICYmXG4gICAgICAgICAgICB0eXBlb2Ygcm93LnJvd0RhdGFbMF0gIT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICB0aGlzLmhlYWRlcnMgJiZcbiAgICAgICAgICAgIHRoaXMuaGVhZGVycy5sZW5ndGhcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB3aGlsZSAocm93LnJvd0RhdGEubGVuZ3RoIDwgdGhpcy5oZWFkZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJvdy5yb3dEYXRhLnB1c2goJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgcm93ICYmXG4gICAgICAgICAgICByb3cucm93RGF0YSAmJlxuICAgICAgICAgICAgcm93LnJvd0RhdGEubGVuZ3RoICYmXG4gICAgICAgICAgICB0eXBlb2Ygcm93LnJvd0RhdGFbMF0gPT09ICdvYmplY3QnICYmXG4gICAgICAgICAgICB0aGlzLmhlYWRlcnMgJiZcbiAgICAgICAgICAgIHRoaXMuaGVhZGVycy5sZW5ndGhcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB3aGlsZSAocm93LnJvd0RhdGEubGVuZ3RoIDwgdGhpcy5oZWFkZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJvdy5yb3dEYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dDogJydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGVkaXRDbGlja2VkKHJvdykge1xuICAgICAgICB0aGlzLmVkaXRSb3dDbGlja2VkLmVtaXQocm93KTtcbiAgICB9XG5cbiAgICBkZWxldGVDbGlja2VkKHJvdykge1xuICAgICAgICB0aGlzLmRlbGV0ZVJvd0NsaWNrZWQuZW1pdChyb3cpO1xuICAgIH1cbn1cbiJdfQ==