/**
 * @fileoverview added by tsickle
 * Generated from: lib/utils/drag-and-drop/dnd-container/dnd-container.directive.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ContentChild, Directive, ElementRef, EventEmitter, Input, Output } from '@angular/core';
import { CdkDrag } from '@angular/cdk/drag-drop';
var DndContainerDirective = /** @class */ (function () {
    function DndContainerDirective(element) {
        this.element = element;
        /**
         * Class added to element, when it's dragged.
         */
        this.CLASS_WHEN_ELEMENT_DRAGGED = 'fd-dnd-on-drag';
        /**
         * Event thrown when the element is moved by 1px
         */
        this.moved = new EventEmitter();
        /**
         * Event thrown when the element is released
         */
        this.released = new EventEmitter();
        /**
         * Event thrown when the element is started to be dragged
         */
        this.started = new EventEmitter();
        /**
         * Whether this element should stick in one place, without changing position
         */
        this.stickInPlace = false;
    }
    /** @hidden */
    /**
     * @hidden
     * @param {?} isBefore
     * @param {?} listMode
     * @return {?}
     */
    DndContainerDirective.prototype.getElementChord = /**
     * @hidden
     * @param {?} isBefore
     * @param {?} listMode
     * @return {?}
     */
    function (isBefore, listMode) {
        /**
         * Takes distance from the beginning of window page
         * @type {?}
         */
        var rect = (/** @type {?} */ (this.element.nativeElement.getBoundingClientRect()));
        /** @type {?} */
        var position = isBefore ? 'before' : 'after';
        /**
         * Depending on the position, gets the left or right side of element
         * @type {?}
         */
        var x = rect.x + (isBefore || listMode ? 0 : this.element.nativeElement.offsetWidth);
        /** Vertically distance is counted by distance from top of the side + half of the element height */
        return {
            x: x,
            position: position,
            y: rect.y + (this.element.nativeElement.offsetHeight / 2),
            stickToPosition: this.stickInPlace
        };
    };
    /** @hidden */
    /**
     * @hidden
     * @return {?}
     */
    DndContainerDirective.prototype.ngAfterContentInit = /**
     * @hidden
     * @return {?}
     */
    function () {
        var _this = this;
        this.cdkDrag.moved.subscribe((/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            _this.onCdkMove(event);
        }));
        this.cdkDrag.released.subscribe((/**
         * @return {?}
         */
        function () {
            _this.onCdkDragReleased();
        }));
        this.cdkDrag.started.subscribe((/**
         * @return {?}
         */
        function () {
            _this.onCdkDragStart();
        }));
    };
    /** @hidden */
    /**
     * @hidden
     * @param {?} cdkMovedEvent
     * @return {?}
     */
    DndContainerDirective.prototype.onCdkMove = /**
     * @hidden
     * @param {?} cdkMovedEvent
     * @return {?}
     */
    function (cdkMovedEvent) {
        this.moved.emit(cdkMovedEvent);
    };
    /** @hidden */
    /**
     * @hidden
     * @return {?}
     */
    DndContainerDirective.prototype.onCdkDragReleased = /**
     * @hidden
     * @return {?}
     */
    function () {
        /** Remove class which is added, when element is dragged */
        this.element.nativeElement.classList.remove(this.CLASS_WHEN_ELEMENT_DRAGGED);
        this.released.emit();
        /** Resets the position of element. */
        this.cdkDrag.reset();
        /** Removes placeholder element */
        this.removePlaceholder();
    };
    /** @hidden */
    /**
     * @hidden
     * @return {?}
     */
    DndContainerDirective.prototype.onCdkDragStart = /**
     * @hidden
     * @return {?}
     */
    function () {
        /** Adds class */
        this.element.nativeElement.classList.add(this.CLASS_WHEN_ELEMENT_DRAGGED);
        if (!this.placeholderElement) {
            this.createPlaceHolder();
        }
        this.started.emit();
    };
    /** @hidden */
    /**
     * @hidden
     * @return {?}
     */
    DndContainerDirective.prototype.removePlaceholder = /**
     * @hidden
     * @return {?}
     */
    function () {
        if (this.placeholderElement) {
            this.placeholderElement.remove();
            this.placeholderElement = null;
        }
    };
    /** @hidden */
    /**
     * @hidden
     * @return {?}
     */
    DndContainerDirective.prototype.removeLine = /**
     * @hidden
     * @return {?}
     */
    function () {
        if (this.lineElement) {
            this.lineElement.remove();
            this.lineElement = null;
        }
    };
    /** @hidden */
    /**
     * @hidden
     * @param {?} position
     * @param {?} listMode
     * @return {?}
     */
    DndContainerDirective.prototype.createLine = /**
     * @hidden
     * @param {?} position
     * @param {?} listMode
     * @return {?}
     */
    function (position, listMode) {
        /** Creating of line element */
        this.lineElement = document.createElement('DIV');
        if (listMode) {
            this.lineElement.classList.add('drop-area__line');
            this.lineElement.classList.add('drop-area__line--horizontal');
        }
        else {
            this.lineElement.classList.add('drop-area__line');
            this.lineElement.classList.add('drop-area__line--vertical');
        }
        if (position === 'after') {
            this.lineElement.classList.add('after');
        }
        if (position === 'before') {
            this.lineElement.classList.add('before');
        }
        /** Putting element to the container */
        this.element.nativeElement.appendChild(this.lineElement);
    };
    /** @hidden */
    /**
     * @hidden
     * @private
     * @return {?}
     */
    DndContainerDirective.prototype.createPlaceHolder = /**
     * @hidden
     * @private
     * @return {?}
     */
    function () {
        /**
         * Cloning container element
         * @type {?}
         */
        var clone = this.cdkDrag.element.nativeElement.cloneNode(true);
        /** Taking cloned element reference */
        this.placeholderElement = clone.firstChild.parentElement;
        this.placeholderElement.classList.add('fd-dnd-placeholder');
        /** Including element to the container */
        this.element.nativeElement.appendChild(clone);
    };
    DndContainerDirective.decorators = [
        { type: Directive, args: [{
                    // tslint:disable-next-line:directive-selector
                    selector: '[fd-dnd-container]',
                    host: {
                        'class': 'fd-dnd-container'
                    }
                },] }
    ];
    /** @nocollapse */
    DndContainerDirective.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    DndContainerDirective.propDecorators = {
        moved: [{ type: Output }],
        released: [{ type: Output }],
        started: [{ type: Output }],
        stickInPlace: [{ type: Input }],
        cdkDrag: [{ type: ContentChild, args: [CdkDrag, { static: false },] }]
    };
    return DndContainerDirective;
}());
export { DndContainerDirective };
if (false) {
    /**
     * Class added to element, when it's dragged.
     * @type {?}
     */
    DndContainerDirective.prototype.CLASS_WHEN_ELEMENT_DRAGGED;
    /**
     * @type {?}
     * @private
     */
    DndContainerDirective.prototype.placeholderElement;
    /**
     * @type {?}
     * @private
     */
    DndContainerDirective.prototype.lineElement;
    /**
     * Event thrown when the element is moved by 1px
     * @type {?}
     */
    DndContainerDirective.prototype.moved;
    /**
     * Event thrown when the element is released
     * @type {?}
     */
    DndContainerDirective.prototype.released;
    /**
     * Event thrown when the element is started to be dragged
     * @type {?}
     */
    DndContainerDirective.prototype.started;
    /**
     * Whether this element should stick in one place, without changing position
     * @type {?}
     */
    DndContainerDirective.prototype.stickInPlace;
    /**
     * @hidden
     * @type {?}
     */
    DndContainerDirective.prototype.cdkDrag;
    /** @type {?} */
    DndContainerDirective.prototype.element;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG5kLWNvbnRhaW5lci5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AZnVuZGFtZW50YWwtbmd4L2NvcmUvIiwic291cmNlcyI6WyJsaWIvdXRpbHMvZHJhZy1hbmQtZHJvcC9kbmQtY29udGFpbmVyL2RuZC1jb250YWluZXIuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUVILFlBQVksRUFBRSxTQUFTLEVBQ3ZCLFVBQVUsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUMvQixNQUFNLEVBQ1QsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLE9BQU8sRUFBZSxNQUFNLHdCQUF3QixDQUFDO0FBRzlEO0lBa0NJLCtCQUNXLE9BQW1CO1FBQW5CLFlBQU8sR0FBUCxPQUFPLENBQVk7Ozs7UUF6QnJCLCtCQUEwQixHQUFXLGdCQUFnQixDQUFDOzs7O1FBT3RELFVBQUssR0FBOEIsSUFBSSxZQUFZLEVBQWUsQ0FBQzs7OztRQUluRSxhQUFRLEdBQXVCLElBQUksWUFBWSxFQUFRLENBQUM7Ozs7UUFJeEQsWUFBTyxHQUF1QixJQUFJLFlBQVksRUFBUSxDQUFDOzs7O1FBR3ZELGlCQUFZLEdBQVksS0FBSyxDQUFDO0lBUXBDLENBQUM7SUFFSixjQUFjOzs7Ozs7O0lBQ1AsK0NBQWU7Ozs7OztJQUF0QixVQUF1QixRQUFpQixFQUFFLFFBQWlCOzs7OztZQUdqRCxJQUFJLEdBQUcsbUJBQVMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMscUJBQXFCLEVBQUUsRUFBQTs7WUFFbEUsUUFBUSxHQUFpQixRQUFRLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsT0FBTzs7Ozs7WUFHdEQsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxRQUFRLElBQUksUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFD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QjtpQkFDSjs7OztnQkFaRyxVQUFVOzs7d0JBc0JULE1BQU07MkJBSU4sTUFBTTswQkFJTixNQUFNOytCQUlOLEtBQUs7MEJBR0wsWUFBWSxTQUFDLE9BQU8sRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7O0lBdUg1Qyw0QkFBQztDQUFBLEFBdEpELElBc0pDO1NBL0lZLHFCQUFxQjs7Ozs7O0lBRzlCLDJEQUErRDs7Ozs7SUFFL0QsbURBQXdDOzs7OztJQUV4Qyw0Q0FBaUM7Ozs7O0lBRWpDLHNDQUM0RTs7Ozs7SUFHNUUseUNBQ2lFOzs7OztJQUdqRSx3Q0FDZ0U7Ozs7O0lBR2hFLDZDQUF1Qzs7Ozs7SUFHdkMsd0NBQ2lCOztJQUdiLHdDQUEwQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQWZ0ZXJDb250ZW50SW5pdCxcbiAgICBDb250ZW50Q2hpbGQsIERpcmVjdGl2ZSxcbiAgICBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIElucHV0LFxuICAgIE91dHB1dFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENka0RyYWcsIENka0RyYWdNb3ZlIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2RyYWctZHJvcCc7XG5pbXBvcnQgeyBFbGVtZW50Q2hvcmQsIExpbmtQb3NpdGlvbiB9IGZyb20gJy4uL2RuZC1saXN0L2RuZC1saXN0LmRpcmVjdGl2ZSc7XG5cbkBEaXJlY3RpdmUoe1xuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpkaXJlY3RpdmUtc2VsZWN0b3JcbiAgICBzZWxlY3RvcjogJ1tmZC1kbmQtY29udGFpbmVyXScsXG4gICAgaG9zdDoge1xuICAgICAgICAnY2xhc3MnOiAnZmQtZG5kLWNvbnRhaW5lcidcbiAgICB9XG59KVxuZXhwb3J0IGNsYXNzIERuZENvbnRhaW5lckRpcmVjdGl2ZSBpbXBsZW1lbnRzIEFmdGVyQ29udGVudEluaXQge1xuXG4gICAgLyoqIENsYXNzIGFkZGVkIHRvIGVsZW1lbnQsIHdoZW4gaXQncyBkcmFnZ2VkLiAqL1xuICAgIHJlYWRvbmx5IENMQVNTX1dIRU5fRUxFTUVOVF9EUkFHR0VEOiBzdHJpbmcgPSAnZmQtZG5kLW9uLWRyYWcnO1xuXG4gICAgcHJpdmF0ZSBwbGFjZWhvbGRlckVsZW1lbnQ6IEhUTUxFbGVtZW50O1xuXG4gICAgcHJpdmF0ZSBsaW5lRWxlbWVudDogSFRNTEVsZW1lbnQ7XG4gICAgLyoqIEV2ZW50IHRocm93biB3aGVuIHRoZSBlbGVtZW50IGlzIG1vdmVkIGJ5IDFweCAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHJlYWRvbmx5IG1vdmVkOiBFdmVudEVtaXR0ZXI8Q2RrRHJhZ01vdmU+ID0gbmV3IEV2ZW50RW1pdHRlcjxDZGtEcmFnTW92ZT4oKTtcblxuICAgIC8qKiBFdmVudCB0aHJvd24gd2hlbiB0aGUgZWxlbWVudCBpcyByZWxlYXNlZCAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHJlYWRvbmx5IHJlbGVhc2VkOiBFdmVudEVtaXR0ZXI8dm9pZD4gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG5cbiAgICAvKiogRXZlbnQgdGhyb3duIHdoZW4gdGhlIGVsZW1lbnQgaXMgc3RhcnRlZCB0byBiZSBkcmFnZ2VkICovXG4gICAgQE91dHB1dCgpXG4gICAgcmVhZG9ubHkgc3RhcnRlZDogRXZlbnRFbWl0dGVyPHZvaWQ+ID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuXG4gICAgLyoqIFdoZXRoZXIgdGhpcyBlbGVtZW50IHNob3VsZCBzdGljayBpbiBvbmUgcGxhY2UsIHdpdGhvdXQgY2hhbmdpbmcgcG9zaXRpb24gKi9cbiAgICBASW5wdXQoKSBzdGlja0luUGxhY2U6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgQENvbnRlbnRDaGlsZChDZGtEcmFnLCB7IHN0YXRpYzogZmFsc2UgfSlcbiAgICBjZGtEcmFnOiBDZGtEcmFnO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHB1YmxpYyBlbGVtZW50OiBFbGVtZW50UmVmLFxuICAgICkge31cblxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgcHVibGljIGdldEVsZW1lbnRDaG9yZChpc0JlZm9yZTogYm9vbGVhbiwgbGlzdE1vZGU6IGJvb2xlYW4pOiBFbGVtZW50Q2hvcmQge1xuXG4gICAgICAgIC8qKiBUYWtlcyBkaXN0YW5jZSBmcm9tIHRoZSBiZWdpbm5pbmcgb2Ygd2luZG93IHBhZ2UgKi9cbiAgICAgICAgY29uc3QgcmVjdCA9IDxET01SZWN0PnRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIGNvbnN0IHBvc2l0aW9uOiBMaW5rUG9zaXRpb24gPSBpc0JlZm9yZSA/ICdiZWZvcmUnIDogJ2FmdGVyJztcblxuICAgICAgICAvKiogRGVwZW5kaW5nIG9uIHRoZSBwb3NpdGlvbiwgZ2V0cyB0aGUgbGVmdCBvciByaWdodCBzaWRlIG9mIGVsZW1lbnQgKi9cbiAgICAgICAgY29uc3QgeCA9IHJlY3QueCArIChpc0JlZm9yZSB8fCBsaXN0TW9kZSA/IDAgOiB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5vZmZzZXRXaWR0aCk7XG5cbiAgICAgICAgLyoqIFZlcnRpY2FsbHkgZGlzdGFuY2UgaXMgY291bnRlZCBieSBkaXN0YW5jZSBmcm9tIHRvcCBvZiB0aGUgc2lkZSArIGhhbGYgb2YgdGhlIGVsZW1lbnQgaGVpZ2h0ICovXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB4LFxuICAgICAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgICAgICAgeTogcmVjdC55ICsgKHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50Lm9mZnNldEhlaWdodCAvIDIpLFxuICAgICAgICAgICAgc3RpY2tUb1Bvc2l0aW9uOiB0aGlzLnN0aWNrSW5QbGFjZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgcHVibGljIG5nQWZ0ZXJDb250ZW50SW5pdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jZGtEcmFnLm1vdmVkLnN1YnNjcmliZSgoZXZlbnQ6IENka0RyYWdNb3ZlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uQ2RrTW92ZShldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNka0RyYWcucmVsZWFzZWQuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25DZGtEcmFnUmVsZWFzZWQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2RrRHJhZy5zdGFydGVkLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uQ2RrRHJhZ1N0YXJ0KCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgcHVibGljIG9uQ2RrTW92ZShjZGtNb3ZlZEV2ZW50OiBDZGtEcmFnTW92ZSk6IHZvaWQge1xuICAgICAgICB0aGlzLm1vdmVkLmVtaXQoY2RrTW92ZWRFdmVudCk7XG4gICAgfVxuXG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBwdWJsaWMgb25DZGtEcmFnUmVsZWFzZWQoKTogdm9pZCB7XG4gICAgICAgIC8qKiBSZW1vdmUgY2xhc3Mgd2hpY2ggaXMgYWRkZWQsIHdoZW4gZWxlbWVudCBpcyBkcmFnZ2VkICovXG4gICAgICAgIHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5DTEFTU19XSEVOX0VMRU1FTlRfRFJBR0dFRCk7XG4gICAgICAgIHRoaXMucmVsZWFzZWQuZW1pdCgpO1xuXG4gICAgICAgIC8qKiBSZXNldHMgdGhlIHBvc2l0aW9uIG9mIGVsZW1lbnQuICovXG4gICAgICAgIHRoaXMuY2RrRHJhZy5yZXNldCgpO1xuXG4gICAgICAgIC8qKiBSZW1vdmVzIHBsYWNlaG9sZGVyIGVsZW1lbnQgKi9cbiAgICAgICAgdGhpcy5yZW1vdmVQbGFjZWhvbGRlcigpO1xuICAgIH1cblxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgcHVibGljIG9uQ2RrRHJhZ1N0YXJ0KCk6IHZvaWQge1xuICAgICAgICAvKiogQWRkcyBjbGFzcyAqL1xuICAgICAgICB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuQ0xBU1NfV0hFTl9FTEVNRU5UX0RSQUdHRUQpO1xuICAgICAgICBpZiAoIXRoaXMucGxhY2Vob2xkZXJFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVBsYWNlSG9sZGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGFydGVkLmVtaXQoKTtcbiAgICB9XG5cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHB1YmxpYyByZW1vdmVQbGFjZWhvbGRlcigpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMucGxhY2Vob2xkZXJFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnBsYWNlaG9sZGVyRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMucGxhY2Vob2xkZXJFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBAaGlkZGVuICovXG4gICAgcHVibGljIHJlbW92ZUxpbmUoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLmxpbmVFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmxpbmVFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5saW5lRWxlbWVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQGhpZGRlbiAqL1xuICAgIHB1YmxpYyBjcmVhdGVMaW5lKHBvc2l0aW9uOiBMaW5rUG9zaXRpb24sIGxpc3RNb2RlOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIC8qKiBDcmVhdGluZyBvZiBsaW5lIGVsZW1lbnQgKi9cbiAgICAgICAgdGhpcy5saW5lRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuICAgICAgICBpZiAobGlzdE1vZGUpIHtcbiAgICAgICAgICAgIHRoaXMubGluZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZHJvcC1hcmVhX19saW5lJyk7XG4gICAgICAgICAgICB0aGlzLmxpbmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Ryb3AtYXJlYV9fbGluZS0taG9yaXpvbnRhbCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5saW5lRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdkcm9wLWFyZWFfX2xpbmUnKTtcbiAgICAgICAgICAgIHRoaXMubGluZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZHJvcC1hcmVhX19saW5lLS12ZXJ0aWNhbCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gJ2FmdGVyJykge1xuICAgICAgICAgICAgdGhpcy5saW5lRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdhZnRlcicpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gJ2JlZm9yZScpIHtcbiAgICAgICAgICAgIHRoaXMubGluZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYmVmb3JlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiogUHV0dGluZyBlbGVtZW50IHRvIHRoZSBjb250YWluZXIgKi9cbiAgICAgICAgdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5saW5lRWxlbWVudCk7XG4gICAgfVxuXG4gICAgLyoqIEBoaWRkZW4gKi9cbiAgICBwcml2YXRlIGNyZWF0ZVBsYWNlSG9sZGVyKCk6IHZvaWQge1xuICAgICAgICAvKiogQ2xvbmluZyBjb250YWluZXIgZWxlbWVudCAqL1xuICAgICAgICBjb25zdCBjbG9uZSA9IHRoaXMuY2RrRHJhZy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgICAgIC8qKiBUYWtpbmcgY2xvbmVkIGVsZW1lbnQgcmVmZXJlbmNlICovXG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXJFbGVtZW50ID0gY2xvbmUuZmlyc3RDaGlsZC5wYXJlbnRFbGVtZW50O1xuXG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXJFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ZkLWRuZC1wbGFjZWhvbGRlcicpO1xuXG4gICAgICAgIC8qKiBJbmNsdWRpbmcgZWxlbWVudCB0byB0aGUgY29udGFpbmVyICovXG4gICAgICAgIHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LmFwcGVuZENoaWxkKGNsb25lKTtcbiAgICB9XG59XG4iXX0=