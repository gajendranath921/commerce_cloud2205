{"code":"var /* @ngInject */ CmsDragAndDropService_1;\r\nimport { __awaiter, __decorate, __metadata, __param } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { Inject } from '@angular/core';\r\nimport { DRAG_AND_DROP_EVENTS } from 'cmscommons';\r\nimport { DragAndDropService, GatewayFactory, ID_ATTRIBUTE, ISharedDataService, SeDowngradeService, SystemEventService, TYPE_ATTRIBUTE, UUID_ATTRIBUTE, YJQUERY_TOKEN } from 'smarteditcommons';\r\nexport const ENABLE_CLONE_ON_DROP = 'enableCloneComponentOnDrop';\r\nlet /* @ngInject */ CmsDragAndDropService = /* @ngInject */ CmsDragAndDropService_1 = class /* @ngInject */ CmsDragAndDropService {\r\n    constructor(dragAndDropService, gatewayFactory, sharedDataService, systemEventService, yjQuery) {\r\n        this.dragAndDropService = dragAndDropService;\r\n        this.gatewayFactory = gatewayFactory;\r\n        this.sharedDataService = sharedDataService;\r\n        this.systemEventService = systemEventService;\r\n        this.yjQuery = yjQuery;\r\n        this.gateway = this.gatewayFactory.createGateway('cmsDragAndDrop');\r\n    }\r\n    register() {\r\n        this.dragAndDropService.register({\r\n            id: /* @ngInject */ CmsDragAndDropService_1.CMS_DRAG_AND_DROP_ID,\r\n            sourceSelector: /* @ngInject */ CmsDragAndDropService_1.SOURCE_SELECTOR,\r\n            targetSelector: /* @ngInject */ CmsDragAndDropService_1.TARGET_SELECTOR,\r\n            startCallback: (event) => this.onStart(event),\r\n            stopCallback: () => this.onStop(),\r\n            enableScrolling: false\r\n        });\r\n    }\r\n    unregister() {\r\n        this.dragAndDropService.unregister([/* @ngInject */ CmsDragAndDropService_1.CMS_DRAG_AND_DROP_ID]);\r\n    }\r\n    apply() {\r\n        this.dragAndDropService.apply(null);\r\n    }\r\n    update() {\r\n        this.dragAndDropService.update(/* @ngInject */ CmsDragAndDropService_1.CMS_DRAG_AND_DROP_ID);\r\n    }\r\n    onStart(event) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const cloneOnDrop = yield this.sharedDataService.get(ENABLE_CLONE_ON_DROP);\r\n            const component = this.getSelector(event.target).closest(/* @ngInject */ CmsDragAndDropService_1.COMPONENT_SELECTOR);\r\n            const dragInfo = {\r\n                componentId: component.attr(ID_ATTRIBUTE),\r\n                componentUuid: component.attr(UUID_ATTRIBUTE),\r\n                componentType: component.attr(TYPE_ATTRIBUTE),\r\n                slotUuid: null,\r\n                slotId: null,\r\n                cloneOnDrop\r\n            };\r\n            this.gateway.publish(DRAG_AND_DROP_EVENTS.DRAG_STARTED, dragInfo);\r\n            this.systemEventService.publishAsync(DRAG_AND_DROP_EVENTS.DRAG_STARTED);\r\n        });\r\n    }\r\n    onStop() {\r\n        this.gateway.publish(DRAG_AND_DROP_EVENTS.DRAG_STOPPED, null);\r\n    }\r\n    getSelector(selector) {\r\n        return this.yjQuery(selector);\r\n    }\r\n};\r\n/* @ngInject */ CmsDragAndDropService.CMS_DRAG_AND_DROP_ID = 'se.cms.dragAndDrop';\r\n/* @ngInject */ CmsDragAndDropService.TARGET_SELECTOR = '';\r\n/* @ngInject */ CmsDragAndDropService.SOURCE_SELECTOR = \".smartEditComponent[data-smartedit-component-type!='ContentSlot']\";\r\n/* @ngInject */ CmsDragAndDropService.COMPONENT_SELECTOR = '.smartEditComponent';\r\n/* @ngInject */ CmsDragAndDropService = /* @ngInject */ CmsDragAndDropService_1 = __decorate([\r\n    SeDowngradeService(),\r\n    __param(4, Inject(YJQUERY_TOKEN)),\r\n    __metadata(\"design:paramtypes\", [DragAndDropService,\r\n        GatewayFactory,\r\n        ISharedDataService,\r\n        SystemEventService, Function])\r\n], /* @ngInject */ CmsDragAndDropService);\r\nexport { /* @ngInject */ CmsDragAndDropService };\r\n//# sourceMappingURL=CmsDragAndDropServiceOuter.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"CmsDragAndDropServiceOuter.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/services/CmsDragAndDropServiceOuter.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/services/CmsDragAndDropServiceOuter.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"angular\" />\r\n/// <reference types=\"jquery\" />\r\nimport { DragAndDropService, GatewayFactory, ISharedDataService, SystemEventService } from 'smarteditcommons';\r\nexport declare const ENABLE_CLONE_ON_DROP = \"enableCloneComponentOnDrop\";\r\nexport declare class CmsDragAndDropService {\r\n    private dragAndDropService;\r\n    private gatewayFactory;\r\n    private sharedDataService;\r\n    private systemEventService;\r\n    private yjQuery;\r\n    private static readonly CMS_DRAG_AND_DROP_ID;\r\n    private static readonly TARGET_SELECTOR;\r\n    private static readonly SOURCE_SELECTOR;\r\n    private static readonly COMPONENT_SELECTOR;\r\n    private gateway;\r\n    constructor(dragAndDropService: DragAndDropService, gatewayFactory: GatewayFactory, sharedDataService: ISharedDataService, systemEventService: SystemEventService, yjQuery: JQueryStatic);\r\n    register(): void;\r\n    unregister(): void;\r\n    apply(): void;\r\n    update(): void;\r\n    private onStart;\r\n    private onStop;\r\n    private getSelector;\r\n}\r\n"}}
