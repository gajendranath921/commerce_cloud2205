{"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { SeDowngradeComponent } from 'smarteditcommons';\r\nimport { PageTemplateService } from '../../../../../services/PageTemplateService';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"SelectPageTemplateComponent\", {\r\n    selector: 'se-select-page-template',\r\n    template: `<div class=\"se-page-type-step-template\"><div class=\"se-add-page__sub-header\"><div class=\"se-add-page__sub-header-title\">{{ 'se.cms.addpagewizard.pagetemplate.description' | translate }}</div><div class=\"se-input-group se-page-type-step-template-list-search\"><input type=\"text\" class=\"se-input-group__input-area ySEPage-list-search-input\" placeholder=\"{{ 'se.cms.pagewizard.templatestep.searchplaceholder' | translate }}\" [ngModel]=\"searchString\" (ngModelChange)=\"onSearchChange($event)\" name=\"query\"/> <span class=\"sap-icon--search se-input-group__addon\"></span><div *ngIf=\"searchString\" class=\"se-input-group__addon se-input-group__clear-btn\" (click)=\"clearSearch()\"><span class=\"sap-icon--decline\"></span></div></div></div><div class=\"se-add-page__list fd-menu\" *ngIf=\"pageTemplates.length > 0\"><div *ngFor=\"let template of filteredPageTemplates\" [ngClass]=\"{ 'is-selected': isSelected(template)}\" (click)=\"templateSelected(template)\" class=\"se-add-page__item se-add-page__item--page-template fd-menu__item\"><div class=\"se-add-page__item-title\">{{ template.name }}</div></div></div></div>`,\r\n    styles: [`.se-add-page__sub-header{padding-bottom:16px;color:#51555a}.se-add-page__sub-header-title{margin-bottom:8px}.se-add-page__list.fd-menu{border-top:1px solid #d9d9d9;padding:0}.se-add-page__item{cursor:pointer}.se-add-page__item--page-template{height:48px;display:flex;flex-direction:row;align-items:center}.se-add-page__item-title{font-weight:700}.se-add-page__item-description{white-space:normal}`],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n});\r\nlet /* @ngInject */ SelectPageTemplateComponent = class /* @ngInject */ SelectPageTemplateComponent {\r\n    constructor(pageTemplateService, cdr) {\r\n        this.pageTemplateService = pageTemplateService;\r\n        this.cdr = cdr;\r\n        this.searchString = '';\r\n        this.onTemplateSelected = new EventEmitter();\r\n        this.cache = {};\r\n        this.pageTemplates = [];\r\n    }\r\n    ngOnChanges(changes) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if ((_a = changes.pageTypeCode) === null || _a === void 0 ? void 0 : _a.currentValue) {\r\n                yield this.onInputUpdated();\r\n                this.setDefaultFilteredPageTemplates();\r\n                if (!this.cdr.destroyed) {\r\n                    this.cdr.detectChanges();\r\n                }\r\n            }\r\n        });\r\n    }\r\n    templateSelected(pageTemplate) {\r\n        this.selectedTemplate = pageTemplate;\r\n        this.onTemplateSelected.emit(pageTemplate);\r\n    }\r\n    isSelected(pageTemplate) {\r\n        var _a;\r\n        return pageTemplate.uid === ((_a = this.selectedTemplate) === null || _a === void 0 ? void 0 : _a.uid);\r\n    }\r\n    clearSearch() {\r\n        this.searchString = '';\r\n        this.setDefaultFilteredPageTemplates();\r\n    }\r\n    onSearchChange(value) {\r\n        this.searchString = value;\r\n        this.filterByQuery(this.searchString);\r\n    }\r\n    onInputUpdated() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.clearSearch();\r\n            this.selectedTemplate = null;\r\n            return this.setPageTemplates();\r\n        });\r\n    }\r\n    setPageTemplates() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.cache[this.pageTypeCode]) {\r\n                this.pageTemplates = this.cache[this.pageTypeCode];\r\n                return;\r\n            }\r\n            this.pageTemplates = [];\r\n            const pageTemplates = yield this.pageTemplateService.getPageTemplatesForType(this.uriContext, this.pageTypeCode);\r\n            this.cache[this.pageTypeCode] = pageTemplates.templates;\r\n            this.pageTemplates = this.cache[this.pageTypeCode];\r\n        });\r\n    }\r\n    filterByQuery(query) {\r\n        if (!query) {\r\n            this.setDefaultFilteredPageTemplates();\r\n            return;\r\n        }\r\n        this.filteredPageTemplates = this.pageTemplates.filter((template) => {\r\n            const terms = query.split(' ');\r\n            return terms.every((term) => template.name.toLowerCase().includes(term.toLowerCase()));\r\n        });\r\n    }\r\n    setDefaultFilteredPageTemplates() {\r\n        this.filteredPageTemplates = [...this.pageTemplates];\r\n    }\r\n};\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], /* @ngInject */ SelectPageTemplateComponent.prototype, \"uriContext\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], /* @ngInject */ SelectPageTemplateComponent.prototype, \"pageTypeCode\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", EventEmitter)\r\n], /* @ngInject */ SelectPageTemplateComponent.prototype, \"onTemplateSelected\", void 0);\r\n/* @ngInject */ SelectPageTemplateComponent = __decorate([\r\n    SeDowngradeComponent(),\r\n    Component({\r\n        selector: 'se-select-page-template',\r\n        template: `<div class=\"se-page-type-step-template\"><div class=\"se-add-page__sub-header\"><div class=\"se-add-page__sub-header-title\">{{ 'se.cms.addpagewizard.pagetemplate.description' | translate }}</div><div class=\"se-input-group se-page-type-step-template-list-search\"><input type=\"text\" class=\"se-input-group__input-area ySEPage-list-search-input\" placeholder=\"{{ 'se.cms.pagewizard.templatestep.searchplaceholder' | translate }}\" [ngModel]=\"searchString\" (ngModelChange)=\"onSearchChange($event)\" name=\"query\"/> <span class=\"sap-icon--search se-input-group__addon\"></span><div *ngIf=\"searchString\" class=\"se-input-group__addon se-input-group__clear-btn\" (click)=\"clearSearch()\"><span class=\"sap-icon--decline\"></span></div></div></div><div class=\"se-add-page__list fd-menu\" *ngIf=\"pageTemplates.length > 0\"><div *ngFor=\"let template of filteredPageTemplates\" [ngClass]=\"{ 'is-selected': isSelected(template)}\" (click)=\"templateSelected(template)\" class=\"se-add-page__item se-add-page__item--page-template fd-menu__item\"><div class=\"se-add-page__item-title\">{{ template.name }}</div></div></div></div>`,\r\n        styles: [`.se-add-page__sub-header{padding-bottom:16px;color:#51555a}.se-add-page__sub-header-title{margin-bottom:8px}.se-add-page__list.fd-menu{border-top:1px solid #d9d9d9;padding:0}.se-add-page__item{cursor:pointer}.se-add-page__item--page-template{height:48px;display:flex;flex-direction:row;align-items:center}.se-add-page__item-title{font-weight:700}.se-add-page__item-description{white-space:normal}`],\r\n        changeDetection: ChangeDetectionStrategy.OnPush\r\n    }),\r\n    __metadata(\"design:paramtypes\", [PageTemplateService, ChangeDetectorRef])\r\n], /* @ngInject */ SelectPageTemplateComponent);\r\nexport { /* @ngInject */ SelectPageTemplateComponent };\r\n//# sourceMappingURL=SelectPageTemplateComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/PageTemplateService.ts"],"map":"{\"version\":3,\"file\":\"SelectPageTemplateComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../../src/components/pages/addPageWizard/components/selectPageTemplate/SelectPageTemplateComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/pages/addPageWizard/components/selectPageTemplate/SelectPageTemplateComponent.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, EventEmitter, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { IUriContext, PageTemplateType } from 'smarteditcommons';\r\nimport { PageTemplateService } from '../../../../../services/PageTemplateService';\r\nexport declare class SelectPageTemplateComponent implements OnChanges {\r\n    private pageTemplateService;\r\n    private cdr;\r\n    uriContext: IUriContext;\r\n    pageTypeCode: string;\r\n    onTemplateSelected: EventEmitter<PageTemplateType>;\r\n    searchString: string;\r\n    pageTemplates: PageTemplateType[];\r\n    filteredPageTemplates: PageTemplateType[];\r\n    private selectedTemplate;\r\n    private cache;\r\n    constructor(pageTemplateService: PageTemplateService, cdr: ChangeDetectorRef);\r\n    ngOnChanges(changes: SimpleChanges): Promise<void>;\r\n    templateSelected(pageTemplate: PageTemplateType): void;\r\n    isSelected(pageTemplate: PageTemplateType): boolean;\r\n    clearSearch(): void;\r\n    onSearchChange(value: string): void;\r\n    private onInputUpdated;\r\n    private setPageTemplates;\r\n    private filterByQuery;\r\n    private setDefaultFilteredPageTemplates;\r\n}\r\n"}}
