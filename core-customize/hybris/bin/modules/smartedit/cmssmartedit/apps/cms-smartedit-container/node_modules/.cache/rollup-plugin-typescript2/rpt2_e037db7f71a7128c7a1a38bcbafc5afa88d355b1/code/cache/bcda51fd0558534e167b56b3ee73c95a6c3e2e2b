{"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\r\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { SeDowngradeComponent, URIBuilder, cmsitemsUri } from 'smarteditcommons';\r\nimport { RestrictionsService } from '../../../../services/RestrictionsService';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"RestrictionManagementEditComponent\", {\r\n    selector: 'se-restriction-management-edit',\r\n    template: `<div *ngIf=\"ready\"><div *ngIf=\"isTypeSupported\"><div class=\"se-restriction-management-edit__header\"><div>{{ restriction.name }}</div><div>{{ restriction.typeCode }}</div></div><div><se-item-manager [item]=\"restriction\" [mode]=\"itemManagementMode\" [structureApi]=\"structureApi\" [contentApi]=\"contentApi\" [uriContext]=\"uriContext\" [componentType]=\"restriction.itemtype\" [(submitFunction)]=\"submitInternal\" [(isDirty)]=\"isDirtyInternal\"></se-item-manager></div></div><div *ngIf=\"!isTypeSupported\"><div class=\"se-restrictions-list__item-content\"><div translate=\"se.cms.restriction.management.select.type.not.supported.warning\"></div><p class=\"se-restriction__item-name\">{{ restriction.name }}</p><div class=\"se-restriction__item-description\">{{ restriction.description }}</div></div></div></div>`,\r\n    styles: [`.se-restriction-management-edit__header{margin-bottom:16px}`, `#restrictions-label{display:none}.se-restriction__select{text-transform:capitalize;width:100%}.se-restrictions-list__item-content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;cursor:default;flex-grow:1}#userGroups-selector .se-generic-editor-multiple-dropdown__match li[draggable=true]{display:flex;flex-direction:row;align-items:center;justify-content:center;display:inline-flex!important;border:1px solid #d9d9d9;margin:4px 0 4px 8px;padding:4px 8px;border-radius:4px;background-color:var(--fd-token-background-color);color:#51555a;min-height:28px}`]\r\n});\r\nlet /* @ngInject */ RestrictionManagementEditComponent = class /* @ngInject */ RestrictionManagementEditComponent {\r\n    constructor(restrictionsService) {\r\n        this.restrictionsService = restrictionsService;\r\n        this.isDirtyFnChange = new EventEmitter();\r\n        this.submitFnChange = new EventEmitter();\r\n        this.ready = false;\r\n        this.itemManagementMode = 'edit';\r\n        this.structureApi = this.restrictionsService.getStructureApiUri(this.itemManagementMode);\r\n    }\r\n    ngOnInit() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const dryRunCmsItemsUri = cmsitemsUri + '/:identifier';\r\n            this.restriction = this.restriction || {};\r\n            this.contentApi = new URIBuilder(dryRunCmsItemsUri).replaceParams(this.uriContext).build();\r\n            if (typeof this.getSupportedRestrictionTypes !== 'undefined') {\r\n                const supportedTypes = yield this.getSupportedRestrictionTypes();\r\n                this.emitActions(supportedTypes.includes(this.restriction.itemtype));\r\n            }\r\n            else {\r\n                return this.emitActions(true);\r\n            }\r\n        });\r\n    }\r\n    emitActions(isRestrictionTypeSupported) {\r\n        this.isTypeSupported = isRestrictionTypeSupported;\r\n        if (isRestrictionTypeSupported) {\r\n            this.submitFnChange.emit(() => this.submitInternal().then((itemResponse) => Promise.resolve(itemResponse)));\r\n            this.isDirtyFnChange.emit(() => this.isDirtyLocal());\r\n        }\r\n        else {\r\n            this.submitFnChange.emit(() => Promise.resolve(null));\r\n            this.isDirtyFnChange.emit(() => false);\r\n        }\r\n        this.ready = true;\r\n    }\r\n    isDirtyLocal() {\r\n        if (this.isDirtyInternal) {\r\n            return this.isDirtyInternal();\r\n        }\r\n        return false;\r\n    }\r\n};\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"restriction\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Function)\r\n], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"getSupportedRestrictionTypes\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"uriContext\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Function)\r\n], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"isDirtyFn\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Function)\r\n], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"submitFn\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", EventEmitter)\r\n], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"isDirtyFnChange\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", EventEmitter)\r\n], /* @ngInject */ RestrictionManagementEditComponent.prototype, \"submitFnChange\", void 0);\r\n/* @ngInject */ RestrictionManagementEditComponent = __decorate([\r\n    SeDowngradeComponent(),\r\n    Component({\r\n        selector: 'se-restriction-management-edit',\r\n        template: `<div *ngIf=\"ready\"><div *ngIf=\"isTypeSupported\"><div class=\"se-restriction-management-edit__header\"><div>{{ restriction.name }}</div><div>{{ restriction.typeCode }}</div></div><div><se-item-manager [item]=\"restriction\" [mode]=\"itemManagementMode\" [structureApi]=\"structureApi\" [contentApi]=\"contentApi\" [uriContext]=\"uriContext\" [componentType]=\"restriction.itemtype\" [(submitFunction)]=\"submitInternal\" [(isDirty)]=\"isDirtyInternal\"></se-item-manager></div></div><div *ngIf=\"!isTypeSupported\"><div class=\"se-restrictions-list__item-content\"><div translate=\"se.cms.restriction.management.select.type.not.supported.warning\"></div><p class=\"se-restriction__item-name\">{{ restriction.name }}</p><div class=\"se-restriction__item-description\">{{ restriction.description }}</div></div></div></div>`,\r\n        styles: [`.se-restriction-management-edit__header{margin-bottom:16px}`, `#restrictions-label{display:none}.se-restriction__select{text-transform:capitalize;width:100%}.se-restrictions-list__item-content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;cursor:default;flex-grow:1}#userGroups-selector .se-generic-editor-multiple-dropdown__match li[draggable=true]{display:flex;flex-direction:row;align-items:center;justify-content:center;display:inline-flex!important;border:1px solid #d9d9d9;margin:4px 0 4px 8px;padding:4px 8px;border-radius:4px;background-color:var(--fd-token-background-color);color:#51555a;min-height:28px}`]\r\n    }),\r\n    __metadata(\"design:paramtypes\", [RestrictionsService])\r\n], /* @ngInject */ RestrictionManagementEditComponent);\r\nexport { /* @ngInject */ RestrictionManagementEditComponent };\r\n//# sourceMappingURL=RestrictionManagementEditComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/RestrictionsService.ts"],"map":"{\"version\":3,\"file\":\"RestrictionManagementEditComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../src/components/restrictions/components/restrictionManagementEdit/RestrictionManagementEditComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/restrictions/components/restrictionManagementEdit/RestrictionManagementEditComponent.d.ts","writeByteOrderMark":false,"text":"import { EventEmitter, OnInit } from '@angular/core';\r\nimport { IUriContext, CMSItem } from 'smarteditcommons';\r\nimport { RestrictionsService } from '../../../../services/RestrictionsService';\r\nexport declare class RestrictionManagementEditComponent implements OnInit {\r\n    private restrictionsService;\r\n    restriction: CMSItem;\r\n    getSupportedRestrictionTypes: () => Promise<string[]>;\r\n    uriContext: IUriContext;\r\n    isDirtyFn: () => boolean;\r\n    submitFn: () => Promise<CMSItem>;\r\n    isDirtyFnChange: EventEmitter<() => boolean>;\r\n    submitFnChange: EventEmitter<() => Promise<CMSItem>>;\r\n    submitInternal: () => Promise<CMSItem>;\r\n    isDirtyInternal: () => boolean;\r\n    ready: boolean;\r\n    itemManagementMode: string;\r\n    contentApi: string;\r\n    structureApi: string;\r\n    isTypeSupported: boolean;\r\n    constructor(restrictionsService: RestrictionsService);\r\n    ngOnInit(): Promise<void>;\r\n    private emitActions;\r\n    private isDirtyLocal;\r\n}\r\n"}}
