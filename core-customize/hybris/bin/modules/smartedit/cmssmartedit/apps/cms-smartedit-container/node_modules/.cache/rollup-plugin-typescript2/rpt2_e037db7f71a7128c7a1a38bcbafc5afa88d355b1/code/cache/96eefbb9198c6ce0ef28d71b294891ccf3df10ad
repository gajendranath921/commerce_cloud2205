{"code":"import { __awaiter, __decorate, __metadata, __param } from \"tslib\";\r\nimport { Component, EventEmitter, Input, Output, Inject, ViewEncapsulation } from '@angular/core';\r\nimport { GenericEditorMediaType, MEDIA_SELECTOR_I18N_KEY_TOKEN, SeDowngradeComponent } from 'smarteditcommons';\r\nimport { MediaService, MediaUtilService } from '../../services';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"MediaFormatComponent\", {\r\n    selector: 'se-media-format',\r\n    template: `<div class=\"se-media-format\" [ngClass]=\"mediaFormat\"><div *ngIf=\"mediaLabel\" class=\"se-media-format__screen-type\" [translate]=\"mediaFormatI18nKey\"></div><se-media-format-uploaded *ngIf=\"isMediaPreviewEnabled()\" [media]=\"media\" [replaceLabelI18nKey]=\"mediaSelectorI18nKeys.REPLACE\" [acceptedFileTypes]=\"acceptedFileTypes\" [isFieldDisabled]=\"isFieldDisabled\" (onFileSelect)=\"onFileSelectorFileSelect($event)\" (onDelete)=\"onRemoveButtonClick()\"></se-media-format-uploaded><div class=\"se-media--absent\" *ngIf=\"isMediaAbsent()\"><se-media-file-selector *ngIf=\"isEditable\" [selectionMode]=\"'upload'\" [labelI18nKey]=\"mediaSelectorI18nKeys.UPLOAD\" [acceptedFileTypes]=\"acceptedFileTypes\" [customClass]=\"isFieldDisabled ? 'file-selector-disabled' : ''\" [disabled]=\"isFieldDisabled\" (onFileSelect)=\"onFileSelectorFileSelect($event)\"></se-media-file-selector><se-media-file-selector *ngIf=\"!isEditable\" [selectionMode]=\"'upload'\" [labelI18nKey]=\"mediaSelectorI18nKeys.UPLOAD\" [acceptedFileTypes]=\"acceptedFileTypes\" [customClass]=\"!isEditable ? 'file-selector-disabled' : ''\" [disabled]=\"!isEditable\" (onFileSelect)=\"onFileSelectorFileSelect($event)\"></se-media-file-selector></div><div *ngIf=\"isUnderEdit\" class=\"se-media--edit-wrapper\"><se-media-file-selector class=\"se-media--edit\" [labelI18nKey]=\"mediaSelectorI18nKeys.UPLOAD\" [acceptedFileTypes]=\"acceptedFileTypes\" [customClass]=\"'file-selector-disabled'\" [disabled]=\"true\" (onFileSelect)=\"onFileSelectorFileSelect($event)\"></se-media-file-selector><span class=\"se-media-preview--edit\" [translate]=\"mediaSelectorI18nKeys.UNDER_EDIT\"></span></div><ng-container *ngIf=\"!isUnderEdit\"><div class=\"error-input se-media-format__error\" *ngFor=\"let error of getErrors()\"><span>{{ error }}</span></div></ng-container></div>`,\r\n    styles: [`.se-media-format{height:100%}.se-media-format__screen-type{font-weight:700;padding-top:4px;padding-bottom:10px;color:#32363a}.se-media-format__error{color:#b00}.se-media--absent{display:flex;flex-direction:row;align-items:center;justify-content:center;height:75px;border:1px dashed #d9d9d9}.se-media--edit-wrapper{height:100%}.se-media--edit{display:flex;flex-direction:row;align-items:center;justify-content:center}.se-media-preview--edit{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;display:block;font-style:italic}`, `.se-media-preview-container{position:relative}.se-media-preview-container .se-media-preview__image-wrapper{display:flex;flex-direction:row;align-items:center;justify-content:center;height:75px;background-color:#edeff0}.se-media-preview-container .se-media-preview__image-thumbnail{max-width:100%;max-height:100%}`],\r\n    encapsulation: ViewEncapsulation.None\r\n});\r\nlet /* @ngInject */ MediaFormatComponent = class /* @ngInject */ MediaFormatComponent {\r\n    constructor(mediaService, mediaUtilService, mediaSelectorI18nKey) {\r\n        this.mediaService = mediaService;\r\n        this.mediaUtilService = mediaUtilService;\r\n        this.onFileSelect = new EventEmitter();\r\n        this.onDelete = new EventEmitter();\r\n        this.media = null;\r\n        this.mediaSelectorI18nKeys = mediaSelectorI18nKey;\r\n    }\r\n    ngOnInit() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.acceptedFileTypes = this.mediaUtilService.getAcceptedFileTypes(this.allowMediaType);\r\n            this.mediaFormatI18nKey = `se.media.format.${this.mediaFormat}`;\r\n            if (this.mediaUuid) {\r\n                return this.fetchAndSetMedia();\r\n            }\r\n        });\r\n    }\r\n    ngOnChanges(changes) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const mediaUuidChange = changes.mediaUuid;\r\n            if (mediaUuidChange && !mediaUuidChange.firstChange) {\r\n                if (this.mediaUuid) {\r\n                    return this.fetchAndSetMedia();\r\n                }\r\n                else {\r\n                    this.media = null;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    onFileSelectorFileSelect(file) {\r\n        this.onFileSelect.emit(file);\r\n    }\r\n    onRemoveButtonClick() {\r\n        this.onDelete.emit();\r\n    }\r\n    isMediaPreviewEnabled() {\r\n        var _a;\r\n        return this.mediaUuid && !this.isUnderEdit && !!((_a = this.media) === null || _a === void 0 ? void 0 : _a.code);\r\n    }\r\n    isMediaAbsent() {\r\n        return !this.mediaUuid && !this.isUnderEdit;\r\n    }\r\n    getErrors() {\r\n        return (this.errorMessages || [])\r\n            .filter((error) => error.format === this.mediaFormat)\r\n            .map((error) => error.message);\r\n    }\r\n    fetchAndSetMedia() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.media = yield this.mediaService.getMedia(this.mediaUuid);\r\n        });\r\n    }\r\n};\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Array)\r\n], /* @ngInject */ MediaFormatComponent.prototype, \"errorMessages\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Boolean)\r\n], /* @ngInject */ MediaFormatComponent.prototype, \"isEditable\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Boolean)\r\n], /* @ngInject */ MediaFormatComponent.prototype, \"isUnderEdit\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Boolean)\r\n], /* @ngInject */ MediaFormatComponent.prototype, \"isFieldDisabled\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], /* @ngInject */ MediaFormatComponent.prototype, \"mediaUuid\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], /* @ngInject */ MediaFormatComponent.prototype, \"mediaFormat\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], /* @ngInject */ MediaFormatComponent.prototype, \"mediaLabel\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], /* @ngInject */ MediaFormatComponent.prototype, \"allowMediaType\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", EventEmitter)\r\n], /* @ngInject */ MediaFormatComponent.prototype, \"onFileSelect\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", EventEmitter)\r\n], /* @ngInject */ MediaFormatComponent.prototype, \"onDelete\", void 0);\r\n/* @ngInject */ MediaFormatComponent = __decorate([\r\n    SeDowngradeComponent(),\r\n    Component({\r\n        selector: 'se-media-format',\r\n        template: `<div class=\"se-media-format\" [ngClass]=\"mediaFormat\"><div *ngIf=\"mediaLabel\" class=\"se-media-format__screen-type\" [translate]=\"mediaFormatI18nKey\"></div><se-media-format-uploaded *ngIf=\"isMediaPreviewEnabled()\" [media]=\"media\" [replaceLabelI18nKey]=\"mediaSelectorI18nKeys.REPLACE\" [acceptedFileTypes]=\"acceptedFileTypes\" [isFieldDisabled]=\"isFieldDisabled\" (onFileSelect)=\"onFileSelectorFileSelect($event)\" (onDelete)=\"onRemoveButtonClick()\"></se-media-format-uploaded><div class=\"se-media--absent\" *ngIf=\"isMediaAbsent()\"><se-media-file-selector *ngIf=\"isEditable\" [selectionMode]=\"'upload'\" [labelI18nKey]=\"mediaSelectorI18nKeys.UPLOAD\" [acceptedFileTypes]=\"acceptedFileTypes\" [customClass]=\"isFieldDisabled ? 'file-selector-disabled' : ''\" [disabled]=\"isFieldDisabled\" (onFileSelect)=\"onFileSelectorFileSelect($event)\"></se-media-file-selector><se-media-file-selector *ngIf=\"!isEditable\" [selectionMode]=\"'upload'\" [labelI18nKey]=\"mediaSelectorI18nKeys.UPLOAD\" [acceptedFileTypes]=\"acceptedFileTypes\" [customClass]=\"!isEditable ? 'file-selector-disabled' : ''\" [disabled]=\"!isEditable\" (onFileSelect)=\"onFileSelectorFileSelect($event)\"></se-media-file-selector></div><div *ngIf=\"isUnderEdit\" class=\"se-media--edit-wrapper\"><se-media-file-selector class=\"se-media--edit\" [labelI18nKey]=\"mediaSelectorI18nKeys.UPLOAD\" [acceptedFileTypes]=\"acceptedFileTypes\" [customClass]=\"'file-selector-disabled'\" [disabled]=\"true\" (onFileSelect)=\"onFileSelectorFileSelect($event)\"></se-media-file-selector><span class=\"se-media-preview--edit\" [translate]=\"mediaSelectorI18nKeys.UNDER_EDIT\"></span></div><ng-container *ngIf=\"!isUnderEdit\"><div class=\"error-input se-media-format__error\" *ngFor=\"let error of getErrors()\"><span>{{ error }}</span></div></ng-container></div>`,\r\n        styles: [`.se-media-format{height:100%}.se-media-format__screen-type{font-weight:700;padding-top:4px;padding-bottom:10px;color:#32363a}.se-media-format__error{color:#b00}.se-media--absent{display:flex;flex-direction:row;align-items:center;justify-content:center;height:75px;border:1px dashed #d9d9d9}.se-media--edit-wrapper{height:100%}.se-media--edit{display:flex;flex-direction:row;align-items:center;justify-content:center}.se-media-preview--edit{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;display:block;font-style:italic}`, `.se-media-preview-container{position:relative}.se-media-preview-container .se-media-preview__image-wrapper{display:flex;flex-direction:row;align-items:center;justify-content:center;height:75px;background-color:#edeff0}.se-media-preview-container .se-media-preview__image-thumbnail{max-width:100%;max-height:100%}`],\r\n        encapsulation: ViewEncapsulation.None\r\n    }),\r\n    __param(2, Inject(MEDIA_SELECTOR_I18N_KEY_TOKEN)),\r\n    __metadata(\"design:paramtypes\", [MediaService,\r\n        MediaUtilService, Object])\r\n], /* @ngInject */ MediaFormatComponent);\r\nexport { /* @ngInject */ MediaFormatComponent };\r\n//# sourceMappingURL=MediaFormatComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/genericEditor/media/services/index.ts"],"map":"{\"version\":3,\"file\":\"MediaFormatComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../../src/components/genericEditor/media/components/mediaFormat/MediaFormatComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/genericEditor/media/components/mediaFormat/MediaFormatComponent.d.ts","writeByteOrderMark":false,"text":"import { EventEmitter, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { GenericEditorFieldMessage, GenericEditorMediaType, MediaSelectorI18nKey } from 'smarteditcommons';\r\nimport { Media, MediaService, MediaUtilService } from '../../services';\r\nexport declare class MediaFormatComponent implements OnInit, OnChanges {\r\n    private mediaService;\r\n    private mediaUtilService;\r\n    errorMessages: GenericEditorFieldMessage[];\r\n    isEditable: boolean;\r\n    isUnderEdit: boolean;\r\n    isFieldDisabled: boolean;\r\n    mediaUuid: string | undefined;\r\n    mediaFormat: string;\r\n    mediaLabel: string;\r\n    allowMediaType: GenericEditorMediaType;\r\n    onFileSelect: EventEmitter<FileList>;\r\n    onDelete: EventEmitter<void>;\r\n    media: Media | null;\r\n    mediaFormatI18nKey: string;\r\n    mediaSelectorI18nKeys: MediaSelectorI18nKey;\r\n    acceptedFileTypes: string[];\r\n    constructor(mediaService: MediaService, mediaUtilService: MediaUtilService, mediaSelectorI18nKey: MediaSelectorI18nKey);\r\n    ngOnInit(): Promise<void>;\r\n    ngOnChanges(changes: SimpleChanges): Promise<void>;\r\n    onFileSelectorFileSelect(file: FileList): void;\r\n    onRemoveButtonClick(): void;\r\n    isMediaPreviewEnabled(): boolean;\r\n    isMediaAbsent(): boolean;\r\n    getErrors(): string[];\r\n    private fetchAndSetMedia;\r\n}\r\n"}}
