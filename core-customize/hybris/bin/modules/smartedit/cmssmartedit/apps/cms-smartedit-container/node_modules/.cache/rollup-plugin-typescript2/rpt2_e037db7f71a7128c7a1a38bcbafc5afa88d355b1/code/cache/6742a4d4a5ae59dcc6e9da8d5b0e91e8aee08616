{"code":"var PageTreeComponentMenuComponent_1;\r\nimport { __awaiter, __decorate, __metadata } from \"tslib\";\r\nimport { Component, Input, forwardRef, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\r\nimport { PageTreeComponentMenuService } from '../../../services/pageTree/PageTreeComponentMenuService';\r\nimport { PageTreeMenuItemOverlayComponent } from './PageTreeMenuItemOverlayComponent';\r\nimport { PageTreeMoreItemsComponent } from './PageTreeMoreItemsComponent';\r\nimport { ParentMenu } from './ParentMenu';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"PageTreeComponentMenuComponent\", {\r\n    selector: 'se-page-tree-component-menu',\r\n    template: `<div class=\"se-page-tree-component-menu\"><span [ngClass]=\"component.isHidden ? 'sap-icon--hide' : 'sap-icon--show'\" class=\"se-page-tree-component-menu--icon\"></span><se-popup-overlay *ngIf=\"!!leftButton\" [popupOverlay]=\"itemTemplateOverlayWrapper\" [popupOverlayTrigger]=\"canShowTemplate(leftButton)\" [popupOverlayData]=\"{ item: leftButton }\" (popupOverlayOnHide)=\"onHideItemPopup(false)\"><span class=\"se-page-tree-component-menu--icon\" [ngClass]=\"leftButton.displayIconClass\" (click)=\"triggerMenuItemAction(leftButton, $event)\"></span></se-popup-overlay><se-popup-overlay [popupOverlay]=\"moreMenuPopupConfig\" [popupOverlayTrigger]=\"moreMenuIsOpen\"><span *ngIf=\"items && items.length > 0\" (click)=\"toggleMoreMenu()\" class=\"se-page-tree-component-menu--icon sap-icon--overflow\"></span></se-popup-overlay></div>`,\r\n    styles: [`.se-page-tree-component-menu{margin:0 0 0 auto;display:flex;flex-direction:row}.se-page-tree-component-menu--icon{margin:0 0 0 16px;font-size:14px;line-height:16px;color:var(--sapContent_IconColor)}.se-page-tree-component-more{min-width:118px}.se-page-tree-component-more-menu{display:block}.se-page-tree-component-more-menu--span{margin-left:12px;font-family:\"72\";font-size:14px;line-height:24px;color:#000;display:block;min-width:104px}.is-storefront .fd-popover__popper{border-radius:0}`],\r\n    providers: [\r\n        { provide: ParentMenu, useExisting: forwardRef(() => PageTreeComponentMenuComponent_1) }\r\n    ],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n});\r\nlet PageTreeComponentMenuComponent = PageTreeComponentMenuComponent_1 = class PageTreeComponentMenuComponent {\r\n    constructor(pageTreeComponentMenuService, cdr) {\r\n        this.pageTreeComponentMenuService = pageTreeComponentMenuService;\r\n        this.cdr = cdr;\r\n        this.remainOpenMap = {};\r\n        this.moreMenuIsOpen = false;\r\n        this.moreMenuPopupConfig = {\r\n            component: PageTreeMoreItemsComponent,\r\n            halign: 'left'\r\n        };\r\n        this.itemTemplateOverlayWrapper = {\r\n            component: PageTreeMenuItemOverlayComponent\r\n        };\r\n    }\r\n    getItems() {\r\n        return this.items;\r\n    }\r\n    ngOnInit() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.componentAttributes = {\r\n                smarteditCatalogVersionUuid: this.component.catalogVersion,\r\n                smarteditComponentId: this.component.uid,\r\n                smarteditComponentType: this.component.typeCode,\r\n                smarteditComponentUuid: this.component.uuid,\r\n                smarteditElementUuid: this.component.elementUuid\r\n            };\r\n            this.menuConfiguration = {\r\n                componentType: this.component.typeCode,\r\n                componentId: this.component.uid,\r\n                componentUuid: this.component.uuid,\r\n                containerType: this.component.containerType,\r\n                containerId: this.component.containerId,\r\n                componentAttributes: this.componentAttributes,\r\n                slotId: this.slotId,\r\n                slotUuid: this.slotUuid,\r\n                isComponentHidden: this.component.isHidden\r\n            };\r\n            const newItems = yield this.pageTreeComponentMenuService.getPageTreeComponentMenus(this.menuConfiguration);\r\n            if (newItems && newItems.length > 0) {\r\n                this.items = newItems.filter((item) => !!item);\r\n                this.leftButton = this.items.shift();\r\n            }\r\n            if (!this.cdr.destroyed) {\r\n                this.cdr.detectChanges();\r\n            }\r\n        });\r\n    }\r\n    setRemainOpen(key, remainOpen) {\r\n        this.remainOpenMap[key] = remainOpen;\r\n    }\r\n    showOverlay(active) {\r\n        if (active) {\r\n            return true;\r\n        }\r\n        return Object.keys(this.remainOpenMap).reduce((isOpen, key) => isOpen || this.remainOpenMap[key], false);\r\n    }\r\n    canShowTemplate(menuItem) {\r\n        return this.displayedItem === menuItem;\r\n    }\r\n    onHideItemPopup(hideMoreMenu = false) {\r\n        this.displayedItem = null;\r\n        if (hideMoreMenu) {\r\n            this.moreMenuIsOpen = false;\r\n        }\r\n    }\r\n    triggerMenuItemAction(item, $event) {\r\n        this.moreMenuIsOpen = false;\r\n        if (item.action.component) {\r\n            if (this.displayedItem === item) {\r\n                this.displayedItem = null;\r\n            }\r\n            else {\r\n                this.displayedItem = item;\r\n            }\r\n        }\r\n        else if (item.action.callback) {\r\n            item.action.callback(this.menuConfiguration, $event);\r\n        }\r\n    }\r\n    toggleMoreMenu() {\r\n        this.moreMenuIsOpen = !this.moreMenuIsOpen;\r\n    }\r\n};\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], PageTreeComponentMenuComponent.prototype, \"component\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], PageTreeComponentMenuComponent.prototype, \"slotId\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], PageTreeComponentMenuComponent.prototype, \"slotUuid\", void 0);\r\nPageTreeComponentMenuComponent = PageTreeComponentMenuComponent_1 = __decorate([\r\n    Component({\r\n        selector: 'se-page-tree-component-menu',\r\n        template: `<div class=\"se-page-tree-component-menu\"><span [ngClass]=\"component.isHidden ? 'sap-icon--hide' : 'sap-icon--show'\" class=\"se-page-tree-component-menu--icon\"></span><se-popup-overlay *ngIf=\"!!leftButton\" [popupOverlay]=\"itemTemplateOverlayWrapper\" [popupOverlayTrigger]=\"canShowTemplate(leftButton)\" [popupOverlayData]=\"{ item: leftButton }\" (popupOverlayOnHide)=\"onHideItemPopup(false)\"><span class=\"se-page-tree-component-menu--icon\" [ngClass]=\"leftButton.displayIconClass\" (click)=\"triggerMenuItemAction(leftButton, $event)\"></span></se-popup-overlay><se-popup-overlay [popupOverlay]=\"moreMenuPopupConfig\" [popupOverlayTrigger]=\"moreMenuIsOpen\"><span *ngIf=\"items && items.length > 0\" (click)=\"toggleMoreMenu()\" class=\"se-page-tree-component-menu--icon sap-icon--overflow\"></span></se-popup-overlay></div>`,\r\n        styles: [`.se-page-tree-component-menu{margin:0 0 0 auto;display:flex;flex-direction:row}.se-page-tree-component-menu--icon{margin:0 0 0 16px;font-size:14px;line-height:16px;color:var(--sapContent_IconColor)}.se-page-tree-component-more{min-width:118px}.se-page-tree-component-more-menu{display:block}.se-page-tree-component-more-menu--span{margin-left:12px;font-family:\"72\";font-size:14px;line-height:24px;color:#000;display:block;min-width:104px}.is-storefront .fd-popover__popper{border-radius:0}`],\r\n        providers: [\r\n            { provide: ParentMenu, useExisting: forwardRef(() => PageTreeComponentMenuComponent_1) }\r\n        ],\r\n        changeDetection: ChangeDetectionStrategy.OnPush\r\n    }),\r\n    __metadata(\"design:paramtypes\", [PageTreeComponentMenuService,\r\n        ChangeDetectorRef])\r\n], PageTreeComponentMenuComponent);\r\nexport { PageTreeComponentMenuComponent };\r\n//# sourceMappingURL=PageTreeComponentMenuComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pageTree/NodeInfoService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pageTree/PageTreeComponentMenuService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pageTree/PageTreeComponentMenu/PageTreeMenuItemOverlayComponent.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pageTree/PageTreeComponentMenu/PageTreeMoreItemsComponent.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pageTree/PageTreeComponentMenu/ParentMenu.ts"],"map":"{\"version\":3,\"file\":\"PageTreeComponentMenuComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/pageTree/PageTreeComponentMenu/PageTreeComponentMenuComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/pageTree/PageTreeComponentMenu/PageTreeComponentMenuComponent.d.ts","writeByteOrderMark":false,"text":"import { OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { ComponentAttributes, IContextualMenuButton, IContextualMenuConfiguration, PopupOverlayConfig, TypedMap } from 'smarteditcommons';\r\nimport { ComponentNode } from '../../../services/pageTree/NodeInfoService';\r\nimport { PageTreeComponentMenuService } from '../../../services/pageTree/PageTreeComponentMenuService';\r\nimport { ParentMenu } from './ParentMenu';\r\nexport declare class PageTreeComponentMenuComponent implements ParentMenu, OnInit {\r\n    private readonly pageTreeComponentMenuService;\r\n    private readonly cdr;\r\n    component: ComponentNode;\r\n    slotId: string;\r\n    slotUuid: string;\r\n    componentAttributes: ComponentAttributes;\r\n    remainOpenMap: TypedMap<boolean>;\r\n    items: IContextualMenuButton[];\r\n    leftButton: IContextualMenuButton;\r\n    moreMenuIsOpen: boolean;\r\n    moreMenuPopupConfig: PopupOverlayConfig;\r\n    itemTemplateOverlayWrapper: PopupOverlayConfig;\r\n    menuConfiguration: IContextualMenuConfiguration;\r\n    private displayedItem;\r\n    constructor(pageTreeComponentMenuService: PageTreeComponentMenuService, cdr: ChangeDetectorRef);\r\n    getItems(): IContextualMenuButton[];\r\n    ngOnInit(): Promise<void>;\r\n    setRemainOpen(key: string, remainOpen: boolean): void;\r\n    showOverlay(active: boolean): boolean;\r\n    canShowTemplate(menuItem: IContextualMenuButton): boolean;\r\n    onHideItemPopup(hideMoreMenu?: boolean): void;\r\n    triggerMenuItemAction(item: IContextualMenuButton, $event: Event): void;\r\n    toggleMoreMenu(): void;\r\n}\r\n"}}
