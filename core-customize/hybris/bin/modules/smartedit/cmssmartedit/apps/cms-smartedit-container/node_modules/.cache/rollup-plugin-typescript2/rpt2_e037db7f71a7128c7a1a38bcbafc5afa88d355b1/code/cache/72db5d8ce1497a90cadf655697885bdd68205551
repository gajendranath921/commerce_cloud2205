{"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input } from '@angular/core';\r\nimport { WorkflowService } from 'smarteditcommons';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"PageStatusComponent\", {\r\n    selector: 'se-page-status',\r\n    template: `<div class=\"se-page-status\"><div class=\"se-page-status__icon\" [ngClass]=\"statusIconCssClass\"></div><div class=\"se-page-status__label\">{{ statusLabel | translate }}</div></div>`,\r\n    styles: [`.se-page-status{display:flex;flex-direction:row;align-items:center}.se-page-status__label{white-space:nowrap}.se-page-status__icon{float:left;margin-left:10px;margin-right:10px}.se-page-status__icon--draft{width:12px;height:12px;border-radius:50%;background-color:#74777a}.se-page-status__icon--in_progress{width:12px;height:12px;border-radius:50%;background-color:#e9730c}.se-page-status__icon--ready_to_sync{width:12px;height:12px;border-radius:50%;background-color:#0a6ed1}.se-page-status__icon--synced{width:12px;height:12px;border-radius:50%;background-color:#0a7e3e}.se-page-status__icon--locked{color:#32363a}`],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n});\r\nlet PageStatusComponent = class PageStatusComponent {\r\n    constructor(workflowService, cdr) {\r\n        this.workflowService = workflowService;\r\n        this.cdr = cdr;\r\n        this.LOCALIZATION_PREFIX = 'se.cms.page.displaystatus.';\r\n    }\r\n    ngOnChanges(changes) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const uuidChange = changes.uuid;\r\n            const displayStatusChange = changes.displayStatus;\r\n            let detectChanges = false;\r\n            if (uuidChange && uuidChange.currentValue) {\r\n                this.isPageLocked = yield this.isPageLockedToCurrentUser(this.uuid);\r\n                detectChanges = true;\r\n            }\r\n            if (displayStatusChange && displayStatusChange.currentValue) {\r\n                const displayStatusLC = this.displayStatus.toLowerCase();\r\n                this.statusLabel = `${this.LOCALIZATION_PREFIX}${displayStatusLC}`;\r\n                this.statusIconCssClass = this.getStatusIconCssClass(this.isPageLocked, displayStatusLC);\r\n            }\r\n            if (detectChanges) {\r\n                if (!this.cdr.destroyed) {\r\n                    this.cdr.detectChanges();\r\n                }\r\n            }\r\n        });\r\n    }\r\n    isPageLockedToCurrentUser(uuid) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const workflow = yield this.workflowService.getActiveWorkflowForPageUuid(uuid);\r\n            return workflow && !workflow.isAvailableForCurrentPrincipal;\r\n        });\r\n    }\r\n    getStatusIconCssClass(isPageLocked, displayStatus) {\r\n        return isPageLocked\r\n            ? 'icon-locked se-page-status__icon--locked'\r\n            : `se-page-status__icon--${displayStatus}`;\r\n    }\r\n};\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], PageStatusComponent.prototype, \"uuid\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], PageStatusComponent.prototype, \"displayStatus\", void 0);\r\nPageStatusComponent = __decorate([\r\n    Component({\r\n        selector: 'se-page-status',\r\n        template: `<div class=\"se-page-status\"><div class=\"se-page-status__icon\" [ngClass]=\"statusIconCssClass\"></div><div class=\"se-page-status__label\">{{ statusLabel | translate }}</div></div>`,\r\n        styles: [`.se-page-status{display:flex;flex-direction:row;align-items:center}.se-page-status__label{white-space:nowrap}.se-page-status__icon{float:left;margin-left:10px;margin-right:10px}.se-page-status__icon--draft{width:12px;height:12px;border-radius:50%;background-color:#74777a}.se-page-status__icon--in_progress{width:12px;height:12px;border-radius:50%;background-color:#e9730c}.se-page-status__icon--ready_to_sync{width:12px;height:12px;border-radius:50%;background-color:#0a6ed1}.se-page-status__icon--synced{width:12px;height:12px;border-radius:50%;background-color:#0a7e3e}.se-page-status__icon--locked{color:#32363a}`],\r\n        changeDetection: ChangeDetectionStrategy.OnPush\r\n    }),\r\n    __metadata(\"design:paramtypes\", [WorkflowService, ChangeDetectorRef])\r\n], PageStatusComponent);\r\nexport { PageStatusComponent };\r\n//# sourceMappingURL=PageStatusComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"PageStatusComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../../src/components/workflow/components/pageDisplayStatus/pageStatus/PageStatusComponent.ts\"],\"names\":[],\"mappings\":\";AACA,OAAO,EACH,uBAAuB,EACvB,iBAAiB,EACjB,SAAS,EACT,KAAK,EAIR,MAAM,eAAe,CAAC;AACvB,OAAO,EAAY,eAAe,EAAE,MAAM,kBAAkB,CAAC;6EAElD;IACP,QAAQ,EAAE,gBAAgB;IAC1B,QAAQ,EAAE,iLAAiL;IAC3L,MAAM,EAAE,CAAC,0mBAA0mB,CAAC;IACpnB,eAAe,EAAE,uBAAuB,CAAC,MAAM;CAClD;AACD,IAAa,mBAAmB,GAAhC,MAAa,mBAAmB;IAY5B,YAAoB,eAAgC,EAAU,GAAsB;QAAhE,oBAAe,GAAf,eAAe,CAAiB;QAAU,QAAG,GAAH,GAAG,CAAmB;QAH5E,wBAAmB,GAAG,4BAA4B,CAAC;IAG4B,CAAC;IAElF,WAAW,CAAC,OAAsB;;YACpC,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC;YAChC,MAAM,mBAAmB,GAAG,OAAO,CAAC,aAAa,CAAC;YAElD,IAAI,aAAa,GAAG,KAAK,CAAC;YAC1B,IAAI,UAAU,IAAI,UAAU,CAAC,YAAY,EAAE;gBACvC,IAAI,CAAC,YAAY,GAAG,MAAM,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBACpE,aAAa,GAAG,IAAI,CAAC;aACxB;YAED,IAAI,mBAAmB,IAAI,mBAAmB,CAAC,YAAY,EAAE;gBACzD,MAAM,eAAe,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;gBAEzD,IAAI,CAAC,WAAW,GAAG,GAAG,IAAI,CAAC,mBAAmB,GAAG,eAAe,EAAE,CAAC;gBAEnE,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,qBAAqB,CAChD,IAAI,CAAC,YAAY,EACjB,eAAe,CAClB,CAAC;aACL;YAED,IAAI,aAAa,EAAE;gBACf,IAAI,CAAE,IAAI,CAAC,GAAe,CAAC,SAAS,EAAE;oBAClC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;iBAC5B;aACJ;QACL,CAAC;KAAA;IAEa,yBAAyB,CAAC,IAAY;;YAChD,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,4BAA4B,CAAC,IAAI,CAAC,CAAC;YAC/E,OAAO,QAAQ,IAAI,CAAC,QAAQ,CAAC,8BAA8B,CAAC;QAChE,CAAC;KAAA;IAEO,qBAAqB,CAAC,YAAqB,EAAE,aAAqB;QACtE,OAAO,YAAY;YACf,CAAC,CAAC,0CAA0C;YAC5C,CAAC,CAAC,yBAAyB,aAAa,EAAE,CAAC;IACnD,CAAC;CACJ,CAAA;AAnDY;IAAR,KAAK,EAAE;;iDAAwB;AACvB;IAAR,KAAK,EAAE;;0DAAiC;AAFhC,mBAAmB;IAN/B,SAAS,CAAC;QACP,QAAQ,EAAE,gBAAgB;QAC1B,QAAQ,EAAE,iLAAiL;QAC3L,MAAM,EAAE,CAAC,0mBAA0mB,CAAC;QACpnB,eAAe,EAAE,uBAAuB,CAAC,MAAM;KAClD,CAAC;qCAauC,eAAe,EAAe,iBAAiB;GAZ3E,mBAAmB,CAoD/B;SApDY,mBAAmB\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/workflow/components/pageDisplayStatus/pageStatus/PageStatusComponent.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { Nullable, WorkflowService } from 'smarteditcommons';\r\nexport declare class PageStatusComponent implements OnChanges {\r\n    private workflowService;\r\n    private cdr;\r\n    uuid: Nullable<string>;\r\n    displayStatus: Nullable<string>;\r\n    statusLabel: string;\r\n    statusIconCssClass: string;\r\n    private LOCALIZATION_PREFIX;\r\n    private isPageLocked;\r\n    constructor(workflowService: WorkflowService, cdr: ChangeDetectorRef);\r\n    ngOnChanges(changes: SimpleChanges): Promise<void>;\r\n    private isPageLockedToCurrentUser;\r\n    private getStatusIconCssClass;\r\n}\r\n"}}
