{"code":"import { __awaiter, __decorate, __metadata, __param } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { Component, Inject } from '@angular/core';\r\nimport { defaultsDeep } from 'lodash';\r\nimport { EVENT_CONTENT_CATALOG_UPDATE, GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT, IConfirmationModalService, IExperienceService, SeDowngradeComponent, SystemEventService, WizardService, WIZARD_MANAGER } from 'smarteditcommons';\r\nimport { PageFacade } from '../../../../facades';\r\nimport { RestrictionTypesService } from '../../../../services/pageRestrictions/RestrictionTypesService';\r\nimport { PageBuilderFactory } from '../../../../services/pages/PageBuilderFactory';\r\nimport { RestrictionsStepHandlerFactory } from '../../../../services/pages/RestrictionsStepHandlerFactory';\r\nimport { RestrictionsService } from '../../../../services/RestrictionsService';\r\nimport { PageDisplayConditionStepComponent, PageInfoStepComponent, PageRestrictionsStepComponent, PageTemplateStepComponent, PageTypeStepComponent } from './wizardSteps';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"AddPageWizardComponent\", {\r\n    selector: 'se-add-page-wizard',\r\n    template: ''\r\n});\r\nlet /* @ngInject */ AddPageWizardComponent = class /* @ngInject */ AddPageWizardComponent {\r\n    constructor(wizardManager, pageBuilderFactory, restrictionsStepHandlerFactory, experienceService, confirmationModalService, systemEventService, restrictionTypesService, restrictionsService, pageFacade) {\r\n        this.wizardManager = wizardManager;\r\n        this.pageBuilderFactory = pageBuilderFactory;\r\n        this.restrictionsStepHandlerFactory = restrictionsStepHandlerFactory;\r\n        this.experienceService = experienceService;\r\n        this.confirmationModalService = confirmationModalService;\r\n        this.systemEventService = systemEventService;\r\n        this.restrictionTypesService = restrictionTypesService;\r\n        this.restrictionsService = restrictionsService;\r\n        this.pageFacade = pageFacade;\r\n        // Enumerable methods\r\n        // This way of defining method creates a public field in class instead of prototype method\r\n        // which allows then to be reassigned/extended in ModalWizardTemplateComponent#assignAngularController\r\n        this.getWizardConfig = () => ({\r\n            isFormValid: (stepId) => this.isFormValid(stepId),\r\n            onNext: () => this.onNext(),\r\n            onDone: () => this.onDone(),\r\n            onCancel: () => this.onCancel(),\r\n            steps: [\r\n                {\r\n                    id: this.ADD_PAGE_WIZARD_STEPS.PAGE_TYPE,\r\n                    name: 'se.cms.addpagewizard.pagetype.tabname',\r\n                    title: 'se.cms.addpagewizard.pagetype.title',\r\n                    component: PageTypeStepComponent\r\n                },\r\n                {\r\n                    id: this.ADD_PAGE_WIZARD_STEPS.PAGE_TEMPLATE,\r\n                    name: 'se.cms.addpagewizard.pagetemplate.tabname',\r\n                    title: 'se.cms.addpagewizard.pagetype.title',\r\n                    component: PageTemplateStepComponent\r\n                },\r\n                {\r\n                    id: this.ADD_PAGE_WIZARD_STEPS.PAGE_DISPLAY_CONDITION,\r\n                    name: 'se.cms.addpagewizard.pageconditions.tabname',\r\n                    title: 'se.cms.addpagewizard.pagetype.title',\r\n                    component: PageDisplayConditionStepComponent\r\n                },\r\n                {\r\n                    id: this.ADD_PAGE_WIZARD_STEPS.PAGE_INFO,\r\n                    name: 'se.cms.addpagewizard.pageinfo.tabname',\r\n                    title: 'se.cms.addpagewizard.pagetype.title',\r\n                    component: PageInfoStepComponent\r\n                }\r\n            ]\r\n        });\r\n        this.getRestrictionTypes = () => this.restrictionTypesService.getRestrictionTypesByPageType(this.getPageTypeCode());\r\n        this.getSupportedRestrictionTypes = () => this.restrictionsService.getSupportedRestrictionTypeCodes();\r\n        this.variationResult = (displayConditionResult) => {\r\n            this.pageBuilder.displayConditionSelected(displayConditionResult);\r\n        };\r\n        const restrictionsEditorFunctionBindingsClosure = {}; // bound in the view for restrictions step\r\n        this.uriContext = this.wizardManager.properties.uriContext;\r\n        this.callbacks = {};\r\n        this.restrictionStepProperties = {\r\n            id: 'restrictionsStepId',\r\n            name: 'se.cms.restrictions.editor.tab',\r\n            title: 'se.cms.addpagewizard.pagetype.title',\r\n            component: PageRestrictionsStepComponent\r\n        };\r\n        this.restrictionsEditorFunctionBindings = restrictionsEditorFunctionBindingsClosure;\r\n        this.restrictionsStepHandler = this.restrictionsStepHandlerFactory.createRestrictionsStepHandler(this.wizardManager, restrictionsEditorFunctionBindingsClosure, this.restrictionStepProperties);\r\n        this.pageBuilder = this.pageBuilderFactory.createPageBuilder(this.restrictionsStepHandler, this.uriContext);\r\n        this.saveInProgress = false;\r\n        this.typeChanged = true;\r\n        this.ADD_PAGE_WIZARD_STEPS = {\r\n            PAGE_TYPE: 'pageType',\r\n            PAGE_TEMPLATE: 'pageTemplate',\r\n            PAGE_DISPLAY_CONDITION: 'pageDisplayCondition',\r\n            PAGE_INFO: 'pageInfo',\r\n            PAGE_RESTRICTIONS: this.restrictionsStepHandler.getStepId()\r\n        };\r\n    }\r\n    // Class methods\r\n    typeSelected(pageType) {\r\n        this.typeChanged = true;\r\n        this.pageBuilder.pageTypeSelected(pageType);\r\n    }\r\n    templateSelected(pageTemplate) {\r\n        this.pageBuilder.pageTemplateSelected(pageTemplate);\r\n    }\r\n    getPageTypeCode() {\r\n        return this.pageBuilder.getPageTypeCode();\r\n    }\r\n    restrictionsResult(data) {\r\n        this.pageBuilder.setRestrictions(data.onlyOneRestrictionMustApply, data.restrictionUuids);\r\n    }\r\n    isRestrictionsActive() {\r\n        if (!this.typeChanged ||\r\n            this.wizardManager.getCurrentStepId() === this.ADD_PAGE_WIZARD_STEPS.PAGE_RESTRICTIONS) {\r\n            this.typeChanged = false;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    getPageInfo() {\r\n        const page = this.pageBuilder.getPage();\r\n        page.uriContext = this.uriContext;\r\n        return page;\r\n    }\r\n    getPageRestrictions() {\r\n        return this.pageBuilder.getPageRestrictions();\r\n    }\r\n    getPageInfoStructure() {\r\n        return this.pageBuilder.getPageInfoStructure();\r\n    }\r\n    isPageInfoActive() {\r\n        return this.wizardManager.getCurrentStepId() === this.ADD_PAGE_WIZARD_STEPS.PAGE_INFO;\r\n    }\r\n    onNext() {\r\n        return Promise.resolve(true);\r\n    }\r\n    onCancel() {\r\n        return this.confirmationModalService.confirm({\r\n            description: 'se.editor.cancel.confirm'\r\n        });\r\n    }\r\n    isFormValid(stepId) {\r\n        switch (stepId) {\r\n            case this.ADD_PAGE_WIZARD_STEPS.PAGE_TYPE:\r\n                return !!this.pageBuilder.getPageTypeCode();\r\n            case this.ADD_PAGE_WIZARD_STEPS.PAGE_TEMPLATE:\r\n                return !!this.pageBuilder.getTemplateUuid();\r\n            case this.ADD_PAGE_WIZARD_STEPS.PAGE_DISPLAY_CONDITION:\r\n                return true;\r\n            case this.ADD_PAGE_WIZARD_STEPS.PAGE_INFO:\r\n                return (!this.saveInProgress &&\r\n                    !!this.callbacks.isDirtyPageInfo &&\r\n                    this.callbacks.isDirtyPageInfo() &&\r\n                    !!this.callbacks.isValidPageInfo &&\r\n                    this.callbacks.isValidPageInfo());\r\n            case this.ADD_PAGE_WIZARD_STEPS.PAGE_RESTRICTIONS:\r\n                return !this.saveInProgress && this.restrictionsStepHandler.isStepValid();\r\n        }\r\n        return false;\r\n    }\r\n    onDone() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.saveInProgress = true;\r\n            const page = yield this.callbacks.savePageInfo();\r\n            defaultsDeep(page, this.pageBuilder.getPage());\r\n            try {\r\n                const pageCreated = yield this.pageFacade.createPage(page);\r\n                this.pageBuilder.setPageUid(pageCreated.uid);\r\n                if (pageCreated.typeCode === 'EmailPage') {\r\n                    this.systemEventService.publishAsync(EVENT_CONTENT_CATALOG_UPDATE, pageCreated);\r\n                    return pageCreated;\r\n                }\r\n                yield this.experienceService.loadExperience({\r\n                    siteId: this.uriContext.CURRENT_CONTEXT_SITE_ID,\r\n                    catalogId: this.uriContext.CURRENT_CONTEXT_CATALOG,\r\n                    catalogVersion: this.uriContext.CURRENT_CONTEXT_CATALOG_VERSION,\r\n                    pageId: this.pageBuilder.getPage().uid\r\n                });\r\n            }\r\n            catch (exception) {\r\n                this.saveInProgress = false;\r\n                this.systemEventService.publishAsync(GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT, {\r\n                    messages: exception.error.errors\r\n                });\r\n                const errors = exception.error.errors;\r\n                if (!errors.find((error) => error.subject.indexOf('restrictions') === 0)) {\r\n                    this.wizardManager.goToStepWithId(this.ADD_PAGE_WIZARD_STEPS.PAGE_INFO);\r\n                }\r\n                // Reject is required to prevent modal wizard from closing when there's an error.\r\n                return Promise.reject();\r\n            }\r\n        });\r\n    }\r\n};\r\n/* @ngInject */ AddPageWizardComponent = __decorate([\r\n    SeDowngradeComponent(),\r\n    Component({\r\n        selector: 'se-add-page-wizard',\r\n        template: ''\r\n    }),\r\n    __param(0, Inject(WIZARD_MANAGER)),\r\n    __metadata(\"design:paramtypes\", [WizardService,\r\n        PageBuilderFactory,\r\n        RestrictionsStepHandlerFactory,\r\n        IExperienceService,\r\n        IConfirmationModalService,\r\n        SystemEventService,\r\n        RestrictionTypesService,\r\n        RestrictionsService,\r\n        PageFacade])\r\n], /* @ngInject */ AddPageWizardComponent);\r\nexport { /* @ngInject */ AddPageWizardComponent };\r\n//# sourceMappingURL=AddPageWizardComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types+lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/dao/PageTypeService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/dao/RestrictionTypesRestService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/facades/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pageRestrictions/RestrictionTypesService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pages/PageBuilderFactory.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pages/RestrictionsStepHandlerFactory.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pages/types.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/RestrictionsService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pages/pageWizard/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pages/addPageWizard/components/wizardSteps/index.ts"],"map":"{\"version\":3,\"file\":\"AddPageWizardComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../src/components/pages/addPageWizard/components/AddPageWizardComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/pages/addPageWizard/components/AddPageWizardComponent.d.ts","writeByteOrderMark":false,"text":"import { GenericEditorStructure, IConfirmationModalService, IExperienceService, IUriContext, SystemEventService, WizardConfig, WizardService, WizardStep, ICMSPage, CMSPageTypes, PageTemplateType } from 'smarteditcommons';\r\nimport { PageType } from '../../../../dao/PageTypeService';\r\nimport { IRestrictionType } from '../../../../dao/RestrictionTypesRestService';\r\nimport { PageFacade } from '../../../../facades';\r\nimport { RestrictionTypesService } from '../../../../services/pageRestrictions/RestrictionTypesService';\r\nimport { PageBuilder, PageBuilderFactory } from '../../../../services/pages/PageBuilderFactory';\r\nimport { RestrictionsStepHandler, RestrictionsStepHandlerFactory } from '../../../../services/pages/RestrictionsStepHandlerFactory';\r\nimport { RestrictionsEditorFunctionBindings } from '../../../../services/pages/types';\r\nimport { RestrictionsService } from '../../../../services/RestrictionsService';\r\nimport { RestrictionsDTO, WizardCallbacks, WizardStepApi } from '../../pageWizard';\r\nexport declare class AddPageWizardComponent implements WizardStepApi {\r\n    private wizardManager;\r\n    private pageBuilderFactory;\r\n    private restrictionsStepHandlerFactory;\r\n    private experienceService;\r\n    private confirmationModalService;\r\n    private systemEventService;\r\n    private restrictionTypesService;\r\n    private restrictionsService;\r\n    private pageFacade;\r\n    callbacks: WizardCallbacks;\r\n    pageBuilder: PageBuilder;\r\n    restrictionsEditorFunctionBindings: RestrictionsEditorFunctionBindings;\r\n    restrictionsStepHandler: RestrictionsStepHandler;\r\n    restrictionStepProperties: WizardStep;\r\n    uriContext: IUriContext;\r\n    saveInProgress: boolean;\r\n    typeChanged: boolean;\r\n    private readonly ADD_PAGE_WIZARD_STEPS;\r\n    constructor(wizardManager: WizardService, pageBuilderFactory: PageBuilderFactory, restrictionsStepHandlerFactory: RestrictionsStepHandlerFactory, experienceService: IExperienceService, confirmationModalService: IConfirmationModalService, systemEventService: SystemEventService, restrictionTypesService: RestrictionTypesService, restrictionsService: RestrictionsService, pageFacade: PageFacade);\r\n    getWizardConfig: () => WizardConfig;\r\n    getRestrictionTypes: () => Promise<IRestrictionType[]>;\r\n    getSupportedRestrictionTypes: () => Promise<string[]>;\r\n    variationResult: (displayConditionResult: ICMSPage) => void;\r\n    typeSelected(pageType: PageType): void;\r\n    templateSelected(pageTemplate: PageTemplateType): void;\r\n    getPageTypeCode(): CMSPageTypes;\r\n    restrictionsResult(data: RestrictionsDTO): void;\r\n    isRestrictionsActive(): boolean;\r\n    getPageInfo(): ICMSPage;\r\n    getPageRestrictions(): string[];\r\n    getPageInfoStructure(): GenericEditorStructure;\r\n    isPageInfoActive(): boolean;\r\n    onNext(): Promise<boolean>;\r\n    onCancel(): Promise<any>;\r\n    isFormValid(stepId: string): boolean;\r\n    onDone(): Promise<any>;\r\n}\r\n"}}
