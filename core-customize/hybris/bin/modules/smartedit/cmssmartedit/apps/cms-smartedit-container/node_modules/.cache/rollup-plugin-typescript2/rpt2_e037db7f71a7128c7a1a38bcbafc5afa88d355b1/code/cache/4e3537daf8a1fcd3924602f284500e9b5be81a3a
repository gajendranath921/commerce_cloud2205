{"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as lodash from 'lodash';\r\nimport { CONTEXT_SITE_ID, DropdownPopulatorInterface, ICatalogService, LanguageService, OptionsDropdownPopulator } from 'smarteditcommons';\r\nlet /* @ngInject */ ProductCatalogDropdownPopulator = class /* @ngInject */ ProductCatalogDropdownPopulator extends DropdownPopulatorInterface {\r\n    constructor(catalogService, languageService, optionsDropdownPopulator, translateService) {\r\n        super(lodash, languageService, translateService);\r\n        this.catalogService = catalogService;\r\n        this.optionsDropdownPopulator = optionsDropdownPopulator;\r\n    }\r\n    fetchAll(payload) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const catalogs = yield this.catalogService.getProductCatalogsBySiteKey(CONTEXT_SITE_ID);\r\n            payload.field.options = catalogs.filter((catalog) => this.hasCatalogOneActiveVersion(catalog));\r\n            return this.optionsDropdownPopulator.fetchAll(payload);\r\n        });\r\n    }\r\n    isPaged() {\r\n        return false;\r\n    }\r\n    hasCatalogOneActiveVersion(catalog) {\r\n        const activeVersions = catalog.versions.filter((version) => version.active === true);\r\n        return activeVersions.length === 1;\r\n    }\r\n};\r\n/* @ngInject */ ProductCatalogDropdownPopulator = __decorate([\r\n    Injectable(),\r\n    __metadata(\"design:paramtypes\", [ICatalogService,\r\n        LanguageService,\r\n        OptionsDropdownPopulator,\r\n        TranslateService])\r\n], /* @ngInject */ ProductCatalogDropdownPopulator);\r\nexport { /* @ngInject */ ProductCatalogDropdownPopulator };\r\n//# sourceMappingURL=ProductCatalogDropdownPopulator.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@ngx-translate+core@11.0.1_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@ngx-translate/core/ngx-translate-core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types+lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"ProductCatalogDropdownPopulator.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/genericEditor/dropdownPopulators/ProductCatalogDropdownPopulator.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAC3C,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AACvD,OAAO,KAAK,MAAM,MAAM,QAAQ,CAAC;AACjC,OAAO,EACH,eAAe,EACf,0BAA0B,EAI1B,eAAe,EACf,eAAe,EACf,wBAAwB,EAC3B,MAAM,kBAAkB,CAAC;AAG1B,sDAAA,qDAA6C,SAAQ,0BAA0B;IAC3E,YACY,cAA+B,EACvC,eAAgC,EACxB,wBAAkD,EAC1D,gBAAkC;QAElC,KAAK,CAAC,MAAM,EAAE,eAAe,EAAE,gBAAgB,CAAC,CAAC;QALzC,mBAAc,GAAd,cAAc,CAAiB;QAE/B,6BAAwB,GAAxB,wBAAwB,CAA0B;IAI9D,CAAC;IAEY,QAAQ,CAAC,OAAiC;;YACnD,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,2BAA2B,CAAC,eAAe,CAAC,CAAC;YAExF,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,EAAE,CAChD,IAAI,CAAC,0BAA0B,CAAC,OAAO,CAAC,CAC3C,CAAC;YACF,OAAO,IAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAC3D,CAAC;KAAA;IAEM,OAAO;QACV,OAAO,KAAK,CAAC;IACjB,CAAC;IAEO,0BAA0B,CAAC,OAAqB;QACpD,MAAM,cAAc,GAAG,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,MAAM,KAAK,IAAI,CAAC,CAAC;QACrF,OAAO,cAAc,CAAC,MAAM,KAAK,CAAC,CAAC;IACvC,CAAC;CACJ,CAAA;AA3BD;IADC,UAAU,EAAE;qCAGmB,eAAe;QACtB,eAAe;QACE,wBAAwB;QACxC,gBAAgB;mDAsBzC\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/genericEditor/dropdownPopulators/ProductCatalogDropdownPopulator.d.ts","writeByteOrderMark":false,"text":"import { TranslateService } from '@ngx-translate/core';\r\nimport { DropdownPopulatorInterface, DropdownPopulatorPayload, GenericEditorOption, ICatalogService, LanguageService, OptionsDropdownPopulator } from 'smarteditcommons';\r\nexport declare class ProductCatalogDropdownPopulator extends DropdownPopulatorInterface {\r\n    private catalogService;\r\n    private optionsDropdownPopulator;\r\n    constructor(catalogService: ICatalogService, languageService: LanguageService, optionsDropdownPopulator: OptionsDropdownPopulator, translateService: TranslateService);\r\n    fetchAll(payload: DropdownPopulatorPayload): Promise<GenericEditorOption[]>;\r\n    isPaged(): boolean;\r\n    private hasCatalogOneActiveVersion;\r\n}\r\n"}}
