{"code":"import { __awaiter, __decorate, __metadata, __param } from \"tslib\";\r\nimport { Component, Inject, ViewEncapsulation } from '@angular/core';\r\nimport { ICatalogService, SystemEventService, SeDowngradeComponent, TOOLBAR_ITEM, EVENT_CONTENT_CATALOG_UPDATE, IPageService, UserTrackingService, USER_TRACKING_FUNCTIONALITY } from 'smarteditcommons';\r\nimport { PageInfoMenuService } from '../services';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"PageInfoMenuComponent\", {\r\n    selector: 'se-page-info-menu',\r\n    template: `<div class=\"toolbar-action\" data-item-key=\"se.cms.pageInfoMenu\"><fd-popover [(isOpen)]=\"toolbarItem.isOpen\" (isOpenChange)=\"onDropdownToggle($event)\" [closeOnOutsideClick]=\"true\"><fd-popover-control><button type=\"button\" class=\"btn toolbar-action--button\" [attr.aria-pressed]=\"toolbarItem.isOpen\"><span class=\"hyicon hyicon-pageinfo se-toolbar-menu-ddlb--button__icon\"></span><div class=\"se-toolbar-page-info-wrapper\"><span class=\"toolbar-action-button__txt\" [translate]=\"toolbarItem.name\"></span></div></button></fd-popover-control><fd-popover-body><div class=\"se-page-info__dropdown-menu toolbar-action--include\"><div class=\"se-page-info-menu\" *ngIf=\"toolbarItem.isOpen\"><se-prevent-vertical-overflow><div class=\"se-page-info-menu__header\"><span class=\"se-page-info-menu__header-title\" translate=\"se.cms.pageinfo.information.title\"></span><div *seHasOperationPermission=\"editPagePermission\"><button class=\"se-page-info__edit-btn fd-button--compact\" *ngIf=\"isReady\" translate=\"se.cms.contextmenu.title.edit\" (click)=\"onEditPageClick()\"></button></div></div><div *ngIf=\"isReady\" class=\"se-page-info-menu__body\"><se-generic-editor [smarteditComponentId]=\"pageInfo.uid\" [smarteditComponentType]=\"pageInfo.typeCode\" [structure]=\"pageStructure\" [content]=\"pageInfo\"></se-generic-editor></div></se-prevent-vertical-overflow></div></div></fd-popover-body></fd-popover></div>`,\r\n    styles: [`.se-page-info-menu__header{padding:20px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;height:53px;padding-top:15px;height:48px}.se-page-info-menu__header:first-child{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-page-info-menu__body{width:100%;height:400px;overflow-y:auto}.se-page-info-menu__body--title{text-transform:capitalize}.se-page-info__dropdown-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%}.se-page-info__dropdown-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:\"\";position:absolute;top:-8px}.se-page-info__dropdown-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:\"\";position:absolute;top:-7px}.se-page-info__dropdown-menu::after,.se-page-info__dropdown-menu::before{left:14px}.se-page-info__dropdown-menu input{color:#32363a!important}.se-page-info-menu se-ge-tab{display:grid;grid-template-columns:repeat(1,1fr);grid-gap:0 16px;width:368px}.se-page-info-menu__body .fd-form-control[type=email]:disabled .fd-popover-custom,.se-page-info-menu__body .fd-form-control[type=text]:disabled .fd-popover-custom,.se-page-info-menu__body .se-select.is-disabled .fd-popover-custom,.se-tabset-wrapper .fd-form-control[type=email]:disabled .fd-popover-custom,.se-tabset-wrapper .fd-form-control[type=text]:disabled .fd-popover-custom,.se-tabset-wrapper .se-select.is-disabled .fd-popover-custom{opacity:1}.se-page-info-menu__body .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button,.se-page-info-menu__body .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button,.se-page-info-menu__body .se-select.is-disabled .fd-popover-custom .toggle-button,.se-tabset-wrapper .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button,.se-tabset-wrapper .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button,.se-tabset-wrapper .se-select.is-disabled .fd-popover-custom .toggle-button{border:none;opacity:1;color:#32363a;padding:0;line-height:1rem}.se-page-info-menu__body .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button::after,.se-page-info-menu__body .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button::after,.se-page-info-menu__body .se-select.is-disabled .fd-popover-custom .toggle-button::after,.se-tabset-wrapper .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button::after,.se-tabset-wrapper .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button::after,.se-tabset-wrapper .se-select.is-disabled .fd-popover-custom .toggle-button::after{display:none}`],\r\n    encapsulation: ViewEncapsulation.None\r\n});\r\nlet /* @ngInject */ PageInfoMenuComponent = class /* @ngInject */ PageInfoMenuComponent {\r\n    constructor(toolbarItem, pageInfoMenuService, pageService, catalogService, systemEventService, userTrackingService) {\r\n        this.toolbarItem = toolbarItem;\r\n        this.pageInfoMenuService = pageInfoMenuService;\r\n        this.pageService = pageService;\r\n        this.catalogService = catalogService;\r\n        this.systemEventService = systemEventService;\r\n        this.userTrackingService = userTrackingService;\r\n        this.cmsPage = null;\r\n        this.uriContext = null;\r\n        this.isReady = false;\r\n    }\r\n    ngOnInit() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.unRegContentCatalogUpdate = this.systemEventService.subscribe(EVENT_CONTENT_CATALOG_UPDATE, () => this.setPageData());\r\n            yield this.setPageData();\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        this.unRegContentCatalogUpdate();\r\n    }\r\n    onEditPageClick() {\r\n        this.pageInfoMenuService.openPageEditor(this.pageInfo.content);\r\n        this.closeMenu();\r\n    }\r\n    setPageData() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const [page, uriContext] = yield Promise.all([\r\n                this.pageService.getCurrentPageInfo(),\r\n                this.catalogService.retrieveUriContext()\r\n            ]);\r\n            this.cmsPage = page;\r\n            this.uriContext = uriContext;\r\n            this.editPagePermission = [\r\n                {\r\n                    names: ['se.edit.page.type'],\r\n                    context: {\r\n                        typeCode: page.typeCode\r\n                    }\r\n                },\r\n                {\r\n                    names: ['se.edit.page.link']\r\n                }\r\n            ];\r\n        });\r\n    }\r\n    onDropdownToggle(open) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!open) {\r\n                return;\r\n            }\r\n            this.userTrackingService.trackingUserAction(USER_TRACKING_FUNCTIONALITY.TOOL_BAR, 'Info');\r\n            const pageInfo = (yield this.pageInfoMenuService.getCurrentPageInfo());\r\n            this.pageInfo = pageInfo;\r\n            const pageStructure = (yield this.pageInfoMenuService.getPageStructureForViewing(pageInfo.typeCode, pageInfo.defaultPage));\r\n            this.pageStructure = pageStructure;\r\n            this.isReady = true;\r\n        });\r\n    }\r\n    closeMenu() {\r\n        this.toolbarItem.isOpen = false;\r\n    }\r\n};\r\n/* @ngInject */ PageInfoMenuComponent = __decorate([\r\n    SeDowngradeComponent(),\r\n    Component({\r\n        selector: 'se-page-info-menu',\r\n        template: `<div class=\"toolbar-action\" data-item-key=\"se.cms.pageInfoMenu\"><fd-popover [(isOpen)]=\"toolbarItem.isOpen\" (isOpenChange)=\"onDropdownToggle($event)\" [closeOnOutsideClick]=\"true\"><fd-popover-control><button type=\"button\" class=\"btn toolbar-action--button\" [attr.aria-pressed]=\"toolbarItem.isOpen\"><span class=\"hyicon hyicon-pageinfo se-toolbar-menu-ddlb--button__icon\"></span><div class=\"se-toolbar-page-info-wrapper\"><span class=\"toolbar-action-button__txt\" [translate]=\"toolbarItem.name\"></span></div></button></fd-popover-control><fd-popover-body><div class=\"se-page-info__dropdown-menu toolbar-action--include\"><div class=\"se-page-info-menu\" *ngIf=\"toolbarItem.isOpen\"><se-prevent-vertical-overflow><div class=\"se-page-info-menu__header\"><span class=\"se-page-info-menu__header-title\" translate=\"se.cms.pageinfo.information.title\"></span><div *seHasOperationPermission=\"editPagePermission\"><button class=\"se-page-info__edit-btn fd-button--compact\" *ngIf=\"isReady\" translate=\"se.cms.contextmenu.title.edit\" (click)=\"onEditPageClick()\"></button></div></div><div *ngIf=\"isReady\" class=\"se-page-info-menu__body\"><se-generic-editor [smarteditComponentId]=\"pageInfo.uid\" [smarteditComponentType]=\"pageInfo.typeCode\" [structure]=\"pageStructure\" [content]=\"pageInfo\"></se-generic-editor></div></se-prevent-vertical-overflow></div></div></fd-popover-body></fd-popover></div>`,\r\n        styles: [`.se-page-info-menu__header{padding:20px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;height:53px;padding-top:15px;height:48px}.se-page-info-menu__header:first-child{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-page-info-menu__body{width:100%;height:400px;overflow-y:auto}.se-page-info-menu__body--title{text-transform:capitalize}.se-page-info__dropdown-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%}.se-page-info__dropdown-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:\"\";position:absolute;top:-8px}.se-page-info__dropdown-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:\"\";position:absolute;top:-7px}.se-page-info__dropdown-menu::after,.se-page-info__dropdown-menu::before{left:14px}.se-page-info__dropdown-menu input{color:#32363a!important}.se-page-info-menu se-ge-tab{display:grid;grid-template-columns:repeat(1,1fr);grid-gap:0 16px;width:368px}.se-page-info-menu__body .fd-form-control[type=email]:disabled .fd-popover-custom,.se-page-info-menu__body .fd-form-control[type=text]:disabled .fd-popover-custom,.se-page-info-menu__body .se-select.is-disabled .fd-popover-custom,.se-tabset-wrapper .fd-form-control[type=email]:disabled .fd-popover-custom,.se-tabset-wrapper .fd-form-control[type=text]:disabled .fd-popover-custom,.se-tabset-wrapper .se-select.is-disabled .fd-popover-custom{opacity:1}.se-page-info-menu__body .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button,.se-page-info-menu__body .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button,.se-page-info-menu__body .se-select.is-disabled .fd-popover-custom .toggle-button,.se-tabset-wrapper .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button,.se-tabset-wrapper .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button,.se-tabset-wrapper .se-select.is-disabled .fd-popover-custom .toggle-button{border:none;opacity:1;color:#32363a;padding:0;line-height:1rem}.se-page-info-menu__body .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button::after,.se-page-info-menu__body .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button::after,.se-page-info-menu__body .se-select.is-disabled .fd-popover-custom .toggle-button::after,.se-tabset-wrapper .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button::after,.se-tabset-wrapper .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button::after,.se-tabset-wrapper .se-select.is-disabled .fd-popover-custom .toggle-button::after{display:none}`],\r\n        encapsulation: ViewEncapsulation.None\r\n    }),\r\n    __param(0, Inject(TOOLBAR_ITEM)),\r\n    __metadata(\"design:paramtypes\", [Object, PageInfoMenuService,\r\n        IPageService,\r\n        ICatalogService,\r\n        SystemEventService,\r\n        UserTrackingService])\r\n], /* @ngInject */ PageInfoMenuComponent);\r\nexport { /* @ngInject */ PageInfoMenuComponent };\r\n//# sourceMappingURL=PageInfoMenuComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pages/services/index.ts"],"map":"{\"version\":3,\"file\":\"PageInfoMenuComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/pages/pageInfoMenu/PageInfoMenuComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/pages/pageInfoMenu/PageInfoMenuComponent.d.ts","writeByteOrderMark":false,"text":"import { OnInit, OnDestroy } from '@angular/core';\r\nimport { CMSItemStructure } from 'cmscommons';\r\nimport { ICatalogService, IUriContext, MultiNamePermissionContext, SystemEventService, ToolbarItemInternal, IPageService, ICMSPage, UserTrackingService } from 'smarteditcommons';\r\nimport { PageInfoForViewing, PageInfoMenuService } from '../services';\r\nexport declare class PageInfoMenuComponent implements OnInit, OnDestroy {\r\n    toolbarItem: ToolbarItemInternal;\r\n    private pageInfoMenuService;\r\n    private pageService;\r\n    private catalogService;\r\n    private systemEventService;\r\n    private userTrackingService;\r\n    pageInfo: PageInfoForViewing;\r\n    pageStructure: CMSItemStructure;\r\n    isReady: boolean;\r\n    cmsPage: ICMSPage;\r\n    uriContext: IUriContext;\r\n    editPagePermission: MultiNamePermissionContext[];\r\n    private unRegContentCatalogUpdate;\r\n    constructor(toolbarItem: ToolbarItemInternal, pageInfoMenuService: PageInfoMenuService, pageService: IPageService, catalogService: ICatalogService, systemEventService: SystemEventService, userTrackingService: UserTrackingService);\r\n    ngOnInit(): Promise<void>;\r\n    ngOnDestroy(): void;\r\n    onEditPageClick(): void;\r\n    setPageData(): Promise<void>;\r\n    onDropdownToggle(open: boolean): Promise<void>;\r\n    private closeMenu;\r\n}\r\n"}}
