{"code":"import { __awaiter, __decorate, __metadata, __param } from \"tslib\";\r\nimport { Component, Inject, ViewEncapsulation } from '@angular/core';\r\nimport { CONTEXT_SITE_ID } from 'cmscommons';\r\nimport { GENERIC_EDITOR_WIDGET_DATA, ICatalogService } from 'smarteditcommons';\r\nimport { SingeActiveCatalogAwareItemSelectorItemRendererComponent } from './SingeActiveCatalogAwareItemSelectorItemRendererComponent';\r\nexport var SINGLE_CATALOG_AWARE_ITEM_MAPPING;\r\n(function (SINGLE_CATALOG_AWARE_ITEM_MAPPING) {\r\n    SINGLE_CATALOG_AWARE_ITEM_MAPPING[\"SingleOnlineProductSelector\"] = \"product\";\r\n    SINGLE_CATALOG_AWARE_ITEM_MAPPING[\"SingleOnlineCategorySelector\"] = \"category\";\r\n})(SINGLE_CATALOG_AWARE_ITEM_MAPPING || (SINGLE_CATALOG_AWARE_ITEM_MAPPING = {}));\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"SingleActiveCatalogAwareItemSelectorComponent\", {\r\n    selector: 'se-single-active-catalog-aware-item-selector',\r\n    template: `<div *ngIf=\"propertyType\"><div id=\"product-catalog\"><label class=\"se-control-label\" [ngClass]=\"{ 'required': field.required }\" *ngIf=\"catalogs.length === 1\">{{ catalogName | seL10n | async }}</label><se-generic-editor-dropdown id=\"se-catalog-selector-dropdown\" *ngIf=\"catalogs.length > 1\" [field]=\"productCatalogField\" [qualifier]=\"'productCatalog'\" [model]=\"model\"></se-generic-editor-dropdown></div><div><label class=\"se-control-label\" [translate]=\"mainDropDownI18nKey\"></label><se-generic-editor-dropdown id=\"se-items-selector-dropdown\" [field]=\"field\" [qualifier]=\"qualifier\" [model]=\"model\" [itemComponent]=\"itemComponent\" [(reset)]=\"reset\"></se-generic-editor-dropdown></div></div><div class=\"product-catalog-item-type-missing\" *ngIf=\"!propertyType\" translate=\"se.cms.catalogawareitem.itemtype.notsupported\"></div>`,\r\n    styles: [`se-single-active-catalog-aware-item-selector .se-single-catalog-item{display:grid;grid-template-columns:2fr 1fr 2fr;grid-column-gap:1rem}se-single-active-catalog-aware-item-selector .se-single-catalog-item__code,se-single-active-catalog-aware-item-selector .se-single-catalog-item__label,se-single-active-catalog-aware-item-selector .se-single-catalog-item__version{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}se-single-active-catalog-aware-item-selector .selected-item>.se-item-printer{width:100%;padding-right:12px}`],\r\n    encapsulation: ViewEncapsulation.None\r\n});\r\nlet SingleActiveCatalogAwareItemSelectorComponent = class SingleActiveCatalogAwareItemSelectorComponent {\r\n    constructor(data, catalogService) {\r\n        this.data = data;\r\n        this.catalogService = catalogService;\r\n        ({\r\n            editor: this.editor,\r\n            field: this.field,\r\n            model: this.model,\r\n            qualifier: this.qualifier\r\n        } = this.data);\r\n        this.catalogName = {};\r\n        this.catalogs = [];\r\n        this.itemComponent = SingeActiveCatalogAwareItemSelectorItemRendererComponent;\r\n        this.initProductCatalog = this.model.productCatalog;\r\n    }\r\n    ngOnInit() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.augmentDropdownAttributes();\r\n            return this.initProductCatalogs();\r\n        });\r\n    }\r\n    ngDoCheck() {\r\n        if (this.catalogs.length > 1 && this.initProductCatalog !== this.model.productCatalog) {\r\n            this.initProductCatalog = this.model.productCatalog;\r\n            this.resetSelector();\r\n        }\r\n    }\r\n    augmentDropdownAttributes() {\r\n        this.propertyType = this.getFieldPropertyType(this.field);\r\n        if (this.propertyType) {\r\n            this.productCatalogField = {\r\n                idAttribute: 'catalogId',\r\n                labelAttributes: ['name'],\r\n                editable: this.field.editable,\r\n                propertyType: 'productCatalog'\r\n            };\r\n            this.mainDropDownI18nKey = this.field.i18nKey;\r\n            delete this.field.i18nKey;\r\n            this.field.paged = true;\r\n            this.field.idAttribute = 'uid';\r\n            this.field.labelAttributes = ['name'];\r\n            this.field.dependsOn = 'productCatalog';\r\n            this.field.propertyType = this.propertyType;\r\n        }\r\n    }\r\n    initProductCatalogs() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const catalogs = yield this.catalogService.getProductCatalogsBySiteKey(CONTEXT_SITE_ID);\r\n            this.catalogs = catalogs;\r\n            if (this.catalogs.length === 1) {\r\n                this.model.productCatalog = this.catalogs[0].catalogId;\r\n                this.editor.form.pristine.productCatalog = this.catalogs[0].catalogId;\r\n                this.catalogName = this.catalogs[0].name;\r\n            }\r\n        });\r\n    }\r\n    getFieldPropertyType(field) {\r\n        const type = field.cmsStructureType;\r\n        return SINGLE_CATALOG_AWARE_ITEM_MAPPING[type];\r\n    }\r\n    resetSelector() {\r\n        if (typeof this.reset === 'function') {\r\n            this.reset(true);\r\n        }\r\n    }\r\n};\r\nSingleActiveCatalogAwareItemSelectorComponent = __decorate([\r\n    Component({\r\n        selector: 'se-single-active-catalog-aware-item-selector',\r\n        template: `<div *ngIf=\"propertyType\"><div id=\"product-catalog\"><label class=\"se-control-label\" [ngClass]=\"{ 'required': field.required }\" *ngIf=\"catalogs.length === 1\">{{ catalogName | seL10n | async }}</label><se-generic-editor-dropdown id=\"se-catalog-selector-dropdown\" *ngIf=\"catalogs.length > 1\" [field]=\"productCatalogField\" [qualifier]=\"'productCatalog'\" [model]=\"model\"></se-generic-editor-dropdown></div><div><label class=\"se-control-label\" [translate]=\"mainDropDownI18nKey\"></label><se-generic-editor-dropdown id=\"se-items-selector-dropdown\" [field]=\"field\" [qualifier]=\"qualifier\" [model]=\"model\" [itemComponent]=\"itemComponent\" [(reset)]=\"reset\"></se-generic-editor-dropdown></div></div><div class=\"product-catalog-item-type-missing\" *ngIf=\"!propertyType\" translate=\"se.cms.catalogawareitem.itemtype.notsupported\"></div>`,\r\n        styles: [`se-single-active-catalog-aware-item-selector .se-single-catalog-item{display:grid;grid-template-columns:2fr 1fr 2fr;grid-column-gap:1rem}se-single-active-catalog-aware-item-selector .se-single-catalog-item__code,se-single-active-catalog-aware-item-selector .se-single-catalog-item__label,se-single-active-catalog-aware-item-selector .se-single-catalog-item__version{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}se-single-active-catalog-aware-item-selector .selected-item>.se-item-printer{width:100%;padding-right:12px}`],\r\n        encapsulation: ViewEncapsulation.None\r\n    }),\r\n    __param(0, Inject(GENERIC_EDITOR_WIDGET_DATA)),\r\n    __metadata(\"design:paramtypes\", [Object, ICatalogService])\r\n], SingleActiveCatalogAwareItemSelectorComponent);\r\nexport { SingleActiveCatalogAwareItemSelectorComponent };\r\n//# sourceMappingURL=SingleActiveCatalogAwareItemSelectorComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/genericEditor/singleActiveCatalogAwareSelector/SingeActiveCatalogAwareItemSelectorItemRendererComponent.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/genericEditor/singleActiveCatalogAwareSelector/types.ts"],"map":"{\"version\":3,\"file\":\"SingleActiveCatalogAwareItemSelectorComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/genericEditor/singleActiveCatalogAwareSelector/SingleActiveCatalogAwareItemSelectorComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/genericEditor/singleActiveCatalogAwareSelector/SingleActiveCatalogAwareItemSelectorComponent.d.ts","writeByteOrderMark":false,"text":"import { OnInit } from '@angular/core';\r\nimport { GenericEditorWidgetData, GenericEditorField, ICatalogService, IBaseCatalog, IGenericEditor, TypedMap, SelectReset } from 'smarteditcommons';\r\nimport { SingeActiveCatalogAwareItemSelectorItemRendererComponent } from './SingeActiveCatalogAwareItemSelectorItemRendererComponent';\r\nimport { CMSLinkItem } from './types';\r\nexport declare enum SINGLE_CATALOG_AWARE_ITEM_MAPPING {\r\n    SingleOnlineProductSelector = \"product\",\r\n    SingleOnlineCategorySelector = \"category\"\r\n}\r\nexport declare class SingleActiveCatalogAwareItemSelectorComponent implements OnInit {\r\n    private data;\r\n    private catalogService;\r\n    mainDropDownI18nKey: string;\r\n    propertyType: SINGLE_CATALOG_AWARE_ITEM_MAPPING;\r\n    qualifier: string;\r\n    catalogName: TypedMap<string>;\r\n    catalogs: IBaseCatalog[];\r\n    editor: IGenericEditor;\r\n    field: GenericEditorField;\r\n    itemComponent: typeof SingeActiveCatalogAwareItemSelectorItemRendererComponent;\r\n    model: CMSLinkItem;\r\n    productCatalogField: GenericEditorField;\r\n    reset: SelectReset;\r\n    private initProductCatalog;\r\n    constructor(data: GenericEditorWidgetData<CMSLinkItem>, catalogService: ICatalogService);\r\n    ngOnInit(): Promise<void>;\r\n    ngDoCheck(): void;\r\n    private augmentDropdownAttributes;\r\n    private initProductCatalogs;\r\n    private getFieldPropertyType;\r\n    private resetSelector;\r\n}\r\n"}}
