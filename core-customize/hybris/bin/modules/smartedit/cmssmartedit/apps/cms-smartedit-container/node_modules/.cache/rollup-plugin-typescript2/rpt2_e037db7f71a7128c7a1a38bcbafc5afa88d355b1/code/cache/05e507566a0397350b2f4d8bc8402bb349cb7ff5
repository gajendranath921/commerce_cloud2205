{"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { IComponentVisibilityAlertService, ComponentVisibilityAlertComponent } from 'cmscommons';\r\nimport { GatewayProxied, IAlertService, IAlertServiceType, ISharedDataService, SeDowngradeService, EXPERIENCE_STORAGE_KEY } from 'smarteditcommons';\r\nimport { ActionableAlertService } from './ActionableAlertService';\r\nvar AlertMessage;\r\n(function (AlertMessage) {\r\n    AlertMessage[\"HIDDEN\"] = \"se.cms.component.visibility.alert.description.hidden\";\r\n    AlertMessage[\"RESTRICTED\"] = \"se.cms.component.visibility.alert.description.restricted\";\r\n})(AlertMessage || (AlertMessage = {}));\r\nlet /* @ngInject */ ComponentVisibilityAlertService = class /* @ngInject */ ComponentVisibilityAlertService extends IComponentVisibilityAlertService {\r\n    constructor(sharedDataService, alertService, actionableAlertService) {\r\n        super();\r\n        this.sharedDataService = sharedDataService;\r\n        this.alertService = alertService;\r\n        this.actionableAlertService = actionableAlertService;\r\n    }\r\n    checkAndAlertOnComponentVisibility(component) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const shouldShowAlert = !component.visible || component.restricted;\r\n            if (!shouldShowAlert) {\r\n                return;\r\n            }\r\n            const experience = (yield this.sharedDataService.get(EXPERIENCE_STORAGE_KEY));\r\n            const message = !component.visible ? AlertMessage.HIDDEN : AlertMessage.RESTRICTED;\r\n            const isExternal = component.catalogVersion !== experience.pageContext.catalogVersionUuid;\r\n            if (isExternal) {\r\n                this.alertService.showAlert({\r\n                    message\r\n                });\r\n            }\r\n            else {\r\n                const actionableAlertConf = {\r\n                    component: ComponentVisibilityAlertComponent,\r\n                    duration: 6000,\r\n                    data: {\r\n                        component,\r\n                        message\r\n                    }\r\n                };\r\n                this.actionableAlertService.displayActionableAlert(actionableAlertConf, IAlertServiceType.INFO);\r\n            }\r\n        });\r\n    }\r\n};\r\n/* @ngInject */ ComponentVisibilityAlertService = __decorate([\r\n    SeDowngradeService(IComponentVisibilityAlertService),\r\n    GatewayProxied('checkAndAlertOnComponentVisibility'),\r\n    __metadata(\"design:paramtypes\", [ISharedDataService,\r\n        IAlertService,\r\n        ActionableAlertService])\r\n], /* @ngInject */ ComponentVisibilityAlertService);\r\nexport { /* @ngInject */ ComponentVisibilityAlertService };\r\n//# sourceMappingURL=ComponentVisibilityAlertServiceOuter.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/actionableAlert/ActionableAlertService.ts"],"map":"{\"version\":3,\"file\":\"ComponentVisibilityAlertServiceOuter.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/services/actionableAlert/ComponentVisibilityAlertServiceOuter.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EACH,gCAAgC,EAChC,iCAAiC,EAEpC,MAAM,YAAY,CAAC;AACpB,OAAO,EACH,cAAc,EAEd,aAAa,EACb,iBAAiB,EAEjB,kBAAkB,EAClB,kBAAkB,EAClB,sBAAsB,EACzB,MAAM,kBAAkB,CAAC;AAC1B,OAAO,EAAE,sBAAsB,EAAE,MAAM,0BAA0B,CAAC;AAElE,IAAK,YAGJ;AAHD,WAAK,YAAY;IACb,+EAA+D,CAAA;IAC/D,uFAAuE,CAAA;AAC3E,CAAC,EAHI,YAAY,KAAZ,YAAY,QAGhB;AAID,sDAAA,qDAA6C,SAAQ,gCAAgC;IACjF,YACY,iBAAqC,EACrC,YAA2B,EAC3B,sBAA8C;QAEtD,KAAK,EAAE,CAAC;QAJA,sBAAiB,GAAjB,iBAAiB,CAAoB;QACrC,iBAAY,GAAZ,YAAY,CAAe;QAC3B,2BAAsB,GAAtB,sBAAsB,CAAwB;IAG1D,CAAC;IAEY,kCAAkC,CAAC,SAAwB;;YACpE,MAAM,eAAe,GAAG,CAAC,SAAS,CAAC,OAAO,IAAI,SAAS,CAAC,UAAU,CAAC;YACnE,IAAI,CAAC,eAAe,EAAE;gBAClB,OAAO;aACV;YAED,MAAM,UAAU,GAAG,CAAC,MAAM,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAChD,sBAAsB,CACzB,CAAgB,CAAC;YAElB,MAAM,OAAO,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,UAAU,CAAC;YAEnF,MAAM,UAAU,GAAG,SAAS,CAAC,cAAc,KAAK,UAAU,CAAC,WAAW,CAAC,kBAAkB,CAAC;YAC1F,IAAI,UAAU,EAAE;gBACZ,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC;oBACxB,OAAO;iBACV,CAAC,CAAC;aACN;iBAAM;gBACH,MAAM,mBAAmB,GAAiB;oBACtC,SAAS,EAAE,iCAAiC;oBAC5C,QAAQ,EAAE,IAAI;oBACd,IAAI,EAAE;wBACF,SAAS;wBACT,OAAO;qBACV;iBACJ,CAAC;gBACF,IAAI,CAAC,sBAAsB,CAAC,sBAAsB,CAC9C,mBAAmB,EACnB,iBAAiB,CAAC,IAAI,CACzB,CAAC;aACL;QACL,CAAC;KAAA;CACJ,CAAA;AAzCD;IAFC,kBAAkB,CAAC,gCAAgC,CAAC;IACpD,cAAc,CAAC,oCAAoC,CAAC;qCAGlB,kBAAkB;QACvB,aAAa;QACH,sBAAsB;mDAqC7D\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/services/actionableAlert/ComponentVisibilityAlertServiceOuter.d.ts","writeByteOrderMark":false,"text":"import { IComponentVisibilityAlertService, SlotComponent } from 'cmscommons';\r\nimport { IAlertService, ISharedDataService } from 'smarteditcommons';\r\nimport { ActionableAlertService } from './ActionableAlertService';\r\nexport declare class ComponentVisibilityAlertService extends IComponentVisibilityAlertService {\r\n    private sharedDataService;\r\n    private alertService;\r\n    private actionableAlertService;\r\n    constructor(sharedDataService: ISharedDataService, alertService: IAlertService, actionableAlertService: ActionableAlertService);\r\n    checkAndAlertOnComponentVisibility(component: SlotComponent): Promise<void>;\r\n}\r\n"}}
