{"code":"import { __awaiter, __decorate, __metadata, __param } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { Component, Inject } from '@angular/core';\r\nimport { merge, cloneDeep } from 'lodash';\r\nimport { GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT, IAlertService, IConfirmationModalService, IExperienceService, ISharedDataService, SeDowngradeComponent, SystemEventService, WizardService, WIZARD_MANAGER, EXPERIENCE_STORAGE_KEY, ISyncPollingService } from 'smarteditcommons';\r\nimport { PageFacade } from '../../../facades';\r\nimport { ClonePageAlertService } from '../../../services/actionableAlert/ClonePageAlertService';\r\nimport { RestrictionTypesService } from '../../../services/pageRestrictions/RestrictionTypesService';\r\nimport { RestrictionsStepHandlerFactory } from '../../../services/pages/RestrictionsStepHandlerFactory';\r\nimport { RestrictionsService } from '../../../services/RestrictionsService';\r\nimport { ClonePageBuilderFactory } from './ClonePageBuilderFactory';\r\nimport { ClonePageInfoStepComponent, ClonePageOptionsStepComponent, ClonePageRestrictionsStepComponent } from './wizardSteps';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"ClonePageWizardComponent\", {\r\n    selector: 'se-clone-page-wizard',\r\n    template: ''\r\n});\r\nlet /* @ngInject */ ClonePageWizardComponent = class /* @ngInject */ ClonePageWizardComponent {\r\n    constructor(wizardManager, clonePageBuilderFactory, restrictionsStepHandlerFactory, experienceService, confirmationModalService, systemEventService, restrictionTypesService, restrictionsService, sharedDataService, clonePageAlertService, alertService, pageFacade, syncPollingService) {\r\n        this.wizardManager = wizardManager;\r\n        this.clonePageBuilderFactory = clonePageBuilderFactory;\r\n        this.restrictionsStepHandlerFactory = restrictionsStepHandlerFactory;\r\n        this.experienceService = experienceService;\r\n        this.confirmationModalService = confirmationModalService;\r\n        this.systemEventService = systemEventService;\r\n        this.restrictionTypesService = restrictionTypesService;\r\n        this.restrictionsService = restrictionsService;\r\n        this.sharedDataService = sharedDataService;\r\n        this.clonePageAlertService = clonePageAlertService;\r\n        this.alertService = alertService;\r\n        this.pageFacade = pageFacade;\r\n        this.syncPollingService = syncPollingService;\r\n        // Enumerable methods\r\n        // This way of defining method creates a public field in class instead of prototype method\r\n        // which allows then to be reassigned/extended in ModalWizardTemplateComponent#assignAngularController\r\n        this.getWizardConfig = () => ({\r\n            isFormValid: (stepId) => this.isFormValid(stepId),\r\n            onNext: () => this.onNext(),\r\n            onDone: () => this.onDone(),\r\n            onCancel: () => this.onCancel(),\r\n            steps: [\r\n                {\r\n                    id: this.CLONE_PAGE_WIZARD_STEPS.PAGE_CLONE_OPTIONS,\r\n                    name: 'se.cms.clonepagewizard.pagecloneoptions.tabname',\r\n                    title: 'se.cms.clonepagewizard.pageclone.title',\r\n                    component: ClonePageOptionsStepComponent\r\n                },\r\n                {\r\n                    id: this.CLONE_PAGE_WIZARD_STEPS.PAGE_INFO,\r\n                    name: 'se.cms.clonepagewizard.pageinfo.tabname',\r\n                    title: 'se.cms.clonepagewizard.pageclone.title',\r\n                    component: ClonePageInfoStepComponent\r\n                }\r\n            ]\r\n        });\r\n        this.getRestrictionTypes = () => this.restrictionTypesService.getRestrictionTypesByPageType(this.getPageTypeCode());\r\n        this.getSupportedRestrictionTypes = () => this.restrictionsService.getSupportedRestrictionTypeCodes();\r\n        this.variationResult = (displayConditionResult) => {\r\n            this.infoChanged = true;\r\n            this.pageBuilder.displayConditionSelected(displayConditionResult);\r\n        };\r\n        this.basePageUUID = this.wizardManager.properties.basePageUUID;\r\n        this.callbacks = {};\r\n        this.uriContext = this.wizardManager.properties.uriContext;\r\n        this.restrictionStepProperties = {\r\n            id: 'restrictionsStepId',\r\n            name: 'se.cms.restrictions.editor.tab',\r\n            title: 'se.cms.clonepagewizard.pageclone.title',\r\n            component: ClonePageRestrictionsStepComponent\r\n        };\r\n        // bound in the view for restrictions step\r\n        const restrictionsEditorFunctionBindingsClosure = {};\r\n        this.restrictionsEditorFunctionBindings = restrictionsEditorFunctionBindingsClosure;\r\n        this.cloneInProgress = false;\r\n        this.infoChanged = true;\r\n        this.typeChanged = true;\r\n        this.restrictionsStepHandler = this.restrictionsStepHandlerFactory.createRestrictionsStepHandler(this.wizardManager, this.restrictionsEditorFunctionBindings, this.restrictionStepProperties);\r\n        this.pageBuilder = this.clonePageBuilderFactory.createClonePageBuilder(this.restrictionsStepHandler, this.basePageUUID, this.uriContext);\r\n        this.pageBuilder.init();\r\n        this.CLONE_PAGE_WIZARD_STEPS = {\r\n            PAGE_CLONE_OPTIONS: 'cloneOptions',\r\n            PAGE_INFO: 'pageInfo',\r\n            PAGE_RESTRICTIONS: this.restrictionStepProperties.id\r\n        };\r\n    }\r\n    // Class Methods\r\n    getPageTypeCode() {\r\n        return this.pageBuilder.getPageTypeCode();\r\n    }\r\n    getPageLabel() {\r\n        return this.pageBuilder.getPageLabel();\r\n    }\r\n    getBasePageUuid() {\r\n        return this.pageBuilder.getBasePageUuid();\r\n    }\r\n    getPageTemplate() {\r\n        return this.pageBuilder.getPageTemplate();\r\n    }\r\n    getPageInfo() {\r\n        const page = this.pageBuilder.getPageInfo();\r\n        page.uriContext = this.uriContext;\r\n        return page;\r\n    }\r\n    getBasePageInfo() {\r\n        const page = this.pageBuilder.getBasePageInfo();\r\n        page.uriContext = this.uriContext;\r\n        return page;\r\n    }\r\n    getPageRestrictions() {\r\n        return this.pageBuilder.getPageRestrictions();\r\n    }\r\n    onTargetCatalogVersionSelected(catalogVersion) {\r\n        this.pageBuilder.onTargetCatalogVersionSelected(catalogVersion);\r\n    }\r\n    triggerUpdateCloneOptionResult(cloneOptionResult) {\r\n        this.pageBuilder.componentCloneOptionSelected(cloneOptionResult);\r\n    }\r\n    getPageInfoStructure() {\r\n        return this.pageBuilder.getPageInfoStructure();\r\n    }\r\n    restrictionsResult(data) {\r\n        this.pageBuilder.restrictionsSelected(data.onlyOneRestrictionMustApply, data.restrictionUuids);\r\n    }\r\n    isRestrictionsActive() {\r\n        if (!this.typeChanged ||\r\n            this.wizardManager.getCurrentStepId() === this.CLONE_PAGE_WIZARD_STEPS.PAGE_RESTRICTIONS) {\r\n            this.typeChanged = false;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    isPageInfoActive() {\r\n        if (!this.infoChanged ||\r\n            this.wizardManager.getCurrentStepId() === this.CLONE_PAGE_WIZARD_STEPS.PAGE_INFO) {\r\n            this.infoChanged = false;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    getTargetCatalogVersion() {\r\n        return this.pageBuilder.getTargetCatalogVersion();\r\n    }\r\n    isBasePageInfoAvailable() {\r\n        return this.pageBuilder.isBasePageInfoAvailable();\r\n    }\r\n    onCancel() {\r\n        return this.confirmationModalService.confirm({\r\n            description: 'se.editor.cancel.confirm'\r\n        });\r\n    }\r\n    isFormValid(stepId) {\r\n        switch (stepId) {\r\n            case this.CLONE_PAGE_WIZARD_STEPS.PAGE_CLONE_OPTIONS:\r\n                // This step has no required inputs. However we set the valid status as soon as the data is fetched\r\n                // to avoid modal NEXT button enabled status to be true before content is actually loaded.\r\n                return this.isBasePageInfoAvailable();\r\n            case this.CLONE_PAGE_WIZARD_STEPS.PAGE_INFO:\r\n                return (!this.cloneInProgress &&\r\n                    !!this.callbacks.isValidPageInfo &&\r\n                    this.callbacks.isValidPageInfo());\r\n            case this.CLONE_PAGE_WIZARD_STEPS.PAGE_RESTRICTIONS:\r\n                return !this.cloneInProgress && this.pageBuilder.getPageRestrictions().length > 0;\r\n        }\r\n        return false;\r\n    }\r\n    onNext() {\r\n        return true;\r\n    }\r\n    onDone() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.cloneInProgress = true;\r\n            try {\r\n                const page = yield this.callbacks.savePageInfo();\r\n                const payload = this.preparePagePayload(page);\r\n                if (this.pageBuilder.getTargetCatalogVersion()) {\r\n                    payload.siteId = this.pageBuilder.getTargetCatalogVersion().siteId;\r\n                    payload.catalogId = this.pageBuilder.getTargetCatalogVersion().catalogId;\r\n                    payload.version = this.pageBuilder.getTargetCatalogVersion().version;\r\n                }\r\n                const experience = (yield this.sharedDataService.get(EXPERIENCE_STORAGE_KEY));\r\n                yield this.createPage(payload, experience);\r\n            }\r\n            catch (_a) {\r\n                // re-enable the button\r\n                this.cloneInProgress = false;\r\n                // prevent closing modal when there's an error\r\n                return Promise.reject();\r\n            }\r\n        });\r\n    }\r\n    createPage(payload, experience) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                const response = yield this.pageFacade.createPageForSite(payload, payload.siteId);\r\n                this.syncPollingService.getSyncStatus(payload.pageUuid, this.uriContext, true);\r\n                if (experience.catalogDescriptor.catalogVersionUuid === response.catalogVersion) {\r\n                    this.experienceService.loadExperience({\r\n                        siteId: payload.siteId,\r\n                        catalogId: payload.catalogId,\r\n                        catalogVersion: payload.version,\r\n                        pageId: response.uid\r\n                    });\r\n                }\r\n                else {\r\n                    this.clonePageAlertService.displayClonePageAlert(response);\r\n                }\r\n                return this.alertService.showSuccess({\r\n                    message: 'se.cms.clonepage.alert.success'\r\n                });\r\n            }\r\n            catch (exception) {\r\n                this.cloneInProgress = false; // re-enable the button\r\n                this.systemEventService.publishAsync(GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT, {\r\n                    messages: exception.error.errors\r\n                });\r\n                const errors = exception.error.errors;\r\n                if (!errors.find((error) => error.subject.indexOf('restrictions') === 0)) {\r\n                    this.wizardManager.goToStepWithId(this.CLONE_PAGE_WIZARD_STEPS.PAGE_INFO);\r\n                }\r\n                return Promise.reject();\r\n            }\r\n        });\r\n    }\r\n    preparePagePayload(page) {\r\n        const newClonePage = cloneDeep(page);\r\n        // set page info properties\r\n        merge(newClonePage, this.pageBuilder.getPageProperties());\r\n        // set clone option\r\n        newClonePage.cloneComponents = this.pageBuilder.getComponentCloneOption() === 'clone';\r\n        newClonePage.itemtype = page.typeCode;\r\n        // set linkComponents to [].\r\n        // As when clone page,\r\n        // the link component should remain refer to old page.\r\n        if (newClonePage.linkComponents && newClonePage.linkComponents.length > 0) {\r\n            newClonePage.linkComponents = [];\r\n        }\r\n        if (this.isRestrictionsActive()) {\r\n            // set restrictions\r\n            newClonePage.restrictions = this.pageBuilder.getPageRestrictions();\r\n        }\r\n        return newClonePage;\r\n    }\r\n};\r\n/* @ngInject */ ClonePageWizardComponent = __decorate([\r\n    SeDowngradeComponent(),\r\n    Component({\r\n        selector: 'se-clone-page-wizard',\r\n        template: ''\r\n    }),\r\n    __param(0, Inject(WIZARD_MANAGER)),\r\n    __metadata(\"design:paramtypes\", [WizardService,\r\n        ClonePageBuilderFactory,\r\n        RestrictionsStepHandlerFactory,\r\n        IExperienceService,\r\n        IConfirmationModalService,\r\n        SystemEventService,\r\n        RestrictionTypesService,\r\n        RestrictionsService,\r\n        ISharedDataService,\r\n        ClonePageAlertService,\r\n        IAlertService,\r\n        PageFacade,\r\n        ISyncPollingService])\r\n], /* @ngInject */ ClonePageWizardComponent);\r\nexport { /* @ngInject */ ClonePageWizardComponent };\r\n//# sourceMappingURL=ClonePageWizardComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types+lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/dao/RestrictionTypesRestService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/facades/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/actionableAlert/ClonePageAlertService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pageRestrictions/RestrictionTypesService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pages/RestrictionsStepHandlerFactory.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pages/types.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/RestrictionsService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pages/pageWizard/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pages/clonePageWizard/ClonePageBuilderFactory.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pages/clonePageWizard/wizardSteps/index.ts"],"map":"{\"version\":3,\"file\":\"ClonePageWizardComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/pages/clonePageWizard/ClonePageWizardComponent.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AAElD,OAAO,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,QAAQ,CAAC;AAC1C,OAAO,EAEH,kDAAkD,EAClD,aAAa,EAEb,yBAAyB,EAEzB,kBAAkB,EAClB,kBAAkB,EAElB,oBAAoB,EACpB,kBAAkB,EAIlB,aAAa,EAEb,cAAc,EACd,sBAAsB,EAGtB,mBAAmB,EACtB,MAAM,kBAAkB,CAAC;AAE1B,OAAO,EAAE,UAAU,EAAE,MAAM,kBAAkB,CAAC;AAC9C,OAAO,EAAE,qBAAqB,EAAE,MAAM,yDAAyD,CAAC;AAChG,OAAO,EAAE,uBAAuB,EAAE,MAAM,4DAA4D,CAAC;AACrG,OAAO,EAEH,8BAA8B,EACjC,MAAM,wDAAwD,CAAC;AAEhE,OAAO,EAAE,mBAAmB,EAAE,MAAM,uCAAuC,CAAC;AAG5E,OAAO,EAAoB,uBAAuB,EAAE,MAAM,2BAA2B,CAAC;AACtF,OAAO,EACH,0BAA0B,EAC1B,6BAA6B,EAC7B,kCAAkC,EACrC,MAAM,eAAe,CAAC;kFAGZ;IACP,QAAQ,EAAE,sBAAsB;IAChC,QAAQ,EAAE,EAAE;CACf;AACD,+CAAA;IAgBI,YACoC,aAA4B,EACpD,uBAAgD,EAChD,8BAA8D,EAC9D,iBAAqC,EACrC,wBAAmD,EACnD,kBAAsC,EACtC,uBAAgD,EAChD,mBAAwC,EACxC,iBAAqC,EACrC,qBAA4C,EAC5C,YAA2B,EAC3B,UAAsB,EACtB,kBAAuC;QAZf,kBAAa,GAAb,aAAa,CAAe;QACpD,4BAAuB,GAAvB,uBAAuB,CAAyB;QAChD,mCAA8B,GAA9B,8BAA8B,CAAgC;QAC9D,sBAAiB,GAAjB,iBAAiB,CAAoB;QACrC,6BAAwB,GAAxB,wBAAwB,CAA2B;QACnD,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,4BAAuB,GAAvB,uBAAuB,CAAyB;QAChD,wBAAmB,GAAnB,mBAAmB,CAAqB;QACxC,sBAAiB,GAAjB,iBAAiB,CAAoB;QACrC,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,iBAAY,GAAZ,YAAY,CAAe;QAC3B,eAAU,GAAV,UAAU,CAAY;QACtB,uBAAkB,GAAlB,kBAAkB,CAAqB;QAuCnD,qBAAqB;QACrB,0FAA0F;QAC1F,sGAAsG;QAC/F,oBAAe,GAAG,GAAiB,EAAE,CAAC,CAAC;YAC1C,WAAW,EAAE,CAAC,MAAc,EAAW,EAAE,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YAClE,MAAM,EAAE,GAAY,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE;YACpC,MAAM,EAAE,GAAiB,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE;YACzC,QAAQ,EAAE,GAAiB,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE;YAC7C,KAAK,EAAE;gBACH;oBACI,EAAE,EAAE,IAAI,CAAC,uBAAuB,CAAC,kBAAkB;oBACnD,IAAI,EAAE,iDAAiD;oBACvD,KAAK,EAAE,wCAAwC;oBAC/C,SAAS,EAAE,6BAA6B;iBAC3C;gBACD;oBACI,EAAE,EAAE,IAAI,CAAC,uBAAuB,CAAC,SAAS;oBAC1C,IAAI,EAAE,yCAAyC;oBAC/C,KAAK,EAAE,wCAAwC;oBAC/C,SAAS,EAAE,0BAA0B;iBACxC;aACJ;SACJ,CAAC,CAAC;QAEI,wBAAmB,GAAG,GAAgC,EAAE,CAC3D,IAAI,CAAC,uBAAuB,CAAC,6BAA6B,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;QAEhF,iCAA4B,GAAG,GAAsB,EAAE,CAC1D,IAAI,CAAC,mBAAmB,CAAC,gCAAgC,EAAE,CAAC;QAEzD,oBAAe,GAAG,CAAC,sBAAgC,EAAQ,EAAE;YAChE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,WAAW,CAAC,wBAAwB,CAAC,sBAAsB,CAAC,CAAC;QACtE,CAAC,CAAC;QAtEE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,YAAY,CAAC;QAC/D,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,UAAU,CAAC;QAC3D,IAAI,CAAC,yBAAyB,GAAG;YAC7B,EAAE,EAAE,oBAAoB;YACxB,IAAI,EAAE,gCAAgC;YACtC,KAAK,EAAE,wCAAwC;YAC/C,SAAS,EAAE,kCAAkC;SAChD,CAAC;QACF,0CAA0C;QAC1C,MAAM,yCAAyC,GAAG,EAAE,CAAC;QACrD,IAAI,CAAC,kCAAkC,GAAG,yCAAyC,CAAC;QAEpF,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAExB,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,8BAA8B,CAAC,6BAA6B,CAC5F,IAAI,CAAC,aAAa,EAClB,IAAI,CAAC,kCAAkC,EACvC,IAAI,CAAC,yBAAyB,CACjC,CAAC;QAEF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,uBAAuB,CAAC,sBAAsB,CAClE,IAAI,CAAC,uBAAuB,EAC5B,IAAI,CAAC,YAAY,EACjB,IAAI,CAAC,UAAU,CAClB,CAAC;QACF,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;QAExB,IAAI,CAAC,uBAAuB,GAAG;YAC3B,kBAAkB,EAAE,cAAc;YAClC,SAAS,EAAE,UAAU;YACrB,iBAAiB,EAAE,IAAI,CAAC,yBAAyB,CAAC,EAAE;SACvD,CAAC;IACN,CAAC;IAqCD,gBAAgB;IACT,eAAe;QAClB,OAAO,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;IAC9C,CAAC;IAEM,YAAY;QACf,OAAO,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;IAC3C,CAAC;IAEM,eAAe;QAClB,OAAO,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;IAC9C,CAAC;IAEM,eAAe;QAClB,OAAO,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;IAC9C,CAAC;IAEM,WAAW;QACd,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,CAAC;QAC5C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QAElC,OAAO,IAAI,CAAC;IAChB,CAAC;IAEM,eAAe;QAClB,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;QAChD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QAClC,OAAO,IAAI,CAAC;IAChB,CAAC;IAEM,mBAAmB;QACtB,OAAO,IAAI,CAAC,WAAW,CAAC,mBAAmB,EAAE,CAAC;IAClD,CAAC;IAEM,8BAA8B,CAAC,cAA+B;QACjE,IAAI,CAAC,WAAW,CAAC,8BAA8B,CAAC,cAAc,CAAC,CAAC;IACpE,CAAC;IAEM,8BAA8B,CAAC,iBAAyB;QAC3D,IAAI,CAAC,WAAW,CAAC,4BAA4B,CAAC,iBAAiB,CAAC,CAAC;IACrE,CAAC;IAEM,oBAAoB;QACvB,OAAO,IAAI,CAAC,WAAW,CAAC,oBAAoB,EAAE,CAAC;IACnD,CAAC;IAEM,kBAAkB,CAAC,IAAqB;QAC3C,IAAI,CAAC,WAAW,CAAC,oBAAoB,CACjC,IAAI,CAAC,2BAA2B,EAChC,IAAI,CAAC,gBAAgB,CACxB,CAAC;IACN,CAAC;IAEM,oBAAoB;QACvB,IACI,CAAC,IAAI,CAAC,WAAW;YACjB,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE,KAAK,IAAI,CAAC,uBAAuB,CAAC,iBAAiB,EAC1F;YACE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,OAAO,IAAI,CAAC;SACf;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAEM,gBAAgB;QACnB,IACI,CAAC,IAAI,CAAC,WAAW;YACjB,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE,KAAK,IAAI,CAAC,uBAAuB,CAAC,SAAS,EAClF;YACE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,OAAO,IAAI,CAAC;SACf;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAEM,uBAAuB;QAC1B,OAAO,IAAI,CAAC,WAAW,CAAC,uBAAuB,EAAE,CAAC;IACtD,CAAC;IAEM,uBAAuB;QAC1B,OAAO,IAAI,CAAC,WAAW,CAAC,uBAAuB,EAAE,CAAC;IACtD,CAAC;IAEM,QAAQ;QACX,OAAO,IAAI,CAAC,wBAAwB,CAAC,OAAO,CAAC;YACzC,WAAW,EAAE,0BAA0B;SAC1C,CAAiB,CAAC;IACvB,CAAC;IAEM,WAAW,CAAC,MAAc;QAC7B,QAAQ,MAAM,EAAE;YACZ,KAAK,IAAI,CAAC,uBAAuB,CAAC,kBAAkB;gBAChD,mGAAmG;gBACnG,0FAA0F;gBAC1F,OAAO,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAE1C,KAAK,IAAI,CAAC,uBAAuB,CAAC,SAAS;gBACvC,OAAO,CACH,CAAC,IAAI,CAAC,eAAe;oBACrB,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe;oBAChC,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE,CACnC,CAAC;YAEN,KAAK,IAAI,CAAC,uBAAuB,CAAC,iBAAiB;gBAC/C,OAAO,CAAC,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,WAAW,CAAC,mBAAmB,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC;SACzF;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;IAEM,MAAM;QACT,OAAO,IAAI,CAAC;IAChB,CAAC;IAEY,MAAM;;YACf,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;YAC5B,IAAI;gBACA,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC;gBACjD,MAAM,OAAO,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;gBAE9C,IAAI,IAAI,CAAC,WAAW,CAAC,uBAAuB,EAAE,EAAE;oBAC5C,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,uBAAuB,EAAE,CAAC,MAAM,CAAC;oBACnE,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,uBAAuB,EAAE,CAAC,SAAS,CAAC;oBACzE,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,uBAAuB,EAAE,CAAC,OAAO,CAAC;iBACxE;gBACD,MAAM,UAAU,GAAG,CAAC,MAAM,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAChD,sBAAsB,CACzB,CAAgB,CAAC;gBAElB,MAAM,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;aAC9C;YAAC,WAAM;gBACJ,uBAAuB;gBACvB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;gBAC7B,8CAA8C;gBAC9C,OAAO,OAAO,CAAC,MAAM,EAAE,CAAC;aAC3B;QACL,CAAC;KAAA;IAEa,UAAU,CAAC,OAAiB,EAAE,UAAuB;;YAC/D,IAAI;gBACA,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,OAAO,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;gBAClF,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;gBAE/E,IAAI,UAAU,CAAC,iBAAiB,CAAC,kBAAkB,KAAK,QAAQ,CAAC,cAAc,EAAE;oBAC7E,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC;wBAClC,MAAM,EAAE,OAAO,CAAC,MAAM;wBACtB,SAAS,EAAE,OAAO,CAAC,SAAS;wBAC5B,cAAc,EAAE,OAAO,CAAC,OAAO;wBAC/B,MAAM,EAAE,QAAQ,CAAC,GAAG;qBACvB,CAAC,CAAC;iBACN;qBAAM;oBACH,IAAI,CAAC,qBAAqB,CAAC,qBAAqB,CAAC,QAAQ,CAAC,CAAC;iBAC9D;gBAED,OAAO,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC;oBACjC,OAAO,EAAE,gCAAgC;iBAC5C,CAAC,CAAC;aACN;YAAC,OAAO,SAAS,EAAE;gBAChB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC,CAAC,uBAAuB;gBACrD,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAChC,kDAAkD,EAClD;oBACI,QAAQ,EAAE,SAAS,CAAC,KAAK,CAAC,MAAM;iBACnC,CACJ,CAAC;gBACF,MAAM,MAAM,GAAG,SAAS,CAAC,KAAK,CAAC,MAA2B,CAAC;gBAE3D,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,EAAE;oBACtE,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,IAAI,CAAC,uBAAuB,CAAC,SAAS,CAAC,CAAC;iBAC7E;gBAED,OAAO,OAAO,CAAC,MAAM,EAAE,CAAC;aAC3B;QACL,CAAC;KAAA;IAEO,kBAAkB,CAAC,IAAc;QACrC,MAAM,YAAY,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;QAErC,2BAA2B;QAC3B,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,WAAW,CAAC,iBAAiB,EAAE,CAAC,CAAC;QAC1D,mBAAmB;QACnB,YAAY,CAAC,eAAe,GAAG,IAAI,CAAC,WAAW,CAAC,uBAAuB,EAAE,KAAK,OAAO,CAAC;QACtF,YAAY,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QACtC,4BAA4B;QAC5B,sBAAsB;QACtB,sDAAsD;QACtD,IAAI,YAAY,CAAC,cAAc,IAAI,YAAY,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;YACvE,YAAY,CAAC,cAAc,GAAG,EAAE,CAAC;SACpC;QAED,IAAI,IAAI,CAAC,oBAAoB,EAAE,EAAE;YAC7B,mBAAmB;YACnB,YAAY,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC,mBAAmB,EAAE,CAAC;SACtE;QAED,OAAO,YAAY,CAAC;IACxB,CAAC;CACJ,CAAA;AA5SD;IALC,oBAAoB,EAAE;IACtB,SAAS,CAAC;QACP,QAAQ,EAAE,sBAAsB;QAChC,QAAQ,EAAE,EAAE;KACf,CAAC;IAkBO,WAAA,MAAM,CAAC,cAAc,CAAC,CAAA;qCAAwB,aAAa;QAC3B,uBAAuB;QAChB,8BAA8B;QAC3C,kBAAkB;QACX,yBAAyB;QAC/B,kBAAkB;QACb,uBAAuB;QAC3B,mBAAmB;QACrB,kBAAkB;QACd,qBAAqB;QAC9B,aAAa;QACf,UAAU;QACF,mBAAmB;4CA+QtD\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/pages/clonePageWizard/ClonePageWizardComponent.d.ts","writeByteOrderMark":false,"text":"import { GenericEditorStructure, IAlertService, ICatalogVersion, IConfirmationModalService, IExperienceService, ISharedDataService, IUriContext, SystemEventService, WizardConfig, WizardService, WizardStep, ICMSPage, CMSPageTypes, ISyncPollingService } from 'smarteditcommons';\r\nimport { IRestrictionType } from '../../../dao/RestrictionTypesRestService';\r\nimport { PageFacade } from '../../../facades';\r\nimport { ClonePageAlertService } from '../../../services/actionableAlert/ClonePageAlertService';\r\nimport { RestrictionTypesService } from '../../../services/pageRestrictions/RestrictionTypesService';\r\nimport { RestrictionsStepHandlerFactory } from '../../../services/pages/RestrictionsStepHandlerFactory';\r\nimport { RestrictionsEditorFunctionBindings } from '../../../services/pages/types';\r\nimport { RestrictionsService } from '../../../services/RestrictionsService';\r\nimport { RestrictionsDTO, WizardCallbacks, WizardStepApi } from '../pageWizard';\r\nimport { ClonePageBuilderFactory } from './ClonePageBuilderFactory';\r\nexport declare class ClonePageWizardComponent implements WizardStepApi {\r\n    private wizardManager;\r\n    private clonePageBuilderFactory;\r\n    private restrictionsStepHandlerFactory;\r\n    private experienceService;\r\n    private confirmationModalService;\r\n    private systemEventService;\r\n    private restrictionTypesService;\r\n    private restrictionsService;\r\n    private sharedDataService;\r\n    private clonePageAlertService;\r\n    private alertService;\r\n    private pageFacade;\r\n    private syncPollingService;\r\n    uriContext: IUriContext;\r\n    callbacks: WizardCallbacks;\r\n    basePageUUID: string;\r\n    restrictionStepProperties: WizardStep;\r\n    restrictionsEditorFunctionBindings: RestrictionsEditorFunctionBindings;\r\n    typeChanged: boolean;\r\n    infoChanged: boolean;\r\n    private cloneInProgress;\r\n    private restrictionsStepHandler;\r\n    private pageBuilder;\r\n    private readonly CLONE_PAGE_WIZARD_STEPS;\r\n    constructor(wizardManager: WizardService, clonePageBuilderFactory: ClonePageBuilderFactory, restrictionsStepHandlerFactory: RestrictionsStepHandlerFactory, experienceService: IExperienceService, confirmationModalService: IConfirmationModalService, systemEventService: SystemEventService, restrictionTypesService: RestrictionTypesService, restrictionsService: RestrictionsService, sharedDataService: ISharedDataService, clonePageAlertService: ClonePageAlertService, alertService: IAlertService, pageFacade: PageFacade, syncPollingService: ISyncPollingService);\r\n    getWizardConfig: () => WizardConfig;\r\n    getRestrictionTypes: () => Promise<IRestrictionType[]>;\r\n    getSupportedRestrictionTypes: () => Promise<string[]>;\r\n    variationResult: (displayConditionResult: ICMSPage) => void;\r\n    getPageTypeCode(): CMSPageTypes;\r\n    getPageLabel(): string;\r\n    getBasePageUuid(): string;\r\n    getPageTemplate(): string;\r\n    getPageInfo(): ICMSPage;\r\n    getBasePageInfo(): ICMSPage;\r\n    getPageRestrictions(): string[];\r\n    onTargetCatalogVersionSelected(catalogVersion: ICatalogVersion): void;\r\n    triggerUpdateCloneOptionResult(cloneOptionResult: string): void;\r\n    getPageInfoStructure(): GenericEditorStructure;\r\n    restrictionsResult(data: RestrictionsDTO): void;\r\n    isRestrictionsActive(): boolean;\r\n    isPageInfoActive(): boolean;\r\n    getTargetCatalogVersion(): ICatalogVersion;\r\n    isBasePageInfoAvailable(): boolean;\r\n    onCancel(): Promise<any>;\r\n    isFormValid(stepId: string): boolean;\r\n    onNext(): boolean;\r\n    onDone(): Promise<any>;\r\n    private createPage;\r\n    private preparePagePayload;\r\n}\r\n"}}
