{"code":"import { __awaiter, __decorate, __metadata, __param } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, Inject } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ManagePageService } from 'cmssmarteditcontainer/services/pages/ManagePageService';\r\nimport { DATA_TABLE_COMPONENT_DATA, ICatalogVersionPermissionService } from 'smarteditcommons';\r\nimport { EditPageItemComponent, ClonePageItemComponent, DeletePageItemComponent, SyncPageItemComponent } from '../pageItems';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"PageListDropdownItemsWrapperComponent\", {\r\n    selector: 'se-page-list-dropdown-items-wrapper',\r\n    template: `<div\n        *seHasOperationPermission=\"'se.edit.page'\"\n        class=\"paged-list-table__body__td paged-list-table__body__td-menu\"\n    >\n        <se-dropdown-menu\n            [dropdownItems]=\"dropdownItems\"\n            [selectedItem]=\"item\"\n            class=\"pull-right\"\n        ></se-dropdown-menu>\n    </div>`,\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n});\r\nlet PageListDropdownItemsWrapperComponent = class PageListDropdownItemsWrapperComponent {\r\n    constructor(route, data, catalogVersionPermissionService, managePageService, cdr) {\r\n        this.route = route;\r\n        this.data = data;\r\n        this.catalogVersionPermissionService = catalogVersionPermissionService;\r\n        this.managePageService = managePageService;\r\n        this.cdr = cdr;\r\n        this.dropdownItems = [];\r\n    }\r\n    ngOnInit() {\r\n        return this.setDropdownItems();\r\n    }\r\n    setDropdownItems() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.item = this.data.item;\r\n            const { catalogId, catalogVersion } = this.route.snapshot.params;\r\n            const [hasSyncPermission, hasClonePermission] = yield Promise.all([\r\n                this.catalogVersionPermissionService.hasSyncPermissionToActiveCatalogVersion(catalogId, catalogVersion),\r\n                /**\r\n                 * Normally we would use something like `isPermitted` from PermissionService but as we are in pages\r\n                 * which are container (outer) part of app and PermissionService uses some data retrieved from inner\r\n                 * (which in this case can be also obtained from outer) we had to use methods available in outer\r\n                 * to see if the clone button can be cloned or not.\r\n                 *\r\n                 * Using here PermissionService.isPermitted will throw error\r\n                 * as there is no iframe in Pages site\r\n                 */\r\n                this.managePageService.isPageCloneable(this.data.item.uuid, this.data.item.catalogVersion)\r\n            ]);\r\n            this.addDropdownItem(EditPageItemComponent);\r\n            if (hasSyncPermission) {\r\n                this.addDropdownItem(SyncPageItemComponent);\r\n            }\r\n            if (hasClonePermission) {\r\n                this.addDropdownItem(ClonePageItemComponent);\r\n            }\r\n            this.addDropdownItem(DeletePageItemComponent);\r\n            if (!this.cdr.destroyed) {\r\n                this.cdr.detectChanges();\r\n            }\r\n        });\r\n    }\r\n    addDropdownItem(item) {\r\n        this.dropdownItems = this.dropdownItems.concat({\r\n            component: item\r\n        });\r\n    }\r\n};\r\nPageListDropdownItemsWrapperComponent = __decorate([\r\n    Component({\r\n        selector: 'se-page-list-dropdown-items-wrapper',\r\n        template: `<div\n        *seHasOperationPermission=\"'se.edit.page'\"\n        class=\"paged-list-table__body__td paged-list-table__body__td-menu\"\n    >\n        <se-dropdown-menu\n            [dropdownItems]=\"dropdownItems\"\n            [selectedItem]=\"item\"\n            class=\"pull-right\"\n        ></se-dropdown-menu>\n    </div>`,\r\n        changeDetection: ChangeDetectionStrategy.OnPush\r\n    }),\r\n    __param(1, Inject(DATA_TABLE_COMPONENT_DATA)),\r\n    __metadata(\"design:paramtypes\", [ActivatedRoute, Object, ICatalogVersionPermissionService,\r\n        ManagePageService,\r\n        ChangeDetectorRef])\r\n], PageListDropdownItemsWrapperComponent);\r\nexport { PageListDropdownItemsWrapperComponent };\r\n//# sourceMappingURL=PageListDropdownItemsWrapperComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+router@8.2.14_e9fbe5720e9434eb9ae0f6720f1ca3f4/node_modules/@angular/router/router.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pages/ManagePageService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/pages/pageItems/index.ts"],"map":"{\"version\":3,\"file\":\"PageListDropdownItemsWrapperComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/pages/pageListComponentWrappers/PageListDropdownItemsWrapperComponent.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EACH,uBAAuB,EACvB,iBAAiB,EACjB,SAAS,EACT,MAAM,EAIT,MAAM,eAAe,CAAC;AACvB,OAAO,EAAE,cAAc,EAAE,MAAM,iBAAiB,CAAC;AACjD,OAAO,EAAE,iBAAiB,EAAE,MAAM,wDAAwD,CAAC;AAC3F,OAAO,EAEH,yBAAyB,EACzB,gCAAgC,EAGnC,MAAM,kBAAkB,CAAC;AAC1B,OAAO,EACH,qBAAqB,EACrB,sBAAsB,EACtB,uBAAuB,EACvB,qBAAqB,EACxB,MAAM,cAAc,CAAC;+FAEX;IACP,QAAQ,EAAE,qCAAqC;IAC/C,QAAQ,EAAE;;;;;;;;;WASH;IACP,eAAe,EAAE,uBAAuB,CAAC,MAAM;CAClD;AACD,IAAa,qCAAqC,GAAlD,MAAa,qCAAqC;IAI9C,YACY,KAAqB,EACa,IAAsC,EACxE,+BAAiE,EACjE,iBAAoC,EACpC,GAAsB;QAJtB,UAAK,GAAL,KAAK,CAAgB;QACa,SAAI,GAAJ,IAAI,CAAkC;QACxE,oCAA+B,GAA/B,+BAA+B,CAAkC;QACjE,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,QAAG,GAAH,GAAG,CAAmB;QAR3B,kBAAa,GAAwB,EAAE,CAAC;IAS5C,CAAC;IAEJ,QAAQ;QACJ,OAAO,IAAI,CAAC,gBAAgB,EAAE,CAAC;IACnC,CAAC;IAEa,gBAAgB;;YAC1B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;YAE3B,MAAM,EAAE,SAAS,EAAE,cAAc,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC;YAEjE,MAAM,CAAC,iBAAiB,EAAE,kBAAkB,CAAC,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC;gBAC9D,IAAI,CAAC,+BAA+B,CAAC,uCAAuC,CACxE,SAAS,EACT,cAAc,CACjB;gBACD;;;;;;;;mBAQG;gBACH,IAAI,CAAC,iBAAiB,CAAC,eAAe,CAClC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EACnB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAChC;aACJ,CAAC,CAAC;YAEH,IAAI,CAAC,eAAe,CAAC,qBAAqB,CAAC,CAAC;YAE5C,IAAI,iBAAiB,EAAE;gBACnB,IAAI,CAAC,eAAe,CAAC,qBAAqB,CAAC,CAAC;aAC/C;YAED,IAAI,kBAAkB,EAAE;gBACpB,IAAI,CAAC,eAAe,CAAC,sBAAsB,CAAC,CAAC;aAChD;YAED,IAAI,CAAC,eAAe,CAAC,uBAAuB,CAAC,CAAC;YAE9C,IAAI,CAAE,IAAI,CAAC,GAAe,CAAC,SAAS,EAAE;gBAClC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;aAC5B;QACL,CAAC;KAAA;IAEO,eAAe,CAAC,IAAe;QACnC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;YAC3C,SAAS,EAAE,IAAI;SAClB,CAAC,CAAC;IACP,CAAC;CACJ,CAAA;AA/DY,qCAAqC;IAdjD,SAAS,CAAC;QACP,QAAQ,EAAE,qCAAqC;QAC/C,QAAQ,EAAE;;;;;;;;;WASH;QACP,eAAe,EAAE,uBAAuB,CAAC,MAAM;KAClD,CAAC;IAOO,WAAA,MAAM,CAAC,yBAAyB,CAAC,CAAA;qCADnB,cAAc,UAEY,gCAAgC;QAC9C,iBAAiB;QAC/B,iBAAiB;GATzB,qCAAqC,CA+DjD;SA/DY,qCAAqC\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/pages/pageListComponentWrappers/PageListDropdownItemsWrapperComponent.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { ManagePageService } from 'cmssmarteditcontainer/services/pages/ManagePageService';\r\nimport { DataTableComponentData, ICatalogVersionPermissionService, IDropdownMenuItem, ICMSPage } from 'smarteditcommons';\r\nexport declare class PageListDropdownItemsWrapperComponent implements OnInit {\r\n    private route;\r\n    data: DataTableComponentData<ICMSPage>;\r\n    private catalogVersionPermissionService;\r\n    private managePageService;\r\n    private cdr;\r\n    dropdownItems: IDropdownMenuItem[];\r\n    item: ICMSPage;\r\n    constructor(route: ActivatedRoute, data: DataTableComponentData<ICMSPage>, catalogVersionPermissionService: ICatalogVersionPermissionService, managePageService: ManagePageService, cdr: ChangeDetectorRef);\r\n    ngOnInit(): Promise<void>;\r\n    private setDropdownItems;\r\n    private addDropdownItem;\r\n}\r\n"}}
