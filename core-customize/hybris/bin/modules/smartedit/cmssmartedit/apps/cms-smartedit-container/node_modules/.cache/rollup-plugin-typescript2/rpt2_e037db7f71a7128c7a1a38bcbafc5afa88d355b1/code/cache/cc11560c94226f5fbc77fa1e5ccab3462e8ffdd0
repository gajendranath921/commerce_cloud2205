{"code":"import { __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, ViewChild } from '@angular/core';\r\nimport { from } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\nimport { ModalButtonAction, ModalButtonStyle, ModalManagerService } from 'smarteditcommons';\r\nimport { PageSynchronizationPanelComponent } from '../pageSynchronizationPanel/PageSynchronizationPanelComponent';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"PageSynchronizationPanelModalComponent\", {\r\n    selector: 'se-page-synchronization-panel-modal',\r\n    template: `\n        <se-page-synchronization-panel\n            *ngIf=\"isReady\"\n            (selectedItemsUpdate)=\"onSelectedItemsUpdate($event)\"\n            [uriContext]=\"data.uriContext\"\n            [cmsPage]=\"data.cmsPage\"\n            [showFooter]=\"false\"\n        ></se-page-synchronization-panel>\n    `,\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n});\r\nlet PageSynchronizationPanelModalComponent = class PageSynchronizationPanelModalComponent {\r\n    constructor(modalManager, cdr) {\r\n        this.modalManager = modalManager;\r\n        this.cdr = cdr;\r\n        this.syncBtnId = 'sync';\r\n    }\r\n    ngOnInit() {\r\n        this.modalManager.addButtons([\r\n            {\r\n                id: this.syncBtnId,\r\n                label: 'se.cms.actionitem.page.sync',\r\n                style: ModalButtonStyle.Primary,\r\n                action: ModalButtonAction.Close,\r\n                disabled: true,\r\n                callback: () => from(this.pageSynchronizationPanelComponent.syncItems())\r\n            },\r\n            {\r\n                id: 'cancel',\r\n                label: 'se.cms.component.confirmation.modal.cancel',\r\n                style: ModalButtonStyle.Default,\r\n                action: ModalButtonAction.Dismiss\r\n            }\r\n        ]);\r\n        this.modalManager\r\n            .getModalData()\r\n            .pipe(take(1))\r\n            .subscribe((data) => {\r\n            this.data = data;\r\n            this.isReady = true;\r\n            if (!this.cdr.destroyed) {\r\n                this.cdr.detectChanges();\r\n            }\r\n        });\r\n    }\r\n    onSelectedItemsUpdate(selectedItems) {\r\n        if (selectedItems.length === 0 ||\r\n            this.data.cmsPage.displayStatus !== 'READY_TO_SYNC' // draft or in process page can't be synced from page list\r\n        ) {\r\n            this.modalManager.disableButton(this.syncBtnId);\r\n            return;\r\n        }\r\n        this.modalManager.enableButton(this.syncBtnId);\r\n    }\r\n};\r\n__decorate([\r\n    ViewChild(PageSynchronizationPanelComponent, { static: false }),\r\n    __metadata(\"design:type\", PageSynchronizationPanelComponent)\r\n], PageSynchronizationPanelModalComponent.prototype, \"pageSynchronizationPanelComponent\", void 0);\r\nPageSynchronizationPanelModalComponent = __decorate([\r\n    Component({\r\n        selector: 'se-page-synchronization-panel-modal',\r\n        template: `\n        <se-page-synchronization-panel\n            *ngIf=\"isReady\"\n            (selectedItemsUpdate)=\"onSelectedItemsUpdate($event)\"\n            [uriContext]=\"data.uriContext\"\n            [cmsPage]=\"data.cmsPage\"\n            [showFooter]=\"false\"\n        ></se-page-synchronization-panel>\n    `,\r\n        changeDetection: ChangeDetectionStrategy.OnPush\r\n    }),\r\n    __metadata(\"design:paramtypes\", [ModalManagerService,\r\n        ChangeDetectorRef])\r\n], PageSynchronizationPanelModalComponent);\r\nexport { PageSynchronizationPanelModalComponent };\r\n//# sourceMappingURL=PageSynchronizationPanelModalComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/synchronize/types.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/synchronize/components/pageSynchronizationPanel/PageSynchronizationPanelComponent.ts"],"map":"{\"version\":3,\"file\":\"PageSynchronizationPanelModalComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../src/components/synchronize/components/pageSynchronizationPanelModal/PageSynchronizationPanelModalComponent.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EACH,uBAAuB,EACvB,iBAAiB,EACjB,SAAS,EAET,SAAS,EAEZ,MAAM,eAAe,CAAC;AAEvB,OAAO,EAAE,IAAI,EAAc,MAAM,MAAM,CAAC;AACxC,OAAO,EAAE,IAAI,EAAE,MAAM,gBAAgB,CAAC;AACtC,OAAO,EAAE,iBAAiB,EAAE,gBAAgB,EAAE,mBAAmB,EAAE,MAAM,kBAAkB,CAAC;AAE5F,OAAO,EAAE,iCAAiC,EAAE,MAAM,+DAA+D,CAAC;gGAEvG;IACP,QAAQ,EAAE,qCAAqC;IAC/C,QAAQ,EAAE;;;;;;;;KAQT;IACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;CAClD;AACD,IAAa,sCAAsC,GAAnD,MAAa,sCAAsC;IAS/C,YACqB,YAAoE,EACpE,GAAsB;QADtB,iBAAY,GAAZ,YAAY,CAAwD;QACpE,QAAG,GAAH,GAAG,CAAmB;QAJ1B,cAAS,GAAG,MAAM,CAAC;IAKjC,CAAC;IAEJ,QAAQ;QACJ,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC;YACzB;gBACI,EAAE,EAAE,IAAI,CAAC,SAAS;gBAClB,KAAK,EAAE,6BAA6B;gBACpC,KAAK,EAAE,gBAAgB,CAAC,OAAO;gBAC/B,MAAM,EAAE,iBAAiB,CAAC,KAAK;gBAC/B,QAAQ,EAAE,IAAI;gBACd,QAAQ,EAAE,GAAqB,EAAE,CAC7B,IAAI,CAAC,IAAI,CAAC,iCAAiC,CAAC,SAAS,EAAE,CAAC;aAC/D;YACD;gBACI,EAAE,EAAE,QAAQ;gBACZ,KAAK,EAAE,4CAA4C;gBACnD,KAAK,EAAE,gBAAgB,CAAC,OAAO;gBAC/B,MAAM,EAAE,iBAAiB,CAAC,OAAO;aACpC;SACJ,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY;aACZ,YAAY,EAAE;aACd,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACb,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE;YAChB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YAEjB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI,CAAE,IAAI,CAAC,GAAe,CAAC,SAAS,EAAE;gBAClC,IAAI,CAAC,GAAG,CAAC,aAAa,EAAE,CAAC;aAC5B;QACL,CAAC,CAAC,CAAC;IACX,CAAC;IAEM,qBAAqB,CAAC,aAAgC;QACzD,IACI,aAAa,CAAC,MAAM,KAAK,CAAC;YAC1B,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,aAAa,KAAK,eAAe,CAAC,0DAA0D;UAChH;YACE,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAChD,OAAO;SACV;QACD,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IACnD,CAAC;CACJ,CAAA;AAtDG;IADC,SAAS,CAAC,iCAAiC,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;8BAC7B,iCAAiC;iGAAC;AAF5D,sCAAsC;IAblD,SAAS,CAAC;QACP,QAAQ,EAAE,qCAAqC;QAC/C,QAAQ,EAAE;;;;;;;;KAQT;QACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;KAClD,CAAC;qCAWqC,mBAAmB;QAC5B,iBAAiB;GAXlC,sCAAsC,CAwDlD;SAxDY,sCAAsC\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/synchronize/components/pageSynchronizationPanelModal/PageSynchronizationPanelModalComponent.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, OnInit } from '@angular/core';\r\nimport { ISyncStatusItem } from 'cmscommons';\r\nimport { ModalManagerService } from 'smarteditcommons';\r\nimport { PageSynchronizationPanelModalData } from '../../types';\r\nimport { PageSynchronizationPanelComponent } from '../pageSynchronizationPanel/PageSynchronizationPanelComponent';\r\nexport declare class PageSynchronizationPanelModalComponent implements OnInit {\r\n    private readonly modalManager;\r\n    private readonly cdr;\r\n    pageSynchronizationPanelComponent: PageSynchronizationPanelComponent;\r\n    data: PageSynchronizationPanelModalData;\r\n    isReady: boolean;\r\n    private readonly syncBtnId;\r\n    constructor(modalManager: ModalManagerService<PageSynchronizationPanelModalData>, cdr: ChangeDetectorRef);\r\n    ngOnInit(): void;\r\n    onSelectedItemsUpdate(selectedItems: ISyncStatusItem[]): void;\r\n}\r\n"}}
