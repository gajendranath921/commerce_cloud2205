{"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as lodash from 'lodash';\r\nimport { DropdownPopulatorInterface, GenericEditorStackService, LanguageService, SeDowngradeService, UriDropdownPopulator } from 'smarteditcommons';\r\n/**\r\n * Implementation of Dropdown Populator for \"CMSItemDropdown\" Structure Type.\r\n * Methods of this service will be used to populate the dropdown rendered by GenericEditorDropdownComponent.\r\n */\r\nlet /* @ngInject */ CMSItemDropdownDropdownPopulator = class /* @ngInject */ CMSItemDropdownDropdownPopulator extends DropdownPopulatorInterface {\r\n    constructor(genericEditorStackService, languageService, translateService, uriDropdownPopulator) {\r\n        super(lodash, languageService, translateService);\r\n        this.genericEditorStackService = genericEditorStackService;\r\n        this.uriDropdownPopulator = uriDropdownPopulator;\r\n        this.CMS_ITEMS_URI = '/cmswebservices/v1/sites/CURRENT_CONTEXT_SITE_ID/cmsitems';\r\n    }\r\n    fetchAll(payload) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.preparePayload(payload);\r\n            const items = yield this.uriDropdownPopulator.fetchAll(payload);\r\n            return this.getNonNestedComponents(payload.field.editorStackId, items);\r\n        });\r\n    }\r\n    fetchPage(payload) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.preparePayload(payload);\r\n            const page = yield this.uriDropdownPopulator.fetchPage(payload);\r\n            page.response = this.getNonNestedComponents(payload.field.editorStackId, page.response);\r\n            return page;\r\n        });\r\n    }\r\n    getItem(payload) {\r\n        this.preparePayload(payload);\r\n        return this.uriDropdownPopulator.getItem(payload);\r\n    }\r\n    preparePayload(payload) {\r\n        payload.field.uri = this.CMS_ITEMS_URI;\r\n    }\r\n    getNonNestedComponents(editorStackId, components) {\r\n        // Get the IDs of the components that are already opened in the editor's stack.\r\n        const componentsInStack = this.genericEditorStackService\r\n            .getEditorsStack(editorStackId)\r\n            .filter((componentInStack) => componentInStack.component.uuid)\r\n            .map((componentInStack) => componentInStack.component.uuid);\r\n        components = components.filter((componentInList) => !componentInList.uuid || !componentsInStack.includes(componentInList.uuid));\r\n        return components;\r\n    }\r\n};\r\n/* @ngInject */ CMSItemDropdownDropdownPopulator = __decorate([\r\n    SeDowngradeService(),\r\n    __metadata(\"design:paramtypes\", [GenericEditorStackService,\r\n        LanguageService,\r\n        TranslateService,\r\n        UriDropdownPopulator])\r\n], /* @ngInject */ CMSItemDropdownDropdownPopulator);\r\nexport { /* @ngInject */ CMSItemDropdownDropdownPopulator };\r\n//# sourceMappingURL=CMSItemDropdownDropdownPopulator.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@ngx-translate+core@11.0.1_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@ngx-translate/core/ngx-translate-core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types+lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"CMSItemDropdownDropdownPopulator.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../src/components/cmsComponents/cmsItemDropdown/services/CMSItemDropdownDropdownPopulator.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AACvD,OAAO,KAAK,MAAM,MAAM,QAAQ,CAAC;AACjC,OAAO,EAEH,0BAA0B,EAK1B,yBAAyB,EACzB,eAAe,EACf,kBAAkB,EAClB,oBAAoB,EACvB,MAAM,kBAAkB,CAAC;AAE1B;;;GAGG;AAEH,uDAAA,sDAA8C,SAAQ,0BAA0B;IAG5E,YACY,yBAAoD,EAC5D,eAAgC,EAChC,gBAAkC,EAC1B,oBAA0C;QAElD,KAAK,CAAC,MAAM,EAAE,eAAe,EAAE,gBAAgB,CAAC,CAAC;QALzC,8BAAyB,GAAzB,yBAAyB,CAA2B;QAGpD,yBAAoB,GAApB,oBAAoB,CAAsB;QAN9C,kBAAa,GAAG,2DAA2D,CAAC;IASpF,CAAC;IAEY,QAAQ,CAAC,OAAiC;;YACnD,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YAC7B,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;YAEhE,OAAO,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,KAAK,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;QAC3E,CAAC;KAAA;IAEY,SAAS,CAClB,OAAqC;;YAErC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;YAC7B,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YAChE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,KAAK,CAAC,aAAa,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YAExF,OAAO,IAAI,CAAC;QAChB,CAAC;KAAA;IAEM,OAAO,CAAC,OAAqC;QAChD,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QAE7B,OAAO,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;IACtD,CAAC;IAEO,cAAc,CAAC,OAAqC;QACxD,OAAO,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,aAAa,CAAC;IAC3C,CAAC;IAEO,sBAAsB,CAC1B,aAAqB,EACrB,UAAiC;QAEjC,+EAA+E;QAC/E,MAAM,iBAAiB,GAAG,IAAI,CAAC,yBAAyB;aACnD,eAAe,CAAC,aAAa,CAAC;aAC9B,MAAM,CAAC,CAAC,gBAAgB,EAAE,EAAE,CAAC,gBAAgB,CAAC,SAAS,CAAC,IAAI,CAAC;aAC7D,GAAG,CAAC,CAAC,gBAAgB,EAAE,EAAE,CAAC,gBAAgB,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAEhE,UAAU,GAAG,UAAU,CAAC,MAAM,CAC1B,CAAC,eAAe,EAAE,EAAE,CAChB,CAAC,eAAe,CAAC,IAAI,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CACjF,CAAC;QAEF,OAAO,UAAU,CAAC;IACtB,CAAC;CACJ,CAAA;AAxDD;IADC,kBAAkB,EAAE;qCAKsB,yBAAyB;QAC3C,eAAe;QACd,gBAAgB;QACJ,oBAAoB;oDAiDzD\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/cmsComponents/cmsItemDropdown/services/CMSItemDropdownDropdownPopulator.d.ts","writeByteOrderMark":false,"text":"import { TranslateService } from '@ngx-translate/core';\r\nimport { DropdownPopulatorFetchPageResponse, DropdownPopulatorInterface, DropdownPopulatorItemPayload, DropdownPopulatorPagePayload, DropdownPopulatorPayload, GenericEditorOption, GenericEditorStackService, LanguageService, UriDropdownPopulator } from 'smarteditcommons';\r\n/**\r\n * Implementation of Dropdown Populator for \"CMSItemDropdown\" Structure Type.\r\n * Methods of this service will be used to populate the dropdown rendered by GenericEditorDropdownComponent.\r\n */\r\nexport declare class CMSItemDropdownDropdownPopulator extends DropdownPopulatorInterface {\r\n    private genericEditorStackService;\r\n    private uriDropdownPopulator;\r\n    private CMS_ITEMS_URI;\r\n    constructor(genericEditorStackService: GenericEditorStackService, languageService: LanguageService, translateService: TranslateService, uriDropdownPopulator: UriDropdownPopulator);\r\n    fetchAll(payload: DropdownPopulatorPayload): Promise<GenericEditorOption[]>;\r\n    fetchPage(payload: DropdownPopulatorPagePayload): Promise<DropdownPopulatorFetchPageResponse>;\r\n    getItem(payload: DropdownPopulatorItemPayload): Promise<GenericEditorOption>;\r\n    private preparePayload;\r\n    private getNonNestedComponents;\r\n}\r\n"}}
