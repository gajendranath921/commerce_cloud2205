{"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\r\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { IPageTreeNodeService, SeDowngradeComponent, LogService } from 'smarteditcommons';\r\nimport { NodeInfoService, INTERVAL_RETRIES, INTERVAL_MILLISEC } from '../../../services/pageTree/NodeInfoService';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"PageTreeComponent\", {\r\n    selector: 'se-page-tree-component',\r\n    template: `<div><div class=\"se-page-tree-node\" [ngClass]=\"component.isExpanded && 'se-page-tree-node-expand'\" [attr.node-smartedit-element-uuid]=\"!component.isHidden ?\n                     component.elementUuid :\n                     'hidden-component-has-no-uuid'\"><div (click)=\"onClickComponentNode($event)\" class=\"se-page-tree-component-node--content\"><span [ngClass]=\"component.isExpanded ?\n                                'sap-icon--navigation-down-arrow' :\n                                'sap-icon--navigation-right-arrow'\" class=\"se-page-tree-node--icon se-page-tree-component-node se-page-tree-component-node--icon\"></span> <span class=\"se-page-tree-node--icon se-page-tree-component-node--icon sap-icon--vertical-grip\"></span> <span class=\"se-page-tree-node--icon se-page-tree-component-node--icon sap-icon--background\"></span><div class=\"se-page-tree-component-node--name\"><span class=\"se-page-tree-component-node--name--up\">{{component.name}}</span> <span class=\"se-page-tree-component-node--name--down\">{{component.typeCode}}</span></div></div><se-page-tree-component-menu [component]=\"component\" [slotId]=\"slotId\" [slotUuid]=\"slotUuid\" class=\"se-page-tree-component-node-menu\"></se-page-tree-component-menu></div></div>`,\r\n    styles: [`.se-page-tree-component-node{margin-left:8px}.se-page-tree-component-node--icon{height:32px}.se-page-tree-component-node--name{display:flex;flex-direction:column;font-family:\"72\";font-size:14px;line-height:16px;color:var(--sapContent_LabelColor);overflow:hidden}.se-page-tree-component-node--name--up{font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.se-page-tree-component-node--name--down{font-style:oblique;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.se-page-tree-component-node-menu{margin:0 0 0 auto}.se-page-tree-component-node--content{min-width:calc(100% - 88.25px);display:flex}`, `.se-page-tree-node{height:48px;display:flex;align-items:center;padding:0 12px;border-bottom:1px solid #f1f1f1;width:100%}.se-page-tree-node-expand{background:#e7f1fa}.se-page-tree-node--icon{font-size:14px;line-height:16px;color:var(--sapContent_IconColor);margin-right:10px}.se-page-tree-slot-node--name{font-family:\"72\";font-size:14px;line-height:16px;color:var(--sapContent_LabelColor);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.se-page-tree-slot-node-menu{margin:0 0 0 auto;min-width:60px}.se-page-tree-slot-node-menu--icon{margin:0 0 0 16px;font-size:14px;line-height:16px;color:var(--sapContent_IconColor)}`]\r\n});\r\nlet /* @ngInject */ PageTreeComponent = class /* @ngInject */ PageTreeComponent {\r\n    constructor(pageTreeNodeService, nodeInfoService, logService) {\r\n        this.pageTreeNodeService = pageTreeNodeService;\r\n        this.nodeInfoService = nodeInfoService;\r\n        this.logService = logService;\r\n        this.onComponentExpanded = new EventEmitter();\r\n        this.publishComponentInterval = null;\r\n    }\r\n    onClickComponentNode($event) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            clearInterval(this.publishComponentInterval);\r\n            this.component.isExpanded = !this.component.isExpanded;\r\n            if (this.component.isExpanded) {\r\n                this.onComponentExpanded.emit(this.component);\r\n                yield this.pageTreeNodeService.scrollToElement(this.component.elementUuid);\r\n                if (!(yield this.checkComponentAndPublishSelected())) {\r\n                    let retries = 0;\r\n                    this.publishComponentInterval = setInterval(() => __awaiter(this, void 0, void 0, function* () {\r\n                        if (yield this.checkComponentAndPublishSelected()) {\r\n                            clearInterval(this.publishComponentInterval);\r\n                        }\r\n                        if (retries > INTERVAL_RETRIES) {\r\n                            this.logService.error(`PageTreeComponent:: onClickComponentNode error: smartedit-element ${this.component.elementUuid} is not existed`);\r\n                            clearInterval(this.publishComponentInterval);\r\n                        }\r\n                        retries++;\r\n                    }), INTERVAL_MILLISEC);\r\n                }\r\n            }\r\n            else {\r\n                this.nodeInfoService.publishComponentSelected(this.component, false, this.slotElementUuid);\r\n            }\r\n        });\r\n    }\r\n    checkComponentAndPublishSelected() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const existedSmartEditElement = yield this.pageTreeNodeService.existedSmartEditElement(this.component.elementUuid);\r\n            if (existedSmartEditElement) {\r\n                this.nodeInfoService.publishComponentSelected(this.component, true, this.slotElementUuid);\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    }\r\n};\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], /* @ngInject */ PageTreeComponent.prototype, \"component\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], /* @ngInject */ PageTreeComponent.prototype, \"slotId\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], /* @ngInject */ PageTreeComponent.prototype, \"slotUuid\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], /* @ngInject */ PageTreeComponent.prototype, \"slotElementUuid\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", EventEmitter)\r\n], /* @ngInject */ PageTreeComponent.prototype, \"onComponentExpanded\", void 0);\r\n/* @ngInject */ PageTreeComponent = __decorate([\r\n    SeDowngradeComponent(),\r\n    Component({\r\n        selector: 'se-page-tree-component',\r\n        template: `<div><div class=\"se-page-tree-node\" [ngClass]=\"component.isExpanded && 'se-page-tree-node-expand'\" [attr.node-smartedit-element-uuid]=\"!component.isHidden ?\n                     component.elementUuid :\n                     'hidden-component-has-no-uuid'\"><div (click)=\"onClickComponentNode($event)\" class=\"se-page-tree-component-node--content\"><span [ngClass]=\"component.isExpanded ?\n                                'sap-icon--navigation-down-arrow' :\n                                'sap-icon--navigation-right-arrow'\" class=\"se-page-tree-node--icon se-page-tree-component-node se-page-tree-component-node--icon\"></span> <span class=\"se-page-tree-node--icon se-page-tree-component-node--icon sap-icon--vertical-grip\"></span> <span class=\"se-page-tree-node--icon se-page-tree-component-node--icon sap-icon--background\"></span><div class=\"se-page-tree-component-node--name\"><span class=\"se-page-tree-component-node--name--up\">{{component.name}}</span> <span class=\"se-page-tree-component-node--name--down\">{{component.typeCode}}</span></div></div><se-page-tree-component-menu [component]=\"component\" [slotId]=\"slotId\" [slotUuid]=\"slotUuid\" class=\"se-page-tree-component-node-menu\"></se-page-tree-component-menu></div></div>`,\r\n        styles: [`.se-page-tree-component-node{margin-left:8px}.se-page-tree-component-node--icon{height:32px}.se-page-tree-component-node--name{display:flex;flex-direction:column;font-family:\"72\";font-size:14px;line-height:16px;color:var(--sapContent_LabelColor);overflow:hidden}.se-page-tree-component-node--name--up{font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.se-page-tree-component-node--name--down{font-style:oblique;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.se-page-tree-component-node-menu{margin:0 0 0 auto}.se-page-tree-component-node--content{min-width:calc(100% - 88.25px);display:flex}`, `.se-page-tree-node{height:48px;display:flex;align-items:center;padding:0 12px;border-bottom:1px solid #f1f1f1;width:100%}.se-page-tree-node-expand{background:#e7f1fa}.se-page-tree-node--icon{font-size:14px;line-height:16px;color:var(--sapContent_IconColor);margin-right:10px}.se-page-tree-slot-node--name{font-family:\"72\";font-size:14px;line-height:16px;color:var(--sapContent_LabelColor);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.se-page-tree-slot-node-menu{margin:0 0 0 auto;min-width:60px}.se-page-tree-slot-node-menu--icon{margin:0 0 0 16px;font-size:14px;line-height:16px;color:var(--sapContent_IconColor)}`]\r\n    }),\r\n    __metadata(\"design:paramtypes\", [IPageTreeNodeService,\r\n        NodeInfoService,\r\n        LogService])\r\n], /* @ngInject */ PageTreeComponent);\r\nexport { /* @ngInject */ PageTreeComponent };\r\n//# sourceMappingURL=PageTreeComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/pageTree/NodeInfoService.ts"],"map":"{\"version\":3,\"file\":\"PageTreeComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/pageTree/PageTreeComponent/PageTreeComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/pageTree/PageTreeComponent/PageTreeComponent.d.ts","writeByteOrderMark":false,"text":"import { EventEmitter } from '@angular/core';\r\nimport { IPageTreeNodeService, LogService } from 'smarteditcommons';\r\nimport { NodeInfoService, ComponentNode } from '../../../services/pageTree/NodeInfoService';\r\nexport declare class PageTreeComponent {\r\n    private readonly pageTreeNodeService;\r\n    private readonly nodeInfoService;\r\n    private readonly logService;\r\n    component: ComponentNode;\r\n    slotId: string;\r\n    slotUuid: string;\r\n    slotElementUuid: string;\r\n    onComponentExpanded: EventEmitter<ComponentNode>;\r\n    private publishComponentInterval;\r\n    constructor(pageTreeNodeService: IPageTreeNodeService, nodeInfoService: NodeInfoService, logService: LogService);\r\n    onClickComponentNode($event: Event): Promise<void>;\r\n    private checkComponentAndPublishSelected;\r\n}\r\n"}}
