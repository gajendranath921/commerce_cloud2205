{"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { PAGES_LIST_RESOURCE_URI } from 'cmscommons';\r\nimport { ICatalogService, ISharedDataService, PRODUCT_LIST_RESOURCE_API, PRODUCT_RESOURCE_API, SeDowngradeService, EXPERIENCE_STORAGE_KEY } from 'smarteditcommons';\r\nimport { PRODUCT_CATEGORY_RESOURCE_BASE_URI, PRODUCT_CATEGORY_SEARCH_RESOURCE_URI } from './ProductCategoryService';\r\n/** Used to determine an URI for fetching the data for Dropdown Populators. */\r\nlet /* @ngInject */ ContextAwareCatalogService = class /* @ngInject */ ContextAwareCatalogService {\r\n    constructor(catalogService, sharedDataService) {\r\n        this.catalogService = catalogService;\r\n        this.sharedDataService = sharedDataService;\r\n    }\r\n    getProductCategorySearchUri(productCatalogId) {\r\n        return this.getSearchUriByProductCatalogIdAndUriConstant(productCatalogId, PRODUCT_CATEGORY_SEARCH_RESOURCE_URI);\r\n    }\r\n    getProductCategoryItemUri() {\r\n        return this.getItemUriByUriConstant(PRODUCT_CATEGORY_RESOURCE_BASE_URI);\r\n    }\r\n    getProductSearchUri(productCatalogId) {\r\n        return this.getSearchUriByProductCatalogIdAndUriConstant(productCatalogId, PRODUCT_LIST_RESOURCE_API);\r\n    }\r\n    getProductItemUri() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const uri = yield this.getItemUriByUriConstant(PRODUCT_RESOURCE_API);\r\n            return uri.replace('/:productUID', '');\r\n        });\r\n    }\r\n    getContentPageSearchUri() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const uri = yield this.getContentPageUri();\r\n            return `${uri}?typeCode=ContentPage`;\r\n        });\r\n    }\r\n    getContentPageItemUri() {\r\n        return this.getContentPageUri();\r\n    }\r\n    getSearchUriByProductCatalogIdAndUriConstant(productCatalogId, uriConstant) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const catalogVersion = yield this.catalogService.getActiveProductCatalogVersionByCatalogId(productCatalogId);\r\n            return uriConstant\r\n                .replace(/:catalogId/gi, productCatalogId)\r\n                .replace(/:catalogVersion/gi, catalogVersion);\r\n        });\r\n    }\r\n    getItemUriByUriConstant(uriConstant) {\r\n        return Promise.resolve(uriConstant.replace(/:siteUID/gi, 'CURRENT_CONTEXT_SITE_ID'));\r\n    }\r\n    getContentPageUri() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const { catalogDescriptor: { catalogId } } = (yield this.sharedDataService.get(EXPERIENCE_STORAGE_KEY));\r\n            const catalogVersion = yield this.catalogService.getActiveContentCatalogVersionByCatalogId(catalogId);\r\n            return PAGES_LIST_RESOURCE_URI.replace(/CURRENT_CONTEXT_CATALOG/gi, catalogId).replace(/CURRENT_CONTEXT_CATALOG_VERSION/gi, catalogVersion);\r\n        });\r\n    }\r\n};\r\n/* @ngInject */ ContextAwareCatalogService = __decorate([\r\n    SeDowngradeService(),\r\n    __metadata(\"design:paramtypes\", [ICatalogService,\r\n        ISharedDataService])\r\n], /* @ngInject */ ContextAwareCatalogService);\r\nexport { /* @ngInject */ ContextAwareCatalogService };\r\n//# sourceMappingURL=ContextAwareCatalogService.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/services/ProductCategoryService.ts"],"map":"{\"version\":3,\"file\":\"ContextAwareCatalogService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/services/ContextAwareCatalogService.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EAAE,uBAAuB,EAAE,MAAM,YAAY,CAAC;AACrD,OAAO,EACH,eAAe,EAEf,kBAAkB,EAClB,yBAAyB,EACzB,oBAAoB,EACpB,kBAAkB,EAClB,sBAAsB,EACzB,MAAM,kBAAkB,CAAC;AAC1B,OAAO,EACH,kCAAkC,EAClC,oCAAoC,EACvC,MAAM,0BAA0B,CAAC;AAElC,8EAA8E;AAE9E,iDAAA;IACI,YACY,cAA+B,EAC/B,iBAAqC;QADrC,mBAAc,GAAd,cAAc,CAAiB;QAC/B,sBAAiB,GAAjB,iBAAiB,CAAoB;IAC9C,CAAC;IAEG,2BAA2B,CAAC,gBAAwB;QACvD,OAAO,IAAI,CAAC,4CAA4C,CACpD,gBAAgB,EAChB,oCAAoC,CACvC,CAAC;IACN,CAAC;IAEM,yBAAyB;QAC5B,OAAO,IAAI,CAAC,uBAAuB,CAAC,kCAAkC,CAAC,CAAC;IAC5E,CAAC;IAEM,mBAAmB,CAAC,gBAAwB;QAC/C,OAAO,IAAI,CAAC,4CAA4C,CACpD,gBAAgB,EAChB,yBAAyB,CAC5B,CAAC;IACN,CAAC;IAEY,iBAAiB;;YAC1B,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,uBAAuB,CAAC,oBAAoB,CAAC,CAAC;YAErE,OAAO,GAAG,CAAC,OAAO,CAAC,cAAc,EAAE,EAAE,CAAC,CAAC;QAC3C,CAAC;KAAA;IAEY,uBAAuB;;YAChC,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC,iBAAiB,EAAE,CAAC;YAE3C,OAAO,GAAG,GAAG,uBAAuB,CAAC;QACzC,CAAC;KAAA;IAEM,qBAAqB;QACxB,OAAO,IAAI,CAAC,iBAAiB,EAAE,CAAC;IACpC,CAAC;IAEa,4CAA4C,CACtD,gBAAwB,EACxB,WAAmB;;YAEnB,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,yCAAyC,CACtF,gBAAgB,CACnB,CAAC;YAEF,OAAO,WAAW;iBACb,OAAO,CAAC,cAAc,EAAE,gBAAgB,CAAC;iBACzC,OAAO,CAAC,mBAAmB,EAAE,cAAc,CAAC,CAAC;QACtD,CAAC;KAAA;IAEO,uBAAuB,CAAC,WAAmB;QAC/C,OAAO,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,YAAY,EAAE,yBAAyB,CAAC,CAAC,CAAC;IACzF,CAAC;IAEa,iBAAiB;;YAC3B,MAAM,EACF,iBAAiB,EAAE,EAAE,SAAS,EAAE,EACnC,GAAG,CAAC,MAAM,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAgB,CAAC;YAE9E,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,yCAAyC,CACtF,SAAS,CACZ,CAAC;YAEF,OAAO,uBAAuB,CAAC,OAAO,CAAC,2BAA2B,EAAE,SAAS,CAAC,CAAC,OAAO,CAClF,mCAAmC,EACnC,cAAc,CACjB,CAAC;QACN,CAAC;KAAA;CACJ,CAAA;AAvED;IADC,kBAAkB,EAAE;qCAGW,eAAe;QACZ,kBAAkB;8CAoEpD\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/services/ContextAwareCatalogService.d.ts","writeByteOrderMark":false,"text":"import { ICatalogService, ISharedDataService } from 'smarteditcommons';\r\n/** Used to determine an URI for fetching the data for Dropdown Populators. */\r\nexport declare class ContextAwareCatalogService {\r\n    private catalogService;\r\n    private sharedDataService;\r\n    constructor(catalogService: ICatalogService, sharedDataService: ISharedDataService);\r\n    getProductCategorySearchUri(productCatalogId: string): Promise<string>;\r\n    getProductCategoryItemUri(): Promise<string>;\r\n    getProductSearchUri(productCatalogId: string): Promise<string>;\r\n    getProductItemUri(): Promise<string>;\r\n    getContentPageSearchUri(): Promise<string>;\r\n    getContentPageItemUri(): Promise<string>;\r\n    private getSearchUriByProductCatalogIdAndUriConstant;\r\n    private getItemUriByUriConstant;\r\n    private getContentPageUri;\r\n}\r\n"}}
