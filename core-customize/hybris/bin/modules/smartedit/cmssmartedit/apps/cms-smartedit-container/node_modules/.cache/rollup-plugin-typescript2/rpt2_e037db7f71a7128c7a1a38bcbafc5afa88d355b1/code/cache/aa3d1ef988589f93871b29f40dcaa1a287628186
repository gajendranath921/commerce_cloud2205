{"code":"import { __awaiter, __decorate, __metadata, __param } from \"tslib\";\r\nimport { Component, Inject, ViewEncapsulation } from '@angular/core';\r\nimport { SeDowngradeComponent, TOOLBAR_ITEM, CrossFrameEventService, EVENTS, SMARTEDIT_DRAG_AND_DROP_EVENTS, DRAG_AND_DROP_CROSS_ORIGIN_BEFORE_TIME, OVERLAY_DISABLED_EVENT, ComponentMenuService } from 'smarteditcommons';\r\nimport { RESET_COMPONENT_MENU_EVENT, OPEN_COMPONENT_EVENT } from './constants';\r\nimport { ComponentsTabComponent } from './tabs/ComponentsTabComponent';\r\nimport { ComponentTypesTabComponent } from './tabs/ComponentTypesTabComponent';\r\nconst TAB_IDS = {\r\n    COMPONENT_TYPES_TAB_ID: 'componentTypesTab',\r\n    COMPONENTS_TAB_ID: 'componentsTab'\r\n};\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"ComponentMenuComponent\", {\r\n    selector: 'se-component-menu',\r\n    template: `<div class=\"se-component-menu\" [ngClass]=\"{ 'se-component-menu__localized': hasMultipleContentCatalogs }\"><div translate=\"se.cms.componentmenu.dropdown.header\" class=\"se-component-menu__title\"></div><div class=\"se-component-menu__tip\" translate=\"se.cms.componentmenu.label.draganddrop\"></div><se-tabs *ngIf=\"toolbarItem.isOpen\" class=\"se-component-menu__tabs\" [tabsList]=\"tabsList\" [model]=\"model\" [numTabsDisplayed]=\"2\"></se-tabs></div>`,\r\n    styles: [`se-component-menu .se-component-menu{width:640px;height:485px}se-component-menu .se-component-menu__tabs .se-tabset{margin:0 20px 20px}se-component-menu .se-component-menu__tip{font-size:1rem;line-height:1.4285714286;font-weight:400;margin-bottom:16px;color:#51555a;padding:0 20px}se-component-menu .se-component-menu__title{color:#32363a;font-size:1.1428571429rem;line-height:1.25;font-weight:400;padding:14px 20px 4px}`],\r\n    encapsulation: ViewEncapsulation.None\r\n});\r\nlet /* @ngInject */ ComponentMenuComponent = class /* @ngInject */ ComponentMenuComponent {\r\n    constructor(toolbarItem, crossFrameEventService, componentMenuService) {\r\n        this.toolbarItem = toolbarItem;\r\n        this.crossFrameEventService = crossFrameEventService;\r\n        this.componentMenuService = componentMenuService;\r\n    }\r\n    ngOnInit() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            yield this.initializeComponentMenu();\r\n            this.unregisterPageChangeEvent = this.crossFrameEventService.subscribe(EVENTS.PAGE_CHANGE, () => this.initializeComponentMenu());\r\n            this.unregisterOpenComponentEvent = this.crossFrameEventService.subscribe(OPEN_COMPONENT_EVENT, () => {\r\n                this.resetComponentMenu(true);\r\n            });\r\n            this.unregisterOverlapEvent = this.crossFrameEventService.subscribe(OVERLAY_DISABLED_EVENT, () => this.closeMenu());\r\n            this.unregisterDragStartEvent = this.crossFrameEventService.subscribe(SMARTEDIT_DRAG_AND_DROP_EVENTS.DRAG_DROP_START, () => {\r\n                this.isDragging = true;\r\n                this.closeMenu();\r\n            });\r\n            this.unregisterDragEndEvent = this.crossFrameEventService.subscribe(SMARTEDIT_DRAG_AND_DROP_EVENTS.DRAG_DROP_END, () => {\r\n                this.isDragging = false;\r\n                this.crossFrameEventService.publish(DRAG_AND_DROP_CROSS_ORIGIN_BEFORE_TIME.END);\r\n            });\r\n        });\r\n    }\r\n    ngDoCheck() {\r\n        if (this.isOpenPreviousValue !== this.toolbarItem.isOpen) {\r\n            this.isOpenPreviousValue = this.toolbarItem.isOpen;\r\n            if (this.toolbarItem.isOpen) {\r\n                this.crossFrameEventService.publish(DRAG_AND_DROP_CROSS_ORIGIN_BEFORE_TIME.START);\r\n            }\r\n            else if (!this.toolbarItem.isOpen && !this.isDragging) {\r\n                this.crossFrameEventService.publish(DRAG_AND_DROP_CROSS_ORIGIN_BEFORE_TIME.END);\r\n            }\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        this.unregisterPageChangeEvent();\r\n        this.unregisterOpenComponentEvent();\r\n        this.unregisterDragStartEvent();\r\n        this.unregisterOverlapEvent();\r\n        this.unregisterDragEndEvent();\r\n    }\r\n    initializeComponentMenu() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.tabsList = null;\r\n            this.hasMultipleContentCatalogs = yield this.componentMenuService.hasMultipleContentCatalogs();\r\n            this.tabsList = [\r\n                {\r\n                    id: TAB_IDS.COMPONENT_TYPES_TAB_ID,\r\n                    title: 'se.cms.compomentmenu.tabs.componenttypes',\r\n                    component: ComponentTypesTabComponent,\r\n                    hasErrors: false\r\n                },\r\n                {\r\n                    id: TAB_IDS.COMPONENTS_TAB_ID,\r\n                    title: 'se.cms.compomentmenu.tabs.customizedcomp',\r\n                    component: ComponentsTabComponent,\r\n                    hasErrors: false\r\n                }\r\n            ];\r\n            this.model = {\r\n                componentsTab: {\r\n                    hasMultipleContentCatalogs: this.hasMultipleContentCatalogs\r\n                },\r\n                isOpen: this.toolbarItem.isOpen\r\n            };\r\n            this.resetComponentMenu(this.toolbarItem.isOpen);\r\n        });\r\n    }\r\n    resetComponentMenu(isToolbarOpened) {\r\n        if (this.tabsList) {\r\n            if (!this.toolbarItem.isOpen) {\r\n                this.tabsList = this.tabsList.map((tab) => (Object.assign(Object.assign({}, tab), { active: tab.id === TAB_IDS.COMPONENT_TYPES_TAB_ID })));\r\n            }\r\n            this.model = Object.assign(Object.assign({}, this.model), { isOpen: isToolbarOpened });\r\n            this.crossFrameEventService.publish(RESET_COMPONENT_MENU_EVENT);\r\n        }\r\n    }\r\n    closeMenu() {\r\n        if (this.toolbarItem) {\r\n            this.toolbarItem.isOpen = false;\r\n        }\r\n    }\r\n};\r\n/* @ngInject */ ComponentMenuComponent = __decorate([\r\n    SeDowngradeComponent(),\r\n    Component({\r\n        selector: 'se-component-menu',\r\n        template: `<div class=\"se-component-menu\" [ngClass]=\"{ 'se-component-menu__localized': hasMultipleContentCatalogs }\"><div translate=\"se.cms.componentmenu.dropdown.header\" class=\"se-component-menu__title\"></div><div class=\"se-component-menu__tip\" translate=\"se.cms.componentmenu.label.draganddrop\"></div><se-tabs *ngIf=\"toolbarItem.isOpen\" class=\"se-component-menu__tabs\" [tabsList]=\"tabsList\" [model]=\"model\" [numTabsDisplayed]=\"2\"></se-tabs></div>`,\r\n        styles: [`se-component-menu .se-component-menu{width:640px;height:485px}se-component-menu .se-component-menu__tabs .se-tabset{margin:0 20px 20px}se-component-menu .se-component-menu__tip{font-size:1rem;line-height:1.4285714286;font-weight:400;margin-bottom:16px;color:#51555a;padding:0 20px}se-component-menu .se-component-menu__title{color:#32363a;font-size:1.1428571429rem;line-height:1.25;font-weight:400;padding:14px 20px 4px}`],\r\n        encapsulation: ViewEncapsulation.None\r\n    }),\r\n    __param(0, Inject(TOOLBAR_ITEM)),\r\n    __metadata(\"design:paramtypes\", [Object, CrossFrameEventService,\r\n        ComponentMenuService])\r\n], /* @ngInject */ ComponentMenuComponent);\r\nexport { /* @ngInject */ ComponentMenuComponent };\r\n//# sourceMappingURL=ComponentMenuComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/cmsComponents/componentMenu/constants.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/cmsComponents/componentMenu/tabs/ComponentsTabComponent.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/cmsComponents/componentMenu/tabs/ComponentTypesTabComponent.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/cmsComponents/componentMenu/types.ts"],"map":"{\"version\":3,\"file\":\"ComponentMenuComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/cmsComponents/componentMenu/ComponentMenuComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/cmsComponents/componentMenu/ComponentMenuComponent.d.ts","writeByteOrderMark":false,"text":"import { OnInit, OnDestroy, DoCheck } from '@angular/core';\r\nimport { ToolbarItemInternal, CrossFrameEventService, Tab, ComponentMenuService } from 'smarteditcommons';\r\nimport { ComponentMenuTabModel } from './types';\r\nexport declare class ComponentMenuComponent implements OnInit, OnDestroy, DoCheck {\r\n    toolbarItem: ToolbarItemInternal;\r\n    private crossFrameEventService;\r\n    private componentMenuService;\r\n    hasMultipleContentCatalogs: boolean;\r\n    isDragging: boolean;\r\n    model: ComponentMenuTabModel;\r\n    tabsList: Tab[];\r\n    private isOpenPreviousValue;\r\n    private unregisterDragEndEvent;\r\n    private unregisterDragStartEvent;\r\n    private unregisterOpenComponentEvent;\r\n    private unregisterOverlapEvent;\r\n    private unregisterPageChangeEvent;\r\n    constructor(toolbarItem: ToolbarItemInternal, crossFrameEventService: CrossFrameEventService, componentMenuService: ComponentMenuService);\r\n    ngOnInit(): Promise<void>;\r\n    ngDoCheck(): void;\r\n    ngOnDestroy(): void;\r\n    private initializeComponentMenu;\r\n    private resetComponentMenu;\r\n    private closeMenu;\r\n}\r\n"}}
