{"code":"import { __decorate, __metadata } from \"tslib\";\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, EventEmitter, Input, Output, ViewEncapsulation } from '@angular/core';\r\nimport { LINKED_DROPDOWN, SystemEventService } from 'smarteditcommons';\r\nimport { CMS_CLEAR_MEDIA_CONTAINER_SELECTED_OPTION } from '../../../../../../constants';\r\nimport { MediaContainerSelectorItemComponent } from '../mediaContainerSelectorItem';\r\nconst MediaContainersUri = '/cmswebservices/v1/catalogs/CURRENT_CONTEXT_CATALOG/versions/CURRENT_CONTEXT_CATALOG_VERSION/mediacontainers';\r\nconst FieldQualifier = 'mediaContainer';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"MediaContainerSelectorComponent\", {\r\n    selector: 'se-media-container-selector',\r\n    template: `<se-generic-editor-dropdown [id]=\"id\" [field]=\"field\" [qualifier]=\"field.qualifier\" [model]=\"mediaContainerNameModel\" [showRemoveButton]=\"true\" [itemComponent]=\"itemComponent\" [actionableSearchItem]=\"actionableSearchItem\" [(reset)]=\"reset\"></se-generic-editor-dropdown><div *ngIf=\"isSelected() || creationInProgress\"><label [for]=\"'media-container-qualifier-' + id\" class=\"se-control-label required se-media-container-name-label\">{{ 'se.cms.media.responsive.name' | lowercase | translate }}</label> <input type=\"text\" name=\"media-container-qualifier\" [id]=\"'media-container-qualifier-' + id\" class=\"fd-form-control\" [ngModel]=\"name\" (ngModelChange)=\"onNameChange($event)\" [readOnly]=\"isNameReadOnly()\" [disabled]=\"!field.editable\"/></div>`,\r\n    styles: [`se-media-container-selector .se-media-container-name-label{margin-top:9px}se-media-container-selector .se-generic-editor-dropdown .se-item-printer{width:100%}`],\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    encapsulation: ViewEncapsulation.None\r\n});\r\nlet MediaContainerSelectorComponent = class MediaContainerSelectorComponent {\r\n    constructor(cdr, systemEventService) {\r\n        this.cdr = cdr;\r\n        this.systemEventService = systemEventService;\r\n        this.nameChange = new EventEmitter();\r\n        this.onCreate = new EventEmitter();\r\n        this.onRemove = new EventEmitter();\r\n        this.onSelect = new EventEmitter();\r\n        this.onCreationInProgressChange = new EventEmitter();\r\n        this.field = {\r\n            cmsStructureType: 'EditableDropdown',\r\n            qualifier: FieldQualifier,\r\n            required: true,\r\n            uri: MediaContainersUri,\r\n            idAttribute: 'qualifier',\r\n            editable: true,\r\n            paged: true\r\n        };\r\n        this.creationInProgress = false;\r\n        this.itemComponent = MediaContainerSelectorItemComponent;\r\n    }\r\n    ngOnInit() {\r\n        this.id = `${FieldQualifier}_${this.eventNameAffix}`;\r\n        this.field.editable = this.isEditable;\r\n        this.mediaContainerNameModel = {\r\n            [FieldQualifier]: this.initialName\r\n        };\r\n        const selectMediaContainerEventName = `${this.id}${LINKED_DROPDOWN}`;\r\n        this.unRegSelectMediaContainer = this.systemEventService.subscribe(selectMediaContainerEventName, (_eventId, selectedItem) => this.onSelectItem(selectedItem));\r\n        const clearSelectMediaContainerEventName = `${this.id}_${CMS_CLEAR_MEDIA_CONTAINER_SELECTED_OPTION}`;\r\n        this.unRegClearSelectMediaContainer = this.systemEventService.subscribe(clearSelectMediaContainerEventName, (_eventId, date) => this.clearSelectOption());\r\n        const createMediaContainerEventName = `CREATE_MEDIA_CONTAINER_BUTTON_PRESSED_EVENT_${this.eventNameAffix}`;\r\n        this.actionableSearchItem = {\r\n            eventId: createMediaContainerEventName\r\n        };\r\n        this.unRegCreateMediaContainer = this.systemEventService.subscribe(createMediaContainerEventName, (_eventId, name) => this.onCreateMediaContainer(name));\r\n    }\r\n    ngOnDestroy() {\r\n        this.unRegSelectMediaContainer();\r\n        this.unRegCreateMediaContainer();\r\n        this.unRegClearSelectMediaContainer();\r\n    }\r\n    onNameChange(name) {\r\n        this.nameChange.emit(name);\r\n    }\r\n    isNameReadOnly() {\r\n        return !this.isAdvancedCloning && !this.creationInProgress && this.isSelected();\r\n    }\r\n    isSelected() {\r\n        return !!this.mediaContainerNameModel[FieldQualifier];\r\n    }\r\n    onSelectItem({ optionObject: selectedMediaContainer }) {\r\n        this.setCreationInProgressAndEmit(false);\r\n        if (!this.mediaContainerNameModel.mediaContainer) {\r\n            this.onSelect.emit({\r\n                catalogVersion: undefined,\r\n                medias: {},\r\n                qualifier: undefined,\r\n                mediaContainerUuid: undefined\r\n            });\r\n            this.onRemove.emit();\r\n        }\r\n        else if (!!selectedMediaContainer) {\r\n            this.onSelect.emit(selectedMediaContainer);\r\n        }\r\n        if (!this.cdr.destroyed) {\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n    onCreateMediaContainer(name) {\r\n        this.clearSelectOption();\r\n        this.setCreationInProgressAndEmit(true);\r\n        this.onCreate.emit(name);\r\n        if (!this.cdr.destroyed) {\r\n            this.cdr.detectChanges();\r\n        }\r\n    }\r\n    setCreationInProgressAndEmit(isInProgress) {\r\n        this.creationInProgress = isInProgress;\r\n        this.onCreationInProgressChange.emit(isInProgress);\r\n    }\r\n    clearSelectOption() {\r\n        this.initialName = undefined;\r\n        this.resetSelector();\r\n    }\r\n    resetSelector() {\r\n        if (typeof this.reset === 'function') {\r\n            this.reset(true);\r\n        }\r\n    }\r\n};\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], MediaContainerSelectorComponent.prototype, \"eventNameAffix\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Boolean)\r\n], MediaContainerSelectorComponent.prototype, \"isAdvancedCloning\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], MediaContainerSelectorComponent.prototype, \"name\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], MediaContainerSelectorComponent.prototype, \"initialName\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Boolean)\r\n], MediaContainerSelectorComponent.prototype, \"isEditable\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", EventEmitter)\r\n], MediaContainerSelectorComponent.prototype, \"nameChange\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", EventEmitter)\r\n], MediaContainerSelectorComponent.prototype, \"onCreate\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", EventEmitter)\r\n], MediaContainerSelectorComponent.prototype, \"onRemove\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", EventEmitter)\r\n], MediaContainerSelectorComponent.prototype, \"onSelect\", void 0);\r\n__decorate([\r\n    Output(),\r\n    __metadata(\"design:type\", EventEmitter)\r\n], MediaContainerSelectorComponent.prototype, \"onCreationInProgressChange\", void 0);\r\nMediaContainerSelectorComponent = __decorate([\r\n    Component({\r\n        selector: 'se-media-container-selector',\r\n        template: `<se-generic-editor-dropdown [id]=\"id\" [field]=\"field\" [qualifier]=\"field.qualifier\" [model]=\"mediaContainerNameModel\" [showRemoveButton]=\"true\" [itemComponent]=\"itemComponent\" [actionableSearchItem]=\"actionableSearchItem\" [(reset)]=\"reset\"></se-generic-editor-dropdown><div *ngIf=\"isSelected() || creationInProgress\"><label [for]=\"'media-container-qualifier-' + id\" class=\"se-control-label required se-media-container-name-label\">{{ 'se.cms.media.responsive.name' | lowercase | translate }}</label> <input type=\"text\" name=\"media-container-qualifier\" [id]=\"'media-container-qualifier-' + id\" class=\"fd-form-control\" [ngModel]=\"name\" (ngModelChange)=\"onNameChange($event)\" [readOnly]=\"isNameReadOnly()\" [disabled]=\"!field.editable\"/></div>`,\r\n        styles: [`se-media-container-selector .se-media-container-name-label{margin-top:9px}se-media-container-selector .se-generic-editor-dropdown .se-item-printer{width:100%}`],\r\n        changeDetection: ChangeDetectionStrategy.OnPush,\r\n        encapsulation: ViewEncapsulation.None\r\n    }),\r\n    __metadata(\"design:paramtypes\", [ChangeDetectorRef,\r\n        SystemEventService])\r\n], MediaContainerSelectorComponent);\r\nexport { MediaContainerSelectorComponent };\r\n//# sourceMappingURL=MediaContainerSelectorComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/constants.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/genericEditor/media/components/mediaContainer/MediaContainerComponent.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/src/components/genericEditor/media/components/mediaContainer/mediaContainerSelectorItem/index.ts"],"map":"{\"version\":3,\"file\":\"MediaContainerSelectorComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../../../src/components/genericEditor/media/components/mediaContainer/mediaContainerSelector/MediaContainerSelectorComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/genericEditor/media/components/mediaContainer/mediaContainerSelector/MediaContainerSelectorComponent.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, EventEmitter, OnDestroy, OnInit } from '@angular/core';\r\nimport { ActionableSearchItem, GenericEditorField, SelectReset, SystemEventService } from 'smarteditcommons';\r\nimport { MediaContainer } from '../MediaContainerComponent';\r\nimport { MediaContainerSelectorItemComponent } from '../mediaContainerSelectorItem';\r\ndeclare const FieldQualifier = \"mediaContainer\";\r\nexport declare class MediaContainerSelectorComponent implements OnInit, OnDestroy {\r\n    private readonly cdr;\r\n    private readonly systemEventService;\r\n    eventNameAffix: string;\r\n    isAdvancedCloning: boolean;\r\n    name: string;\r\n    initialName: string;\r\n    isEditable: boolean;\r\n    nameChange: EventEmitter<string>;\r\n    onCreate: EventEmitter<string>;\r\n    onRemove: EventEmitter<void>;\r\n    onSelect: EventEmitter<MediaContainer>;\r\n    onCreationInProgressChange: EventEmitter<boolean>;\r\n    id: string;\r\n    field: GenericEditorField;\r\n    mediaContainerNameModel: {\r\n        [FieldQualifier]: string;\r\n    };\r\n    reset: SelectReset;\r\n    actionableSearchItem: ActionableSearchItem;\r\n    itemComponent: typeof MediaContainerSelectorItemComponent;\r\n    creationInProgress: boolean;\r\n    private unRegSelectMediaContainer;\r\n    private unRegClearSelectMediaContainer;\r\n    private unRegCreateMediaContainer;\r\n    constructor(cdr: ChangeDetectorRef, systemEventService: SystemEventService);\r\n    ngOnInit(): void;\r\n    ngOnDestroy(): void;\r\n    onNameChange(name: string): void;\r\n    isNameReadOnly(): boolean;\r\n    isSelected(): boolean;\r\n    private onSelectItem;\r\n    private onCreateMediaContainer;\r\n    private setCreationInProgressAndEmit;\r\n    private clearSelectOption;\r\n    private resetSelector;\r\n}\r\nexport {};\r\n"}}
