{"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, Input, ViewEncapsulation } from '@angular/core';\r\nimport { take } from 'rxjs/operators';\r\nimport { ICatalogService, L10nPipe, SeDowngradeComponent, CMSModesService, SlotSharedService } from 'smarteditcommons';\r\nvar IconClass;\r\n(function (IconClass) {\r\n    IconClass[\"GLOBE\"] = \"hyicon-globe\";\r\n    IconClass[\"HOVERED\"] = \"hyicon-linked\";\r\n})(IconClass || (IconClass = {}));\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"SlotDisabledComponent\", {\r\n    selector: 'slot-disabled-component',\r\n    template: `<div class=\"se-slot-popover\" [ngClass]=\"{ \n        'disabled-shared-slot': !isVersioningPerspective,\n        'disabled-shared-slot-hovered': active, \n        'disabled-shared-slot-versioning-mode': isVersioningPerspective, \n        'external-shared-slot': isGlobalSlot\n    }\" [attr.data-popover-content]=\"popoverMessage?.translate | translate: popoverMessage?.translateParams\"><div class=\"se-slot-popover__arrow\"><div class=\"se-slot-popover__arrow--fill\"></div></div><div class=\"disabled-shared-slot__icon--outer disabled-shared-slot__icon--outer-linked\" [ngClass]=\"outerSlotClass\"><span class=\"hyicon shared_slot_disabled_icon disabled-shared-slot__icon--inner\" [ngClass]=\"iconClass\"></span></div></div>`,\r\n    styles: [`#smarteditoverlay .se-slot-popover{align-items:center;display:flex;flex-direction:column-reverse;justify-content:center}#smarteditoverlay .se-slot-popover__arrow{opacity:0;margin-top:15px;position:relative;width:0;border-bottom:12px solid #d9d9d9;border-right:12px solid transparent;border-left:12px solid transparent;z-index:9999}#smarteditoverlay .se-slot-popover__arrow--fill{position:absolute;top:1px;left:-11px;width:0;border-bottom:11px solid #fff;border-right:11px solid transparent;border-left:11px solid transparent}#smarteditoverlay .se-slot-popover:before{opacity:0;box-shadow:0 0 4px 0 #d9d9d9;z-index:9999;background-color:#fff;color:#32363a;border:1px solid #d9d9d9;border-radius:4px;content:attr(data-popover-content);margin-bottom:calc(-5.2 * 15px);padding:10px;white-space:nowrap}#smarteditoverlay [data-smartedit-component-type=ContentSlot]:hover .se-slot-popover:before{opacity:1;margin-top:-1px}#smarteditoverlay [data-smartedit-component-type=ContentSlot]:hover .se-slot-popover__arrow{opacity:1}`],\r\n    encapsulation: ViewEncapsulation.None,\r\n    providers: [L10nPipe],\r\n    changeDetection: ChangeDetectionStrategy.OnPush\r\n});\r\nlet /* @ngInject */ SlotDisabledComponent = class /* @ngInject */ SlotDisabledComponent {\r\n    constructor(catalogService, cMSModesService, l10nPipe, slotSharedService, cdr) {\r\n        this.catalogService = catalogService;\r\n        this.cMSModesService = cMSModesService;\r\n        this.l10nPipe = l10nPipe;\r\n        this.slotSharedService = slotSharedService;\r\n        this.cdr = cdr;\r\n        this.DEFAULT_DECORATOR_MSG = 'se.cms.sharedslot.decorator.label';\r\n        this.GLOBAL_SLOT_DECORATOR_MSG = 'se.cms.parentsharedslot.decorator.label';\r\n        this.DEFAULT_DECORATOR_MSG_VERSIONING_MODE = 'se.cms.versioning.shared.slot.from.label';\r\n        this.GLOBAL_SLOT_DECORATOR_MSG_VERSIONING_MODE = 'se.cms.versioning.parent.shared.slot.from.label';\r\n        this.isGlobalSlot = false;\r\n        this.isVersioningPerspective = false;\r\n    }\r\n    ngOnInit() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const [catalogVersion, isVersioningPerspective] = yield Promise.all([\r\n                this.catalogService.getCatalogVersionByUuid(this.componentAttributes.smarteditCatalogVersionUuid),\r\n                this.cMSModesService.isVersioningPerspectiveActive()\r\n            ]);\r\n            this.isVersioningPerspective = isVersioningPerspective;\r\n            this.isGlobalSlot = yield this.slotSharedService.isGlobalSlot(this.componentAttributes.smarteditComponentId, this.componentAttributes.smarteditComponentType);\r\n            this.popoverMessage = yield this.getPopoverMessage(catalogVersion.catalogName);\r\n            this.setIconAndOuterSlotClassName();\r\n            if (!this.cdr.destroyed) {\r\n                this.cdr.detectChanges();\r\n            }\r\n        });\r\n    }\r\n    ngOnChanges(changes) {\r\n        const activeChange = changes.active;\r\n        if (activeChange && !activeChange.firstChange) {\r\n            this.setIconAndOuterSlotClassName();\r\n        }\r\n    }\r\n    getPopoverMessage(catalogNameL10n) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let msgToLocalize;\r\n            if (this.isVersioningPerspective) {\r\n                msgToLocalize = this.isGlobalSlot\r\n                    ? this.GLOBAL_SLOT_DECORATOR_MSG_VERSIONING_MODE\r\n                    : this.DEFAULT_DECORATOR_MSG_VERSIONING_MODE;\r\n            }\r\n            else {\r\n                msgToLocalize = this.isGlobalSlot\r\n                    ? this.GLOBAL_SLOT_DECORATOR_MSG\r\n                    : this.DEFAULT_DECORATOR_MSG;\r\n            }\r\n            const catalogName = yield this.l10nPipe\r\n                .transform(catalogNameL10n)\r\n                .pipe(take(1))\r\n                .toPromise();\r\n            const msgParams = {\r\n                slotId: this.componentAttributes.smarteditComponentId,\r\n                catalogName\r\n            };\r\n            return { translate: msgToLocalize, translateParams: msgParams };\r\n        });\r\n    }\r\n    setIconAndOuterSlotClassName() {\r\n        this.iconClass = this.isGlobalSlot ? IconClass.GLOBE : IconClass.HOVERED;\r\n        this.outerSlotClass = this.getOuterSlotClass(this.active, this.iconClass);\r\n    }\r\n    getOuterSlotClass(active, iconClass) {\r\n        return {\r\n            'disabled-shared-slot__icon--outer-hovered': active && !this.isVersioningPerspective,\r\n            'disabled-shared-slot__icon--outer-globe': iconClass === IconClass.GLOBE\r\n        };\r\n    }\r\n};\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Object)\r\n], /* @ngInject */ SlotDisabledComponent.prototype, \"componentAttributes\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", Boolean)\r\n], /* @ngInject */ SlotDisabledComponent.prototype, \"active\", void 0);\r\n/* @ngInject */ SlotDisabledComponent = __decorate([\r\n    SeDowngradeComponent(),\r\n    Component({\r\n        selector: 'slot-disabled-component',\r\n        template: `<div class=\"se-slot-popover\" [ngClass]=\"{ \n        'disabled-shared-slot': !isVersioningPerspective,\n        'disabled-shared-slot-hovered': active, \n        'disabled-shared-slot-versioning-mode': isVersioningPerspective, \n        'external-shared-slot': isGlobalSlot\n    }\" [attr.data-popover-content]=\"popoverMessage?.translate | translate: popoverMessage?.translateParams\"><div class=\"se-slot-popover__arrow\"><div class=\"se-slot-popover__arrow--fill\"></div></div><div class=\"disabled-shared-slot__icon--outer disabled-shared-slot__icon--outer-linked\" [ngClass]=\"outerSlotClass\"><span class=\"hyicon shared_slot_disabled_icon disabled-shared-slot__icon--inner\" [ngClass]=\"iconClass\"></span></div></div>`,\r\n        styles: [`#smarteditoverlay .se-slot-popover{align-items:center;display:flex;flex-direction:column-reverse;justify-content:center}#smarteditoverlay .se-slot-popover__arrow{opacity:0;margin-top:15px;position:relative;width:0;border-bottom:12px solid #d9d9d9;border-right:12px solid transparent;border-left:12px solid transparent;z-index:9999}#smarteditoverlay .se-slot-popover__arrow--fill{position:absolute;top:1px;left:-11px;width:0;border-bottom:11px solid #fff;border-right:11px solid transparent;border-left:11px solid transparent}#smarteditoverlay .se-slot-popover:before{opacity:0;box-shadow:0 0 4px 0 #d9d9d9;z-index:9999;background-color:#fff;color:#32363a;border:1px solid #d9d9d9;border-radius:4px;content:attr(data-popover-content);margin-bottom:calc(-5.2 * 15px);padding:10px;white-space:nowrap}#smarteditoverlay [data-smartedit-component-type=ContentSlot]:hover .se-slot-popover:before{opacity:1;margin-top:-1px}#smarteditoverlay [data-smartedit-component-type=ContentSlot]:hover .se-slot-popover__arrow{opacity:1}`],\r\n        encapsulation: ViewEncapsulation.None,\r\n        providers: [L10nPipe],\r\n        changeDetection: ChangeDetectionStrategy.OnPush\r\n    }),\r\n    __metadata(\"design:paramtypes\", [ICatalogService,\r\n        CMSModesService,\r\n        L10nPipe,\r\n        SlotSharedService,\r\n        ChangeDetectorRef])\r\n], /* @ngInject */ SlotDisabledComponent);\r\nexport { /* @ngInject */ SlotDisabledComponent };\r\n//# sourceMappingURL=SlotDisabledComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"SlotDisabledComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/slotSharedDisabled/SlotDisabledComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/slotSharedDisabled/SlotDisabledComponent.d.ts","writeByteOrderMark":false,"text":"import { ChangeDetectorRef, OnChanges, OnInit, SimpleChanges } from '@angular/core';\r\nimport { ComponentAttributes, ICatalogService, L10nPipe, TypedMap, CMSModesService, SlotSharedService } from 'smarteditcommons';\r\ninterface PopoverMessage {\r\n    translate: string;\r\n    translateParams: {\r\n        catalogName: string;\r\n        slotId: string;\r\n    };\r\n}\r\nexport declare class SlotDisabledComponent implements OnInit, OnChanges {\r\n    private catalogService;\r\n    private cMSModesService;\r\n    private l10nPipe;\r\n    private slotSharedService;\r\n    private cdr;\r\n    componentAttributes: ComponentAttributes;\r\n    active: boolean;\r\n    popoverMessage?: PopoverMessage;\r\n    iconClass?: string;\r\n    outerSlotClass?: TypedMap<boolean>;\r\n    isGlobalSlot: boolean;\r\n    isVersioningPerspective: boolean;\r\n    private readonly DEFAULT_DECORATOR_MSG;\r\n    private readonly GLOBAL_SLOT_DECORATOR_MSG;\r\n    private readonly DEFAULT_DECORATOR_MSG_VERSIONING_MODE;\r\n    private readonly GLOBAL_SLOT_DECORATOR_MSG_VERSIONING_MODE;\r\n    constructor(catalogService: ICatalogService, cMSModesService: CMSModesService, l10nPipe: L10nPipe, slotSharedService: SlotSharedService, cdr: ChangeDetectorRef);\r\n    ngOnInit(): Promise<void>;\r\n    ngOnChanges(changes: SimpleChanges): void;\r\n    private getPopoverMessage;\r\n    private setIconAndOuterSlotClassName;\r\n    private getOuterSlotClass;\r\n}\r\nexport {};\r\n"}}
