{"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { COMPONENT_REMOVED_EVENT, IRemoveComponentService, PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI } from 'cmscommons';\r\nimport { GatewayProxied, IAlertService, IRenderService, IRestServiceFactory, SeDowngradeService, SystemEventService } from 'smarteditcommons';\r\nimport { ComponentInfoService } from './ComponentInfoService';\r\nlet /* @ngInject */ RemoveComponentService = class /* @ngInject */ RemoveComponentService {\r\n    constructor(restServiceFactory, alertService, componentInfoService, renderService, systemEventService) {\r\n        this.alertService = alertService;\r\n        this.componentInfoService = componentInfoService;\r\n        this.renderService = renderService;\r\n        this.systemEventService = systemEventService;\r\n        this.resource = restServiceFactory.get(`${PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI}/contentslots/:slotId/components/:componentId`, 'componentId');\r\n    }\r\n    removeComponent(configuration) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                yield this.resource.remove({\r\n                    slotId: configuration.slotId,\r\n                    componentId: configuration.slotOperationRelatedId\r\n                });\r\n            }\r\n            catch (_a) {\r\n                this.alertService.showDanger({\r\n                    message: 'se.cms.remove.component.failed',\r\n                    messagePlaceholders: {\r\n                        slotID: configuration.slotId,\r\n                        componentID: configuration.slotOperationRelatedId\r\n                    }\r\n                });\r\n                return Promise.reject();\r\n            }\r\n            // This call will come from the cache.\r\n            const component = yield this.componentInfoService.getById(configuration.componentUuid);\r\n            this.systemEventService.publish(COMPONENT_REMOVED_EVENT, component);\r\n            this.renderService.renderSlots(configuration.slotId);\r\n            return this.componentInfoService.getById(configuration.componentUuid, true);\r\n        });\r\n    }\r\n};\r\n/* @ngInject */ RemoveComponentService = __decorate([\r\n    GatewayProxied('removeComponent'),\r\n    SeDowngradeService(IRemoveComponentService),\r\n    __metadata(\"design:paramtypes\", [IRestServiceFactory,\r\n        IAlertService,\r\n        ComponentInfoService,\r\n        IRenderService,\r\n        SystemEventService])\r\n], /* @ngInject */ RemoveComponentService);\r\nexport { /* @ngInject */ RemoveComponentService };\r\n//# sourceMappingURL=RemoveComponentServiceInner.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit/src/services/ComponentInfoService.ts"],"map":"{\"version\":3,\"file\":\"RemoveComponentServiceInner.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/services/RemoveComponentServiceInner.ts\"],\"names\":[],\"mappings\":\";AAAA;;GAEG;AACH,OAAO,EACH,uBAAuB,EAEvB,uBAAuB,EACvB,yCAAyC,EAE5C,MAAM,YAAY,CAAC;AACpB,OAAO,EACH,cAAc,EACd,aAAa,EACb,cAAc,EAEd,mBAAmB,EACnB,kBAAkB,EAClB,kBAAkB,EACrB,MAAM,kBAAkB,CAAC;AAC1B,OAAO,EAAE,oBAAoB,EAAE,MAAM,wBAAwB,CAAC;AAI9D,6CAAA;IAEI,YACI,kBAAuC,EAC/B,YAA2B,EAC3B,oBAA0C,EAC1C,aAA6B,EAC7B,kBAAsC;QAHtC,iBAAY,GAAZ,YAAY,CAAe;QAC3B,yBAAoB,GAApB,oBAAoB,CAAsB;QAC1C,kBAAa,GAAb,aAAa,CAAgB;QAC7B,uBAAkB,GAAlB,kBAAkB,CAAoB;QAE9C,IAAI,CAAC,QAAQ,GAAG,kBAAkB,CAAC,GAAG,CAClC,GAAG,yCAAyC,+CAA+C,EAC3F,aAAa,CAChB,CAAC;IACN,CAAC;IAEY,eAAe,CAAC,aAAkC;;YAC3D,IAAI;gBACA,MAAM,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;oBACvB,MAAM,EAAE,aAAa,CAAC,MAAM;oBAC5B,WAAW,EAAE,aAAa,CAAC,sBAAsB;iBACpD,CAAC,CAAC;aACN;YAAC,WAAM;gBACJ,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC;oBACzB,OAAO,EAAE,gCAAgC;oBACzC,mBAAmB,EAAE;wBACjB,MAAM,EAAE,aAAa,CAAC,MAAM;wBAC5B,WAAW,EAAE,aAAa,CAAC,sBAAsB;qBACpD;iBACJ,CAAC,CAAC;gBACH,OAAO,OAAO,CAAC,MAAM,EAAE,CAAC;aAC3B;YAED,sCAAsC;YACtC,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;YACvF,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,uBAAuB,EAAE,SAAS,CAAC,CAAC;YAEpE,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAErD,OAAO,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,aAAa,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;QAChF,CAAC;KAAA;CACJ,CAAA;AAxCD;IAFC,cAAc,CAAC,iBAAiB,CAAC;IACjC,kBAAkB,CAAC,uBAAuB,CAAC;qCAIhB,mBAAmB;QACjB,aAAa;QACL,oBAAoB;QAC3B,cAAc;QACT,kBAAkB;0CAiCrD\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit/node_modules/.cache/rollup-plugin-typescript2/placeholder/services/RemoveComponentServiceInner.d.ts","writeByteOrderMark":false,"text":"import { ICMSComponent, RemoveComponentInfo } from 'cmscommons';\r\nimport { IAlertService, IRenderService, IRestServiceFactory, SystemEventService } from 'smarteditcommons';\r\nimport { ComponentInfoService } from './ComponentInfoService';\r\nexport declare class RemoveComponentService {\r\n    private alertService;\r\n    private componentInfoService;\r\n    private renderService;\r\n    private systemEventService;\r\n    private resource;\r\n    constructor(restServiceFactory: IRestServiceFactory, alertService: IAlertService, componentInfoService: ComponentInfoService, renderService: IRenderService, systemEventService: SystemEventService);\r\n    removeComponent(configuration: RemoveComponentInfo): Promise<ICMSComponent>;\r\n}\r\n"}}
