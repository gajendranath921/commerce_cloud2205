{"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\r\nimport { Component, ElementRef, Input } from '@angular/core';\r\nimport { take } from 'rxjs/operators';\r\nimport { CONTENT_SLOT_TYPE, ICatalogService, L10nPipe, LogService, SeCustomComponent, CMSModesService, ComponentHandlerService } from 'smarteditcommons';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"ExternalComponentDecoratorComponent\", {\r\n    selector: 'external-component-decorator',\r\n    template: `<div [ngClass]=\"{\n        'cms-external-component-decorator': !isExternalSlot,\n        'cms-external-component-decorator--versioning': isVersioningPerspective,\n        'disabled-shared-slot-hovered': isActive && !isExternalSlot\n    }\"><div class=\"se-ctx-menu__overlay\" *ngIf=\"!isExternalSlot && isReady\"><se-tooltip *ngIf=\"!isActive || isVersioningPerspective\" [placement]=\"'bottom'\" [isChevronVisible]=\"true\" [triggers]=\"['mouseenter', 'mouseleave']\"><span se-tooltip-trigger class=\"se-ctx-menu-element__btn sap-icon--globe\"></span><div se-tooltip-body translate=\"se.cms.from.external.catalog.version\" [translateParams]=\"{ catalogVersion: catalogVersionText }\"></div></se-tooltip></div><div class=\"se-wrapper-data\" [ngClass]=\"{ 'disabled-shared-slot-versioning-mode': isVersioningPerspective && !isExternalSlot }\"><ng-content></ng-content></div></div>`,\r\n    styles: [`.cms-external-component-decorator{border:1px solid #dbe3eb;height:100%}.cms-external-component-decorator>.se-ctx-menu__overlay{left:1px!important;top:1px!important}`],\r\n    providers: [L10nPipe]\r\n});\r\nlet ExternalComponentDecoratorComponent = class ExternalComponentDecoratorComponent {\r\n    constructor(catalogService, cMSModesService, componentHandlerService, l10nPipe, logService, element) {\r\n        this.catalogService = catalogService;\r\n        this.cMSModesService = cMSModesService;\r\n        this.componentHandlerService = componentHandlerService;\r\n        this.l10nPipe = l10nPipe;\r\n        this.logService = logService;\r\n        this.element = element;\r\n        this.isActive = false;\r\n        this.isExternalSlot = false;\r\n        this.isReady = false;\r\n        this.isVersioningPerspective = false;\r\n    }\r\n    set active(val) {\r\n        this.isActive = val === 'true';\r\n    }\r\n    ngOnInit() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const parentSlotIdForComponent = this.componentHandlerService.getParentSlotForComponent(this.element.nativeElement);\r\n            this.isExternalSlot = this.componentHandlerService.isExternalComponent(parentSlotIdForComponent, CONTENT_SLOT_TYPE);\r\n            this.isReady = false;\r\n            this.isVersioningPerspective = yield this.cMSModesService.isVersioningPerspectiveActive();\r\n            try {\r\n                this.catalogVersionText = yield this.getCatalogVersionText(this.smarteditCatalogVersionUuid);\r\n                this.isReady = true;\r\n            }\r\n            catch (_a) {\r\n                this.logService.error(`${this.constructor.name} - cannot find catalog version for uuid`, this.smarteditCatalogVersionUuid);\r\n            }\r\n        });\r\n    }\r\n    getCatalogVersionText(catalogVersionUuid) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const catalogVersion = yield this.catalogService.getCatalogVersionByUuid(catalogVersionUuid);\r\n            const catalogName = yield this.l10nPipe\r\n                .transform(catalogVersion.catalogName)\r\n                .pipe(take(1))\r\n                .toPromise();\r\n            return `${catalogName} (${catalogVersion.version})`;\r\n        });\r\n    }\r\n};\r\n__decorate([\r\n    Input('data-smartedit-catalog-version-uuid'),\r\n    __metadata(\"design:type\", String)\r\n], ExternalComponentDecoratorComponent.prototype, \"smarteditCatalogVersionUuid\", void 0);\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String),\r\n    __metadata(\"design:paramtypes\", [String])\r\n], ExternalComponentDecoratorComponent.prototype, \"active\", null);\r\nExternalComponentDecoratorComponent = __decorate([\r\n    SeCustomComponent(),\r\n    Component({\r\n        selector: 'external-component-decorator',\r\n        template: `<div [ngClass]=\"{\n        'cms-external-component-decorator': !isExternalSlot,\n        'cms-external-component-decorator--versioning': isVersioningPerspective,\n        'disabled-shared-slot-hovered': isActive && !isExternalSlot\n    }\"><div class=\"se-ctx-menu__overlay\" *ngIf=\"!isExternalSlot && isReady\"><se-tooltip *ngIf=\"!isActive || isVersioningPerspective\" [placement]=\"'bottom'\" [isChevronVisible]=\"true\" [triggers]=\"['mouseenter', 'mouseleave']\"><span se-tooltip-trigger class=\"se-ctx-menu-element__btn sap-icon--globe\"></span><div se-tooltip-body translate=\"se.cms.from.external.catalog.version\" [translateParams]=\"{ catalogVersion: catalogVersionText }\"></div></se-tooltip></div><div class=\"se-wrapper-data\" [ngClass]=\"{ 'disabled-shared-slot-versioning-mode': isVersioningPerspective && !isExternalSlot }\"><ng-content></ng-content></div></div>`,\r\n        styles: [`.cms-external-component-decorator{border:1px solid #dbe3eb;height:100%}.cms-external-component-decorator>.se-ctx-menu__overlay{left:1px!important;top:1px!important}`],\r\n        providers: [L10nPipe]\r\n    }),\r\n    __metadata(\"design:paramtypes\", [ICatalogService,\r\n        CMSModesService,\r\n        ComponentHandlerService,\r\n        L10nPipe,\r\n        LogService,\r\n        ElementRef])\r\n], ExternalComponentDecoratorComponent);\r\nexport { ExternalComponentDecoratorComponent };\r\n//# sourceMappingURL=ExternalComponentDecoratorComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"ExternalComponentDecoratorComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/externalComponent/externalComponentDecorator/ExternalComponentDecoratorComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/cmssmartedit/apps/cms-smartedit/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/externalComponent/externalComponentDecorator/ExternalComponentDecoratorComponent.d.ts","writeByteOrderMark":false,"text":"import { ElementRef, OnInit } from '@angular/core';\r\nimport { ICatalogService, L10nPipe, LogService, CMSModesService, ComponentHandlerService } from 'smarteditcommons';\r\nexport declare class ExternalComponentDecoratorComponent implements OnInit {\r\n    private catalogService;\r\n    private cMSModesService;\r\n    private componentHandlerService;\r\n    private l10nPipe;\r\n    private logService;\r\n    private element;\r\n    smarteditCatalogVersionUuid: string;\r\n    set active(val: string);\r\n    catalogVersionText: string;\r\n    isActive: boolean;\r\n    isExternalSlot: boolean;\r\n    isReady: boolean;\r\n    isVersioningPerspective: boolean;\r\n    constructor(catalogService: ICatalogService, cMSModesService: CMSModesService, componentHandlerService: ComponentHandlerService, l10nPipe: L10nPipe, logService: LogService, element: ElementRef);\r\n    ngOnInit(): Promise<void>;\r\n    private getCatalogVersionText;\r\n}\r\n"}}
