{"code":"import { __decorate, __metadata } from \"tslib\";\r\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { isEqual } from 'lodash';\r\nimport { from } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\nimport { ModalButtonAction, ModalButtonStyle, ModalManagerService, SystemEventService } from 'smarteditcommons';\r\nimport { MULTI_PRODUCT_CATALOGS_UPDATED } from '../types';\r\nimport './MultiProductCatalogVersionConfigurationComponent.scss';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"MultiProductCatalogVersionConfigurationComponent\", {\r\n    selector: 'se-multi-product-catalog-version-configuration',\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    host: {\r\n        '[class.se-multi-product-catalog-version-configuration]': 'true'\r\n    },\r\n    template: `<div class=\"form-group se-multi-product-catalog-version-selector__label\">{{'se.product.catalogs.multiple.list.header' | translate}}</div><div class=\"se-multi-product-catalog-version-selector__catalog form-group\" *ngFor=\"let productCatalog of productCatalogs\"><label class=\"se-control-label se-multi-product-catalog-version-selector__catalog-name\" id=\"{{ productCatalog.catalogId }}-label\">{{ productCatalog.name | seL10n | async }}</label><div class=\"se-multi-product-catalog-version-selector__catalog-version\"><se-select [id]=\"productCatalog.catalogId\" [(model)]=\"productCatalog.selectedItem\" [onChange]=\"updateModel()\" [fetchStrategy]=\"productCatalog.fetchStrategy\"></se-select></div></div>`\r\n});\r\nlet MultiProductCatalogVersionConfigurationComponent = class MultiProductCatalogVersionConfigurationComponent {\r\n    constructor(modalManager, systemEventService) {\r\n        this.modalManager = modalManager;\r\n        this.systemEventService = systemEventService;\r\n        this.doneButtonId = 'done';\r\n    }\r\n    ngOnInit() {\r\n        this.modalManager\r\n            .getModalData()\r\n            .pipe(take(1))\r\n            .subscribe((data) => {\r\n            this.selectedCatalogVersions = data.selectedCatalogVersions;\r\n            this.productCatalogs = data.productCatalogs.map((productCatalog) => {\r\n                const versions = productCatalog.versions.map((version) => (Object.assign(Object.assign({}, version), { id: version.uuid, label: version.version })));\r\n                return Object.assign(Object.assign({}, productCatalog), { versions, fetchStrategy: {\r\n                        fetchAll: () => Promise.resolve(versions)\r\n                    }, selectedItem: productCatalog.versions.find((version) => this.selectedCatalogVersions.includes(version.uuid)).uuid });\r\n            });\r\n        });\r\n        this.modalManager.setDismissCallback(() => this.onCancel());\r\n        this.modalManager.addButtons([\r\n            {\r\n                id: this.doneButtonId,\r\n                label: 'se.confirmation.modal.done',\r\n                style: ModalButtonStyle.Primary,\r\n                action: ModalButtonAction.None,\r\n                disabled: true,\r\n                callback: () => from(this.onSave())\r\n            },\r\n            {\r\n                id: 'cancel',\r\n                label: 'se.confirmation.modal.cancel',\r\n                style: ModalButtonStyle.Default,\r\n                action: ModalButtonAction.Dismiss,\r\n                callback: () => from(this.onCancel())\r\n            }\r\n        ]);\r\n    }\r\n    updateModel() {\r\n        return () => {\r\n            const selectedVersions = this.productCatalogs.map((productCatalog) => productCatalog.selectedItem);\r\n            this.updateSelection(selectedVersions);\r\n        };\r\n    }\r\n    updateSelection(updatedSelectedVersions) {\r\n        if (!isEqual(updatedSelectedVersions, this.selectedCatalogVersions)) {\r\n            this.updatedCatalogVersions = updatedSelectedVersions;\r\n            this.modalManager.enableButton(this.doneButtonId);\r\n        }\r\n        else {\r\n            this.modalManager.disableButton(this.doneButtonId);\r\n        }\r\n    }\r\n    onCancel() {\r\n        this.modalManager.close(null);\r\n        return Promise.resolve();\r\n    }\r\n    onSave() {\r\n        this.systemEventService.publishAsync(MULTI_PRODUCT_CATALOGS_UPDATED, this.updatedCatalogVersions);\r\n        this.modalManager.close(null);\r\n        return Promise.resolve();\r\n    }\r\n};\r\nMultiProductCatalogVersionConfigurationComponent = __decorate([\r\n    Component({\r\n        selector: 'se-multi-product-catalog-version-configuration',\r\n        changeDetection: ChangeDetectionStrategy.OnPush,\r\n        host: {\r\n            '[class.se-multi-product-catalog-version-configuration]': 'true'\r\n        },\r\n        template: `<div class=\"form-group se-multi-product-catalog-version-selector__label\">{{'se.product.catalogs.multiple.list.header' | translate}}</div><div class=\"se-multi-product-catalog-version-selector__catalog form-group\" *ngFor=\"let productCatalog of productCatalogs\"><label class=\"se-control-label se-multi-product-catalog-version-selector__catalog-name\" id=\"{{ productCatalog.catalogId }}-label\">{{ productCatalog.name | seL10n | async }}</label><div class=\"se-multi-product-catalog-version-selector__catalog-version\"><se-select [id]=\"productCatalog.catalogId\" [(model)]=\"productCatalog.selectedItem\" [onChange]=\"updateModel()\" [fetchStrategy]=\"productCatalog.fetchStrategy\"></se-select></div></div>`\r\n    }),\r\n    __metadata(\"design:paramtypes\", [ModalManagerService,\r\n        SystemEventService])\r\n], MultiProductCatalogVersionConfigurationComponent);\r\nexport { MultiProductCatalogVersionConfigurationComponent };\r\n//# sourceMappingURL=MultiProductCatalogVersionConfigurationComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types+lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/src/components/productCatalogVersion/types.ts"],"map":"{\"version\":3,\"file\":\"MultiProductCatalogVersionConfigurationComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/productCatalogVersion/multiProductCatalogVersionConfiguration/MultiProductCatalogVersionConfigurationComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/productCatalogVersion/multiProductCatalogVersionConfiguration/MultiProductCatalogVersionConfigurationComponent.d.ts","writeByteOrderMark":false,"text":"import { OnInit } from '@angular/core';\r\nimport { ModalManagerService, SelectOnChange, SystemEventService } from 'smarteditcommons';\r\nimport { SelectAdaptedCatalog } from '../types';\r\nimport './MultiProductCatalogVersionConfigurationComponent.scss';\r\nexport declare class MultiProductCatalogVersionConfigurationComponent implements OnInit {\r\n    private modalManager;\r\n    private systemEventService;\r\n    productCatalogs: SelectAdaptedCatalog[];\r\n    selectedCatalogVersions: string[];\r\n    updatedCatalogVersions: string[];\r\n    private readonly doneButtonId;\r\n    constructor(modalManager: ModalManagerService, systemEventService: SystemEventService);\r\n    ngOnInit(): void;\r\n    updateModel(): SelectOnChange;\r\n    private updateSelection;\r\n    private onCancel;\r\n    private onSave;\r\n}\r\n"}}
