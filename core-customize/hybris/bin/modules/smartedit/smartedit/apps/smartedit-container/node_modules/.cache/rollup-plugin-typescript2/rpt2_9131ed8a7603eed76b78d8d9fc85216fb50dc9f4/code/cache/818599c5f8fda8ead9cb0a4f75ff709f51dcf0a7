{"code":"import { __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { Injectable } from '@angular/core';\r\nimport { clone } from 'lodash';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { stringUtils, GatewayProxied, IAnnouncementService, LogService, SeDowngradeService } from 'smarteditcommons';\r\nexport const ANNOUNCEMENT_DEFAULTS = {\r\n    timeout: 5000,\r\n    closeable: true\r\n};\r\nlet /* @ngInject */ AnnouncementService = class /* @ngInject */ AnnouncementService extends IAnnouncementService {\r\n    constructor(logService) {\r\n        super();\r\n        this.logService = logService;\r\n        this.announcements$ = new BehaviorSubject([]);\r\n    }\r\n    showAnnouncement(announcementConfig) {\r\n        this.validateAnnouncementConfig(announcementConfig);\r\n        const announcement = clone(announcementConfig);\r\n        announcement.id = stringUtils.encode(announcementConfig);\r\n        announcement.timeout =\r\n            !!announcement.timeout && announcement.timeout > 0\r\n                ? announcement.timeout\r\n                : ANNOUNCEMENT_DEFAULTS.timeout;\r\n        if (announcement.timeout > 0) {\r\n            announcement.timer = setTimeout(() => {\r\n                this._closeAnnouncement(announcement);\r\n            }, announcement.timeout);\r\n        }\r\n        this.announcements$.next([...this.announcements$.getValue(), announcement]);\r\n        return Promise.resolve(announcement.id);\r\n    }\r\n    getAnnouncements() {\r\n        return this.announcements$.asObservable();\r\n    }\r\n    closeAnnouncement(announcementId) {\r\n        const announcement = this.announcements$\r\n            .getValue()\r\n            .find((announcementObj) => announcementObj.id === announcementId);\r\n        if (announcement) {\r\n            this._closeAnnouncement(announcement);\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    _closeAnnouncement(announcement) {\r\n        if (announcement.timer) {\r\n            clearTimeout(announcement.timer);\r\n        }\r\n        const announcements = this.announcements$.getValue();\r\n        const newAnnouncements = announcements.filter((announcementObj) => announcementObj.id !== announcement.id);\r\n        this.announcements$.next(newAnnouncements);\r\n    }\r\n    validateAnnouncementConfig(announcementConfig) {\r\n        const { message, component } = announcementConfig;\r\n        if (!message && !component) {\r\n            this.logService.warn('AnnouncementService.validateAnnouncementConfig - announcement must contain at least a message or component property', announcementConfig);\r\n        }\r\n        if (message && component) {\r\n            throw new Error('AnnouncementService.validateAnnouncementConfig - either message or component must be provided');\r\n        }\r\n    }\r\n};\r\n/* @ngInject */ AnnouncementService = __decorate([\r\n    SeDowngradeService(IAnnouncementService),\r\n    GatewayProxied('showAnnouncement', 'closeAnnouncement'),\r\n    Injectable(),\r\n    __metadata(\"design:paramtypes\", [LogService])\r\n], /* @ngInject */ AnnouncementService);\r\nexport { /* @ngInject */ AnnouncementService };\r\n//# sourceMappingURL=AnnouncementServiceOuter.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types+lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"AnnouncementServiceOuter.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/services/announcement/AnnouncementServiceOuter.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/services/announcement/AnnouncementServiceOuter.d.ts","writeByteOrderMark":false,"text":"import { Observable } from 'rxjs';\r\nimport { IAnnouncementConfig, IAnnouncementService, LogService } from 'smarteditcommons';\r\nexport interface IAnnouncement extends IAnnouncementConfig {\r\n    timer?: number;\r\n    id: string;\r\n}\r\nexport declare const ANNOUNCEMENT_DEFAULTS: {\r\n    timeout: number;\r\n    closeable: boolean;\r\n};\r\nexport declare class AnnouncementService extends IAnnouncementService {\r\n    private logService;\r\n    private announcements$;\r\n    constructor(logService: LogService);\r\n    showAnnouncement(announcementConfig: IAnnouncementConfig): Promise<string>;\r\n    getAnnouncements(): Observable<IAnnouncement[]>;\r\n    closeAnnouncement(announcementId: string): Promise<void>;\r\n    private _closeAnnouncement;\r\n    private validateAnnouncementConfig;\r\n}\r\n"}}
