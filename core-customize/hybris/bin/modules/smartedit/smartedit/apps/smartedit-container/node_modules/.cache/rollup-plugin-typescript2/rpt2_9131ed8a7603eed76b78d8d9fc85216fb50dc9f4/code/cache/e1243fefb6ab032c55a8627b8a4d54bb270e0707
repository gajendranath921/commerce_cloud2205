{"code":"import { __awaiter, __decorate, __metadata, __param } from \"tslib\";\r\nimport { Component, Inject } from '@angular/core';\r\nimport { BrowserService, IExperienceService, SeDowngradeComponent, YJQUERY_TOKEN, CrossFrameEventService, EVENT_PERSPECTIVE_UNLOADING, EVENT_PAGE_TREE_PANEL_SWITCH, EVENT_OPEN_IN_PAGE_TREE, IStorageService, IPermissionService } from 'smarteditcommons';\r\nimport { IframeManagerService } from '../../../services/iframe/IframeManagerService';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"StorefrontPageComponent\", {\r\n    selector: 'se-storefront-page',\r\n    template: `<div class=\"se-toolbar-group\"><se-toolbar cssClass=\"se-toolbar--shell\" imageRoot=\"imageRoot\" toolbarName=\"smartEditHeaderToolbar\"></se-toolbar><se-toolbar cssClass=\"se-toolbar--experience\" imageRoot=\"imageRoot\" toolbarName=\"smartEditExperienceToolbar\"></se-toolbar><se-toolbar cssClass=\"se-toolbar--perspective\" imageRoot=\"imageRoot\" toolbarName=\"smartEditPerspectiveToolbar\"></se-toolbar></div><div id=\"js_iFrameWrapper\" class=\"iframeWrapper\"><div class=\"wrap\"><div *ngIf=\"showPageTreeList()\" class=\"page-tree__list\"><se-page-tree-container></se-page-tree-container></div><div class=\"iframe-panel\"><iframe id=\"ySmartEditFrame\" src=\"\"></iframe><div id=\"ySmartEditFrameDragArea\"></div></div></div></div>`,\r\n    styles: [`.wrap{display:flex;justify-content:flex-start;flex-wrap:nowrap;height:100%}.page-tree__list{width:20%;height:100%;padding:16px 8px 16px 8px;min-width:20%}.iframe-panel{width:100%;height:100%}`]\r\n});\r\nlet /* @ngInject */ StorefrontPageComponent = class /* @ngInject */ StorefrontPageComponent {\r\n    constructor(browserService, iframeManagerService, experienceService, yjQuery, crossFrameEventService, storageService, permissionService) {\r\n        this.browserService = browserService;\r\n        this.iframeManagerService = iframeManagerService;\r\n        this.experienceService = experienceService;\r\n        this.yjQuery = yjQuery;\r\n        this.crossFrameEventService = crossFrameEventService;\r\n        this.storageService = storageService;\r\n        this.permissionService = permissionService;\r\n        this.PAGE_TREE_PANEL_OPEN_COOKIE_NAME = 'smartedit-page-tree-panel-open';\r\n        this.isPageTreePanelOpen = false;\r\n    }\r\n    ngOnInit() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.iframeManagerService.applyDefault();\r\n            yield this.experienceService.initializeExperience();\r\n            this.yjQuery(document.body).addClass('is-storefront');\r\n            if (this.browserService.isSafari()) {\r\n                this.yjQuery(document.body).addClass('is-safari');\r\n            }\r\n            const pageTreePanelStatus = yield this.storageService.getValueFromLocalStorage(this.PAGE_TREE_PANEL_OPEN_COOKIE_NAME, true);\r\n            const allowed = yield this.permissionService.isPermitted([\r\n                {\r\n                    names: ['se.read.page']\r\n                }\r\n            ]);\r\n            this.isPageTreePanelOpen = pageTreePanelStatus && allowed;\r\n            this.crossFrameEventService.subscribe(EVENT_PAGE_TREE_PANEL_SWITCH, () => {\r\n                this.isPageTreePanelOpen = !this.isPageTreePanelOpen;\r\n                this.updateStorage();\r\n            });\r\n            this.crossFrameEventService.subscribe(EVENT_OPEN_IN_PAGE_TREE, () => {\r\n                if (!this.isPageTreePanelOpen) {\r\n                    this.isPageTreePanelOpen = true;\r\n                    this.updateStorage();\r\n                }\r\n            });\r\n            this.crossFrameEventService.subscribe(EVENT_PERSPECTIVE_UNLOADING, () => {\r\n                this.isPageTreePanelOpen = false;\r\n                this.updateStorage();\r\n            });\r\n        });\r\n    }\r\n    showPageTreeList() {\r\n        return this.isPageTreePanelOpen;\r\n    }\r\n    updateStorage() {\r\n        this.storageService.setValueInLocalStorage(this.PAGE_TREE_PANEL_OPEN_COOKIE_NAME, this.isPageTreePanelOpen, true);\r\n    }\r\n};\r\n/* @ngInject */ StorefrontPageComponent = __decorate([\r\n    SeDowngradeComponent(),\r\n    Component({\r\n        selector: 'se-storefront-page',\r\n        template: `<div class=\"se-toolbar-group\"><se-toolbar cssClass=\"se-toolbar--shell\" imageRoot=\"imageRoot\" toolbarName=\"smartEditHeaderToolbar\"></se-toolbar><se-toolbar cssClass=\"se-toolbar--experience\" imageRoot=\"imageRoot\" toolbarName=\"smartEditExperienceToolbar\"></se-toolbar><se-toolbar cssClass=\"se-toolbar--perspective\" imageRoot=\"imageRoot\" toolbarName=\"smartEditPerspectiveToolbar\"></se-toolbar></div><div id=\"js_iFrameWrapper\" class=\"iframeWrapper\"><div class=\"wrap\"><div *ngIf=\"showPageTreeList()\" class=\"page-tree__list\"><se-page-tree-container></se-page-tree-container></div><div class=\"iframe-panel\"><iframe id=\"ySmartEditFrame\" src=\"\"></iframe><div id=\"ySmartEditFrameDragArea\"></div></div></div></div>`,\r\n        styles: [`.wrap{display:flex;justify-content:flex-start;flex-wrap:nowrap;height:100%}.page-tree__list{width:20%;height:100%;padding:16px 8px 16px 8px;min-width:20%}.iframe-panel{width:100%;height:100%}`]\r\n    }),\r\n    __param(3, Inject(YJQUERY_TOKEN)),\r\n    __metadata(\"design:paramtypes\", [BrowserService,\r\n        IframeManagerService,\r\n        IExperienceService, Function, CrossFrameEventService,\r\n        IStorageService,\r\n        IPermissionService])\r\n], /* @ngInject */ StorefrontPageComponent);\r\nexport { /* @ngInject */ StorefrontPageComponent };\r\n//# sourceMappingURL=StorefrontPageComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/src/services/iframe/IframeManagerService.ts"],"map":"{\"version\":3,\"file\":\"StorefrontPageComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/pages/storefrontPage/StorefrontPageComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/pages/storefrontPage/StorefrontPageComponent.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"angular\" />\r\n/// <reference types=\"jquery\" />\r\nimport { OnInit } from '@angular/core';\r\nimport { BrowserService, IExperienceService, CrossFrameEventService, IStorageService, IPermissionService } from 'smarteditcommons';\r\nimport { IframeManagerService } from '../../../services/iframe/IframeManagerService';\r\nexport declare class StorefrontPageComponent implements OnInit {\r\n    private readonly browserService;\r\n    private readonly iframeManagerService;\r\n    private readonly experienceService;\r\n    private readonly yjQuery;\r\n    private readonly crossFrameEventService;\r\n    private readonly storageService;\r\n    private readonly permissionService;\r\n    private readonly PAGE_TREE_PANEL_OPEN_COOKIE_NAME;\r\n    private isPageTreePanelOpen;\r\n    constructor(browserService: BrowserService, iframeManagerService: IframeManagerService, experienceService: IExperienceService, yjQuery: JQueryStatic, crossFrameEventService: CrossFrameEventService, storageService: IStorageService, permissionService: IPermissionService);\r\n    ngOnInit(): Promise<void>;\r\n    showPageTreeList(): boolean;\r\n    private updateStorage;\r\n}\r\n"}}
