{"code":"import { __decorate, __metadata, __param } from \"tslib\";\r\nimport './inflectionPointSelectorWidget.scss';\r\nimport { Component, Inject } from '@angular/core';\r\nimport { fromEvent } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\nimport { windowUtils, IIframeClickDetectionService, OVERLAY_DISABLED_EVENT, SeDowngradeComponent, SystemEventService, YJQUERY_TOKEN, UserTrackingService, USER_TRACKING_FUNCTIONALITY } from 'smarteditcommons';\r\nimport { DEVICE_SUPPORTS } from '../iframe/DeviceSupportsValue';\r\nimport { IframeManagerService } from '../iframe/IframeManagerService';\r\nimport { IframeClickDetectionService } from '../IframeClickDetectionServiceOuter';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"InflectionPointSelectorComponent\", {\r\n    selector: 'inflection-point-selector',\r\n    template: `<div class=\"se-inflection-point dropdown\" [class.open]=\"isOpen\" id=\"inflectionPtDropdown\"><button type=\"button\" class=\"se-inflection-point__toggle\" (click)=\"toggleDropdown($event)\" aria-pressed=\"false\" [attr.aria-expanded]=\"isOpen\"><span [ngClass]=\"getIconClass()\" class=\"se-inflection-point___selected\"></span></button><div class=\"se-inflection-point-dropdown\"><nav class=\"fd-menu\"><ul class=\"fd-menu__list\" role=\"menu\"><li *ngFor=\"let choice of points\" class=\"fd-menu__item inflection-point__device\" [ngClass]=\"{selected: isSelected(choice)}\" id=\"se-device-{{choice.type}}\" (click)=\"selectPoint(choice)\"><span [ngClass]=\"getIconClass(choice)\"></span></li></ul></nav></div></div>`\r\n});\r\nlet /* @ngInject */ InflectionPointSelectorComponent = class /* @ngInject */ InflectionPointSelectorComponent {\r\n    constructor(systemEventService, iframeManagerService, iframeClickDetectionService, yjQuery, userTrackingService) {\r\n        this.systemEventService = systemEventService;\r\n        this.iframeManagerService = iframeManagerService;\r\n        this.iframeClickDetectionService = iframeClickDetectionService;\r\n        this.yjQuery = yjQuery;\r\n        this.userTrackingService = userTrackingService;\r\n        this.currentPointSelected = DEVICE_SUPPORTS.find((deviceSupport) => deviceSupport.default);\r\n        this.points = DEVICE_SUPPORTS;\r\n        this.isOpen = false;\r\n    }\r\n    ngOnInit() {\r\n        this.iframeClickDetectionService.registerCallback('inflectionPointClose', () => (this.isOpen = false));\r\n        const window = windowUtils.getWindow();\r\n        this.documentClick$ = fromEvent(window.document, 'click')\r\n            .pipe(filter((event) => this.yjQuery(event.target).parents('inflection-point-selector').length <=\r\n            0 && this.isOpen))\r\n            .subscribe((event) => (this.isOpen = false));\r\n        this.unRegFn = this.systemEventService.subscribe(OVERLAY_DISABLED_EVENT, () => (this.isOpen = false));\r\n    }\r\n    ngOnDestroy() {\r\n        this.unRegFn();\r\n        this.documentClick$.unsubscribe();\r\n    }\r\n    selectPoint(choice) {\r\n        this.userTrackingService.trackingUserAction(USER_TRACKING_FUNCTIONALITY.INFLECTION, choice.type);\r\n        this.currentPointSelected = choice;\r\n        this.isOpen = !this.isOpen;\r\n        if (choice !== undefined) {\r\n            this.iframeManagerService.apply(choice);\r\n        }\r\n    }\r\n    toggleDropdown(event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        this.isOpen = !this.isOpen;\r\n    }\r\n    getIconClass(choice) {\r\n        if (choice !== undefined) {\r\n            return choice.iconClass;\r\n        }\r\n        else {\r\n            return this.currentPointSelected.iconClass;\r\n        }\r\n    }\r\n    isSelected(choice) {\r\n        if (choice !== undefined) {\r\n            return choice.type === this.currentPointSelected.type;\r\n        }\r\n        return false;\r\n    }\r\n};\r\n/* @ngInject */ InflectionPointSelectorComponent = __decorate([\r\n    SeDowngradeComponent(),\r\n    Component({\r\n        selector: 'inflection-point-selector',\r\n        template: `<div class=\"se-inflection-point dropdown\" [class.open]=\"isOpen\" id=\"inflectionPtDropdown\"><button type=\"button\" class=\"se-inflection-point__toggle\" (click)=\"toggleDropdown($event)\" aria-pressed=\"false\" [attr.aria-expanded]=\"isOpen\"><span [ngClass]=\"getIconClass()\" class=\"se-inflection-point___selected\"></span></button><div class=\"se-inflection-point-dropdown\"><nav class=\"fd-menu\"><ul class=\"fd-menu__list\" role=\"menu\"><li *ngFor=\"let choice of points\" class=\"fd-menu__item inflection-point__device\" [ngClass]=\"{selected: isSelected(choice)}\" id=\"se-device-{{choice.type}}\" (click)=\"selectPoint(choice)\"><span [ngClass]=\"getIconClass(choice)\"></span></li></ul></nav></div></div>`\r\n    }),\r\n    __param(2, Inject(IIframeClickDetectionService)),\r\n    __param(3, Inject(YJQUERY_TOKEN)),\r\n    __metadata(\"design:paramtypes\", [SystemEventService,\r\n        IframeManagerService,\r\n        IframeClickDetectionService, Function, UserTrackingService])\r\n], /* @ngInject */ InflectionPointSelectorComponent);\r\nexport { /* @ngInject */ InflectionPointSelectorComponent };\r\n//# sourceMappingURL=InflectionPointSelectorComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/src/services/iframe/DeviceSupportsValue.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/src/services/iframe/IframeManagerService.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/src/services/IframeClickDetectionServiceOuter.ts"],"map":"{\"version\":3,\"file\":\"InflectionPointSelectorComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/services/inflectionPointSelectorWidget/InflectionPointSelectorComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/services/inflectionPointSelectorWidget/InflectionPointSelectorComponent.d.ts","writeByteOrderMark":false,"text":"import './inflectionPointSelectorWidget.scss';\r\nimport { OnDestroy, OnInit } from '@angular/core';\r\nimport { SystemEventService, YJQuery, UserTrackingService } from 'smarteditcommons';\r\nimport { DeviceSupport } from '../iframe/DeviceSupportsValue';\r\nimport { IframeManagerService } from '../iframe/IframeManagerService';\r\nimport { IframeClickDetectionService } from '../IframeClickDetectionServiceOuter';\r\nexport declare class InflectionPointSelectorComponent implements OnInit, OnDestroy {\r\n    private systemEventService;\r\n    private iframeManagerService;\r\n    private iframeClickDetectionService;\r\n    private yjQuery;\r\n    private userTrackingService;\r\n    points: DeviceSupport[];\r\n    currentPointSelected: DeviceSupport | undefined;\r\n    isOpen: boolean;\r\n    private unRegFn;\r\n    private documentClick$;\r\n    constructor(systemEventService: SystemEventService, iframeManagerService: IframeManagerService, iframeClickDetectionService: IframeClickDetectionService, yjQuery: YJQuery, userTrackingService: UserTrackingService);\r\n    ngOnInit(): void;\r\n    ngOnDestroy(): void;\r\n    selectPoint(choice: DeviceSupport): void;\r\n    toggleDropdown(event: MouseEvent): void;\r\n    getIconClass(choice: DeviceSupport | undefined): string;\r\n    isSelected(choice: DeviceSupport | undefined): boolean;\r\n}\r\n"}}
