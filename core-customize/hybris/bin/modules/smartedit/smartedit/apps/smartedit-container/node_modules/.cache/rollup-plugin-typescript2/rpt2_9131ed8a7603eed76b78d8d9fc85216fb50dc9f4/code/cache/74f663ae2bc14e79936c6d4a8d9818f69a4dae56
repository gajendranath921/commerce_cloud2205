{"code":"/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { IToolbarService } from 'smarteditcommons';\r\nexport class ToolbarService extends IToolbarService {\r\n    constructor(gatewayId, gatewayProxy, logService, $templateCache, permissionService) {\r\n        super(logService, $templateCache, permissionService);\r\n        this.gatewayId = gatewayId;\r\n        this.onAliasesChange = null;\r\n        gatewayProxy.initForService(this, [\r\n            'addAliases',\r\n            'removeItemByKey',\r\n            'removeAliasByKey',\r\n            '_removeItemOnInner',\r\n            'triggerActionOnInner'\r\n        ]);\r\n    }\r\n    addAliases(aliases) {\r\n        this.aliases = this.aliases.map((alias) => this.get(aliases, alias) || alias);\r\n        this.aliases = [\r\n            ...(this.aliases || []),\r\n            ...(aliases || []).filter((alias) => !this.get(this.aliases, alias))\r\n        ];\r\n        this.aliases = this.sortAliases(this.aliases);\r\n        if (this.onAliasesChange) {\r\n            this.onAliasesChange(this.aliases);\r\n        }\r\n    }\r\n    /**\r\n     * This method removes the action and the aliases of the toolbar item identified by\r\n     * the provided key.\r\n     *\r\n     * @param itemKey - Identifier of the toolbar item to remove.\r\n     */\r\n    removeItemByKey(itemKey) {\r\n        if (itemKey in this.actions) {\r\n            delete this.actions[itemKey];\r\n        }\r\n        else {\r\n            this._removeItemOnInner(itemKey);\r\n        }\r\n        this.removeAliasByKey(itemKey);\r\n    }\r\n    removeAliasByKey(itemKey) {\r\n        let aliasIndex = 0;\r\n        for (; aliasIndex < this.aliases.length; aliasIndex++) {\r\n            if (this.aliases[aliasIndex].key === itemKey) {\r\n                break;\r\n            }\r\n        }\r\n        if (aliasIndex < this.aliases.length) {\r\n            this.aliases.splice(aliasIndex, 1);\r\n        }\r\n        if (this.onAliasesChange) {\r\n            this.onAliasesChange(this.aliases);\r\n        }\r\n    }\r\n    setOnAliasesChange(onAliasesChange) {\r\n        this.onAliasesChange = onAliasesChange;\r\n    }\r\n    triggerAction(action) {\r\n        if (action && this.actions[action.key]) {\r\n            this.actions[action.key].call(action);\r\n            return;\r\n        }\r\n        this.triggerActionOnInner(action);\r\n    }\r\n    get(aliases, alias) {\r\n        return aliases.find(({ key }) => key === alias.key);\r\n    }\r\n    sortAliases(aliases) {\r\n        let samePriority = false;\r\n        let warning = 'In ' + this.gatewayId + ' the items ';\r\n        let _section = null;\r\n        const result = [...(aliases || [])].sort((a, b) => {\r\n            if (a.priority === b.priority && a.section === b.section) {\r\n                _section = a.section;\r\n                warning += a.key + ' and ' + b.key + ' ';\r\n                samePriority = true;\r\n                return a.key > b.key ? 1 : -1; // or the opposite ?\r\n            }\r\n            return a.priority - b.priority;\r\n        });\r\n        if (samePriority) {\r\n            this.logService.warn('WARNING: ' + warning + 'have the same priority withing section:' + _section);\r\n        }\r\n        return result;\r\n    }\r\n}\r\n//# sourceMappingURL=ToolbarService.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"ToolbarService.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/services/toolbar/services/ToolbarService.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-container/node_modules/.cache/rollup-plugin-typescript2/placeholder/services/toolbar/services/ToolbarService.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"angular\" />\r\nimport { GatewayProxy, IPermissionService, IToolbarService, LogService, ToolbarItemInternal } from 'smarteditcommons';\r\nexport declare class ToolbarService extends IToolbarService {\r\n    gatewayId: string;\r\n    private onAliasesChange;\r\n    constructor(gatewayId: string, gatewayProxy: GatewayProxy, logService: LogService, $templateCache: angular.ITemplateCacheService, permissionService: IPermissionService);\r\n    addAliases(aliases: ToolbarItemInternal[]): void;\r\n    /**\r\n     * This method removes the action and the aliases of the toolbar item identified by\r\n     * the provided key.\r\n     *\r\n     * @param itemKey - Identifier of the toolbar item to remove.\r\n     */\r\n    removeItemByKey(itemKey: string): void;\r\n    removeAliasByKey(itemKey: string): void;\r\n    setOnAliasesChange(onAliasesChange: (aliases: ToolbarItemInternal[]) => void): void;\r\n    triggerAction(action: ToolbarItemInternal): void;\r\n    private get;\r\n    private sortAliases;\r\n}\r\n"}}
