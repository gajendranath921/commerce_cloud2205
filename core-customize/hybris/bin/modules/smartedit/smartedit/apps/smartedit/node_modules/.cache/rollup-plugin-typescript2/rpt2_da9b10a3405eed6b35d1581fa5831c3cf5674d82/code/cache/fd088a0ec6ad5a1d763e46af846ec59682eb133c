{"code":"import { __decorate, __metadata } from \"tslib\";\r\n/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\nimport { CloneableUtils, GatewayProxied, IContextualMenuService, IDecoratorService, IFeatureService, LogService, SeDowngradeService } from 'smarteditcommons';\r\n/** @internal */\r\nlet /* @ngInject */ FeatureService = class /* @ngInject */ FeatureService extends IFeatureService {\r\n    constructor(logService, decoratorService, cloneableUtils, contextualMenuService) {\r\n        super(cloneableUtils);\r\n        this.logService = logService;\r\n        this.decoratorService = decoratorService;\r\n        this.contextualMenuService = contextualMenuService;\r\n    }\r\n    addDecorator(configuration) {\r\n        const prevEnablingCallback = configuration.enablingCallback;\r\n        const prevDisablingCallback = configuration.disablingCallback;\r\n        const displayCondition = configuration.displayCondition;\r\n        configuration.enablingCallback = function () {\r\n            this.enable(configuration.key, displayCondition);\r\n            if (prevEnablingCallback) {\r\n                prevEnablingCallback();\r\n            }\r\n        }.bind(this.decoratorService);\r\n        configuration.disablingCallback = function () {\r\n            this.disable(configuration.key);\r\n            if (prevDisablingCallback) {\r\n                prevDisablingCallback();\r\n            }\r\n        }.bind(this.decoratorService);\r\n        delete configuration.displayCondition;\r\n        return this.register(configuration);\r\n    }\r\n    addContextualMenuButton(item) {\r\n        const clone = Object.assign({}, item);\r\n        delete item.nameI18nKey;\r\n        delete item.descriptionI18nKey;\r\n        delete item.regexpKeys;\r\n        clone.enablingCallback = function () {\r\n            const mapping = {};\r\n            clone.regexpKeys.forEach((regexpKey) => {\r\n                mapping[regexpKey] = [item];\r\n            });\r\n            if (!this.containsItem(clone.key)) {\r\n                this.addItems(mapping);\r\n            }\r\n        }.bind(this.contextualMenuService);\r\n        clone.disablingCallback = function () {\r\n            this.removeItemByKey(clone.key);\r\n        }.bind(this.contextualMenuService);\r\n        return this.register(clone);\r\n    }\r\n    _remoteEnablingFromInner(key) {\r\n        if (this._featuresToAlias && this._featuresToAlias[key]) {\r\n            this._featuresToAlias[key].enablingCallback();\r\n        }\r\n        else {\r\n            this.logService.warn('could not enable feature named ' + key + ', it was not found in the iframe');\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    _remoteDisablingFromInner(key) {\r\n        if (this._featuresToAlias && this._featuresToAlias[key]) {\r\n            this._featuresToAlias[key].disablingCallback();\r\n        }\r\n        else {\r\n            this.logService.warn('could not disable feature named ' + key + ', it was not found in the iframe');\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n};\r\n/* @ngInject */ FeatureService = __decorate([\r\n    SeDowngradeService(IFeatureService),\r\n    GatewayProxied('_registerAliases', 'addToolbarItem', 'register', 'enable', 'disable', '_remoteEnablingFromInner', '_remoteDisablingFromInner', 'addDecorator', 'getFeatureProperty', 'addContextualMenuButton'),\r\n    __metadata(\"design:paramtypes\", [LogService,\r\n        IDecoratorService,\r\n        CloneableUtils,\r\n        IContextualMenuService])\r\n], /* @ngInject */ FeatureService);\r\nexport { /* @ngInject */ FeatureService };\r\n//# sourceMappingURL=FeatureServiceInner.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/dist/index.d.ts"],"map":"{\"version\":3,\"file\":\"FeatureServiceInner.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/services/FeatureServiceInner.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit/node_modules/.cache/rollup-plugin-typescript2/placeholder/services/FeatureServiceInner.d.ts","writeByteOrderMark":false,"text":"import { CloneableUtils, IContextualMenuButton, IContextualMenuService, IDecorator, IDecoratorService, IFeatureService, LogService } from 'smarteditcommons';\r\n/** @internal */\r\nexport declare class FeatureService extends IFeatureService {\r\n    private logService;\r\n    private decoratorService;\r\n    private contextualMenuService;\r\n    constructor(logService: LogService, decoratorService: IDecoratorService, cloneableUtils: CloneableUtils, contextualMenuService: IContextualMenuService);\r\n    addDecorator(configuration: IDecorator): Promise<void>;\r\n    addContextualMenuButton(item: IContextualMenuButton): Promise<void>;\r\n    protected _remoteEnablingFromInner(key: string): Promise<void>;\r\n    protected _remoteDisablingFromInner(key: string): Promise<void>;\r\n}\r\n"}}
