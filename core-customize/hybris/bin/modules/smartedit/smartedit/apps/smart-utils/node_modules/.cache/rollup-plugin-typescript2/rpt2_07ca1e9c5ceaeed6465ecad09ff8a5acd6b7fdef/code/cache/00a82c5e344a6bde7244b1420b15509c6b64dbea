{"code":"/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/**\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n * @module smartutils\r\n */\r\nimport { HttpErrorResponse, HttpParams, HttpResponse } from '@angular/common/http';\r\nimport * as lodash from 'lodash';\r\nimport { from, throwError, Observable } from 'rxjs';\r\nimport { switchMap } from 'rxjs/operators';\r\nimport { stringUtils } from './string-utils';\r\nexport class HttpUtils {\r\n    isGET(request) {\r\n        return request.method === 'GET';\r\n    }\r\n    isRequestOfAccept(request, accept) {\r\n        return (!!request.headers &&\r\n            !!request.headers.get('Accept') &&\r\n            (request.headers.get('Accept') || '').includes(accept));\r\n    }\r\n    isResponseOfContentType(response, contentType) {\r\n        return (!!response.headers &&\r\n            !!response.headers.get('Content-type') &&\r\n            (response.headers.get('Content-type') || '').indexOf(contentType) === 0);\r\n    }\r\n    isHTMLRequest(request, response) {\r\n        return (this.isGET(request) &&\r\n            (this.isRequestOfAccept(request, 'text/html') ||\r\n                /.+\\.html$/.test(request.url) ||\r\n                /.+\\.html\\?/.test(request.url)));\r\n    }\r\n    isJSONRequest(request, response) {\r\n        return (this.isGET(request) &&\r\n            ((response && this.isResponseOfContentType(response, 'json')) ||\r\n                /.+\\.json$/.test(request.url)));\r\n    }\r\n    isJSRequest(request) {\r\n        return this.isGET(request) && /.+\\.js$/.test(request.url);\r\n    }\r\n    isCRUDRequest(request, response) {\r\n        return (!this.isHTMLRequest(request, response) &&\r\n            !this.isJSONRequest(request, response) &&\r\n            !this.isJSRequest(request));\r\n    }\r\n    transformHttpParams(params, substitutionMap) {\r\n        return new HttpParams({\r\n            fromObject: JSON.parse(stringUtils.replaceAll(JSON.stringify(this.copyHttpParamsOrHeaders(params)), substitutionMap))\r\n        });\r\n    }\r\n    copyHttpParamsOrHeaders(params) {\r\n        const copy = {};\r\n        params.keys().forEach((key) => {\r\n            const values = params.getAll(key);\r\n            if (values !== null) {\r\n                copy[key] = values.length > 1 ? values : values[0];\r\n            }\r\n        });\r\n        return copy;\r\n    }\r\n    buildHttpResponse(originalRequest, _statusAndPayload) {\r\n        const statusAndPayloadPromise = Promise.resolve(_statusAndPayload);\r\n        return from(statusAndPayloadPromise).pipe(switchMap((statusAndPayload) => {\r\n            const status = statusAndPayload[0];\r\n            const body = statusAndPayload[1];\r\n            const requestClone = originalRequest.clone({\r\n                body\r\n            });\r\n            lodash.merge(requestClone, { status });\r\n            if (200 <= status && status < 300) {\r\n                return new Observable((ob) => {\r\n                    ob.next(new HttpResponse(requestClone));\r\n                });\r\n            }\r\n            else {\r\n                return throwError(new HttpErrorResponse(lodash.merge(requestClone, { error: body })));\r\n            }\r\n        }));\r\n    }\r\n}\r\nexport const httpUtils = new HttpUtils();\r\n//# sourceMappingURL=http-utils.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+common@8.2.14_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@angular/common/http.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types+lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/rxjs@6.5.4/node_modules/rxjs/operators/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/dtos/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/utils/string-utils.ts"],"map":"{\"version\":3,\"file\":\"http-utils.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/utils/http-utils.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/node_modules/.cache/rollup-plugin-typescript2/placeholder/utils/http-utils.d.ts","writeByteOrderMark":false,"text":"/**\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n * @module smartutils\r\n */\r\nimport { HttpErrorResponse, HttpEvent, HttpHeaders, HttpParams, HttpRequest, HttpResponseBase } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { Payload, TypedMap } from '../dtos';\r\nexport declare class HttpUtils {\r\n    isGET(request: HttpRequest<any>): boolean;\r\n    isRequestOfAccept(request: HttpRequest<any>, accept: string): boolean;\r\n    isResponseOfContentType(response: HttpResponseBase, contentType: string): boolean;\r\n    isHTMLRequest(request: HttpRequest<any>, response?: HttpResponseBase): boolean;\r\n    isJSONRequest(request: HttpRequest<any>, response?: HttpResponseBase): boolean;\r\n    isJSRequest(request: HttpRequest<any>): boolean;\r\n    isCRUDRequest(request: HttpRequest<any>, response?: HttpErrorResponse): boolean;\r\n    transformHttpParams(params: HttpParams, substitutionMap: TypedMap<string>): HttpParams;\r\n    copyHttpParamsOrHeaders(params: HttpParams | HttpHeaders): TypedMap<string | string[]>;\r\n    buildHttpResponse<T = any>(originalRequest: HttpRequest<T>, _statusAndPayload: [number, Payload | Payload[]] | PromiseLike<[number, Payload | Payload[]]>): Observable<HttpEvent<any> | never>;\r\n}\r\nexport declare const httpUtils: HttpUtils;\r\n"}}
