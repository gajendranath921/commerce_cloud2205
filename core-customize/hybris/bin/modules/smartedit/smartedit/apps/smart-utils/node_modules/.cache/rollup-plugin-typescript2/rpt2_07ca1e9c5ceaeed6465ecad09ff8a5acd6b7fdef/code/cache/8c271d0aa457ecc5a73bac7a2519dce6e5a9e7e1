{"code":"/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/**\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n * @module smartutils\r\n */\r\nimport * as lodash from 'lodash';\r\n/**\r\n * @ngdoc service\r\n * @name @smartutils.services:CloneableUtils\r\n *\r\n * @description\r\n * utility service around Cloneable objects\r\n */\r\nexport class CloneableUtils {\r\n    /**\r\n     * @ngdoc method\r\n     * @name @smartutils.services:CloneableUtils#makeCloneable\r\n     * @methodOf @smartutils.services:CloneableUtils\r\n     * @description\r\n     * returns a \"cloneable\" version of an object.\r\n     * Something is cloneable when it can be sent through W3C postMessage.\r\n     * To this purpose, functions must be removed from the cloneable candidate.\r\n     * @param {Object} json the object to be made cloneable\r\n     * @returns {Cloneable} the cloneable copy of the object\r\n     */\r\n    makeCloneable(_json) {\r\n        const json = lodash.cloneDeepWith(_json, (value) => {\r\n            if (this._isValueCloneable(value, _json)) {\r\n                // if the value could be cloned\r\n                return this._getCloneableValue(value);\r\n            }\r\n            return value;\r\n        });\r\n        if (json === undefined || json === null || this.isPrimitive(json)) {\r\n            return json;\r\n        }\r\n        if (json.hasOwnProperty('length') || json.forEach) {\r\n            // Array, already taken care of by yjQuery\r\n            return json.map((arrayElement) => this.makeCloneable(arrayElement));\r\n        }\r\n        // JSON\r\n        return Object.keys(json).reduce((clone, directKey) => {\r\n            if (directKey.indexOf('$') !== 0) {\r\n                clone[directKey] = this.makeCloneable(json[directKey]);\r\n            }\r\n            return clone;\r\n        }, {});\r\n    }\r\n    _isValueCloneable(value, _json) {\r\n        return value !== undefined && value !== null && !this.isPrimitive(_json);\r\n    }\r\n    _getCloneableValue(value) {\r\n        if (typeof value === 'function') {\r\n            return null;\r\n        }\r\n        if (value.then) {\r\n            // is a promise\r\n            return null;\r\n        }\r\n        if (lodash.isElement(value)) {\r\n            // is yjQuery\r\n            return null;\r\n        }\r\n        if (typeof value !== 'string' && value.hasOwnProperty('length') && !value.forEach) {\r\n            return null;\r\n        }\r\n        return value;\r\n    }\r\n    isPrimitive(value) {\r\n        return typeof value === 'number' || typeof value === 'string' || typeof value === 'boolean';\r\n    }\r\n}\r\nexport const cloneableUtils = new CloneableUtils();\r\n//# sourceMappingURL=cloneable-utils.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types+lodash@4.14.159/node_modules/@types/lodash/ts3.1/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/dtos/index.ts"],"map":"{\"version\":3,\"file\":\"cloneable-utils.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/utils/cloneable-utils.ts\"],\"names\":[],\"mappings\":\"AAAA;;GAEG;AACH;;;GAGG;AACH,OAAO,KAAK,MAAM,MAAM,QAAQ,CAAC;AAGjC;;;;;;GAMG;AACH,MAAM,OAAO,cAAc;IACvB;;;;;;;;;;OAUG;IACH,aAAa,CAAC,KAAU;QACpB,MAAM,IAAI,GAAG,MAAM,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC,KAAU,EAAE,EAAE;YACpD,IAAI,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE;gBACtC,+BAA+B;gBAC/B,OAAO,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;aACzC;YACD,OAAO,KAAK,CAAC;QACjB,CAAC,CAAC,CAAC;QAEH,IAAI,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,IAAI,IAAI,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE;YAC/D,OAAO,IAAI,CAAC;SACf;QAED,IAAI,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE;YAC/C,0CAA0C;YAC1C,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,YAAiB,EAAE,EAAE,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAc,CAAC;SACzF;QAED,OAAO;QACP,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,SAAS,EAAE,EAAE;YACjD,IAAI,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE;gBAC9B,KAAK,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;aAC1D;YACD,OAAO,KAAK,CAAC;QACjB,CAAC,EAAE,EAAa,CAAC,CAAC;IACtB,CAAC;IAEO,iBAAiB,CAAC,KAAU,EAAE,KAAU;QAC5C,OAAO,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IAC7E,CAAC;IAEO,kBAAkB,CAAC,KAAU;QACjC,IAAI,OAAO,KAAK,KAAK,UAAU,EAAE;YAC7B,OAAO,IAAI,CAAC;SACf;QAED,IAAI,KAAK,CAAC,IAAI,EAAE;YACZ,eAAe;YACf,OAAO,IAAI,CAAC;SACf;QAED,IAAI,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;YACzB,aAAa;YACb,OAAO,IAAI,CAAC;SACf;QAED,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;YAC/E,OAAO,IAAI,CAAC;SACf;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;IAEO,WAAW,CAAC,KAAU;QAC1B,OAAO,OAAO,KAAK,KAAK,QAAQ,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,OAAO,KAAK,KAAK,SAAS,CAAC;IAChG,CAAC;CACJ;AACD,MAAM,CAAC,MAAM,cAAc,GAAG,IAAI,cAAc,EAAE,CAAC\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/node_modules/.cache/rollup-plugin-typescript2/placeholder/utils/cloneable-utils.d.ts","writeByteOrderMark":false,"text":"import { Cloneable } from '../dtos';\r\n/**\r\n * @ngdoc service\r\n * @name @smartutils.services:CloneableUtils\r\n *\r\n * @description\r\n * utility service around Cloneable objects\r\n */\r\nexport declare class CloneableUtils {\r\n    /**\r\n     * @ngdoc method\r\n     * @name @smartutils.services:CloneableUtils#makeCloneable\r\n     * @methodOf @smartutils.services:CloneableUtils\r\n     * @description\r\n     * returns a \"cloneable\" version of an object.\r\n     * Something is cloneable when it can be sent through W3C postMessage.\r\n     * To this purpose, functions must be removed from the cloneable candidate.\r\n     * @param {Object} json the object to be made cloneable\r\n     * @returns {Cloneable} the cloneable copy of the object\r\n     */\r\n    makeCloneable(_json: any): Cloneable;\r\n    private _isValueCloneable;\r\n    private _getCloneableValue;\r\n    private isPrimitive;\r\n}\r\nexport declare const cloneableUtils: CloneableUtils;\r\n"}}
