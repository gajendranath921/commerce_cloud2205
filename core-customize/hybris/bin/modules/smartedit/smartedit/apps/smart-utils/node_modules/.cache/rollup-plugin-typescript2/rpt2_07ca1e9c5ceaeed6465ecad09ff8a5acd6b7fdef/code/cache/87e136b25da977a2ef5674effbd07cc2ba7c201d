{"code":"/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/**\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n * @module smartutils\r\n */\r\nimport { __decorate, __metadata } from \"tslib\";\r\nimport { Input } from '@angular/core';\r\nimport { DEFAULT_LANGUAGE_ISO, SWITCH_LANGUAGE_EVENT } from '../../constants';\r\nimport { LanguageDropdownAdapter } from './language-dropdown-adapter';\r\nimport { LanguageDropdownHelper, LanguageSortStrategy } from './language-dropdown-helper';\r\nexport class LanguageDropdown {\r\n    constructor(languageService, eventService) {\r\n        this.languageService = languageService;\r\n        this.eventService = eventService;\r\n        this.languageSortStrategy = LanguageSortStrategy.Default;\r\n        this.selectedLanguage = null;\r\n        this.items = [];\r\n        this.initialLanguage = null;\r\n        this.languages = [];\r\n        this.unRegisterEventService = null;\r\n    }\r\n    ngOnInit() {\r\n        Promise.all([\r\n            this.languageService.getResolveLocale(),\r\n            this.languageService.getToolingLanguages()\r\n        ]).then(([isoCode, languages]) => {\r\n            this.items = languages.map(LanguageDropdownAdapter.transform);\r\n            this.languages = languages;\r\n            this.setSelectedLanguage(isoCode);\r\n            this.setInitialLanguage(isoCode);\r\n        });\r\n        this.unRegisterEventService = this.eventService.subscribe(SWITCH_LANGUAGE_EVENT, () => this.handleLanguageChange());\r\n    }\r\n    ngOnDestroy() {\r\n        this.unRegisterEventService();\r\n    }\r\n    /**\r\n     * Triggered when an user selects a language.\r\n     * @param {IToolingLanguage} language\r\n     */\r\n    onSelectedLanguage(item) {\r\n        this.languageService.setSelectedToolingLanguage(item.value);\r\n    }\r\n    /**\r\n     * Set initial language to be displayed in dropdown\r\n     *\r\n     * @param {string} isoCode\r\n     */\r\n    setInitialLanguage(isoCode) {\r\n        this.initialLanguage =\r\n            this.items.find(LanguageDropdownHelper.findSelectLanguageWithIsoCodePredicate(isoCode)) ||\r\n                this.items.find(LanguageDropdownHelper.findSelectLanguageWithIsoCodePredicate(DEFAULT_LANGUAGE_ISO));\r\n    }\r\n    /**\r\n     * Triggered onInit and when language service sets a new language.\r\n     *\r\n     * @param {IToolingLanguage[]} languages\r\n     * @param {string} isoCode\r\n     */\r\n    setSelectedLanguage(isoCode) {\r\n        this.selectedLanguage = LanguageDropdownHelper.findLanguageWithIsoCode(isoCode, this.languages);\r\n        if (this.selectedLanguage) {\r\n            const sortedLanguages = LanguageDropdownHelper.order(this.selectedLanguage, this.languages, { strategy: this.languageSortStrategy });\r\n            this.items = sortedLanguages.map(LanguageDropdownAdapter.transform);\r\n            return;\r\n        }\r\n        // In case the iso code is too specific, it will use the more generic iso code to set the language.\r\n        this.languageService.getResolveLocaleIsoCode().then((code) => {\r\n            this.selectedLanguage = LanguageDropdownHelper.findLanguageWithIsoCode(code, this.languages);\r\n            const sortedLanguages = LanguageDropdownHelper.order(this.selectedLanguage, this.languages, { strategy: this.languageSortStrategy });\r\n            this.items = sortedLanguages.map(LanguageDropdownAdapter.transform);\r\n        });\r\n    }\r\n    /**\r\n     * Callback for setting the selected language.\r\n     */\r\n    handleLanguageChange() {\r\n        this.languageService.getResolveLocale().then((isoCode) => {\r\n            this.setSelectedLanguage(isoCode);\r\n        });\r\n    }\r\n}\r\n__decorate([\r\n    Input(),\r\n    __metadata(\"design:type\", String)\r\n], LanguageDropdown.prototype, \"languageSortStrategy\", void 0);\r\n//# sourceMappingURL=language-dropdown.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/constants.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/interfaces/i-event.service.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/interfaces/i-select-item.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/services/language.service.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/components/language-dropdown/language-dropdown-adapter.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/src/components/language-dropdown/language-dropdown-helper.ts"],"map":"{\"version\":3,\"file\":\"language-dropdown.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/language-dropdown/language-dropdown.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/language-dropdown/language-dropdown.d.ts","writeByteOrderMark":false,"text":"/**\r\n * Copyright (c) 2019 SAP SE or an SAP affiliate company. All rights reserved.\r\n * @module smartutils\r\n */\r\nimport { IEventService } from '../../interfaces/i-event.service';\r\nimport { ISelectItem } from '../../interfaces/i-select-item';\r\nimport { IToolingLanguage, LanguageService } from '../../services/language.service';\r\nimport { LanguageSortStrategy } from './language-dropdown-helper';\r\nexport declare class LanguageDropdown {\r\n    languageService: LanguageService;\r\n    eventService: IEventService;\r\n    languageSortStrategy: LanguageSortStrategy;\r\n    selectedLanguage: IToolingLanguage;\r\n    items: ISelectItem<IToolingLanguage>[];\r\n    initialLanguage: ISelectItem<IToolingLanguage>;\r\n    private languages;\r\n    private unRegisterEventService;\r\n    constructor(languageService: LanguageService, eventService: IEventService);\r\n    ngOnInit(): void;\r\n    ngOnDestroy(): void;\r\n    /**\r\n     * Triggered when an user selects a language.\r\n     * @param {IToolingLanguage} language\r\n     */\r\n    onSelectedLanguage(item: ISelectItem<IToolingLanguage>): void;\r\n    /**\r\n     * Set initial language to be displayed in dropdown\r\n     *\r\n     * @param {string} isoCode\r\n     */\r\n    private setInitialLanguage;\r\n    /**\r\n     * Triggered onInit and when language service sets a new language.\r\n     *\r\n     * @param {IToolingLanguage[]} languages\r\n     * @param {string} isoCode\r\n     */\r\n    private setSelectedLanguage;\r\n    /**\r\n     * Callback for setting the selected language.\r\n     */\r\n    private handleLanguageChange;\r\n}\r\n"}}
