{"code":"import { __awaiter, __decorate, __metadata } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nimport { DynamicForm, DynamicInput, FormGrouping, ISessionService } from '@smart/utils';\r\nimport { VALIDATION_MESSAGE_TYPES } from '../../../utils';\r\nimport { GenericEditorFieldWrapperComponent } from './GenericEditorFieldWrapperComponent';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"LocalizedElementComponent\", {\r\n    selector: 'se-localized-element',\r\n    styles: [\r\n        `\n            :host {\n                display: block;\n            }\n        `\r\n    ],\r\n    template: `<se-tabs *ngIf=\"tabs\" class=\"multi-tabs-editor\" [model]=\"form\" [tabsList]=\"tabs\" [numTabsDisplayed]=\"6\"></se-tabs>`\r\n});\r\nlet LocalizedElementComponent = class LocalizedElementComponent {\r\n    constructor(sessionService) {\r\n        this.sessionService = sessionService;\r\n    }\r\n    onDynamicInputChange() {\r\n        this._createLocalizedTabs();\r\n    }\r\n    ngDoCheck() {\r\n        if (this.tabs && this.field.messages !== this._previousMessages) {\r\n            this._previousMessages = this.field.messages;\r\n            const messageMap = this.field.messages\r\n                ? this.field.messages\r\n                    .filter((message) => message.type === VALIDATION_MESSAGE_TYPES.VALIDATION_ERROR)\r\n                    .reduce((holder, next) => {\r\n                    holder[next.language] = true;\r\n                    return holder;\r\n                }, {})\r\n                : {};\r\n            this.tabs = this.tabs.map(function (tab) {\r\n                const message = messageMap[tab.id];\r\n                tab.hasErrors = message !== undefined ? message : false;\r\n                return tab;\r\n            });\r\n        }\r\n    }\r\n    _createLocalizedTabs() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.field.isLanguageEnabledMap = {};\r\n            const { readableLanguages, writeableLanguages } = yield this.sessionService.getCurrentUser();\r\n            const readableSet = new Set(readableLanguages);\r\n            const writeable = new Set(writeableLanguages);\r\n            this.tabs = this.languages\r\n                .filter((language) => readableSet.has(language.isocode))\r\n                .map(({ isocode, required }) => {\r\n                this.field.isLanguageEnabledMap[isocode] = writeable.has(isocode);\r\n                const title = `${isocode.toUpperCase()}${this.field.editable && this.field.required && required ? '*' : ''}`;\r\n                return {\r\n                    title,\r\n                    id: isocode,\r\n                    component: GenericEditorFieldWrapperComponent\r\n                };\r\n            });\r\n        });\r\n    }\r\n};\r\n__decorate([\r\n    DynamicForm(),\r\n    __metadata(\"design:type\", FormGrouping)\r\n], LocalizedElementComponent.prototype, \"form\", void 0);\r\n__decorate([\r\n    DynamicInput(),\r\n    __metadata(\"design:type\", Object)\r\n], LocalizedElementComponent.prototype, \"field\", void 0);\r\n__decorate([\r\n    DynamicInput(),\r\n    __metadata(\"design:type\", Object)\r\n], LocalizedElementComponent.prototype, \"component\", void 0);\r\n__decorate([\r\n    DynamicInput(),\r\n    __metadata(\"design:type\", Array)\r\n], LocalizedElementComponent.prototype, \"languages\", void 0);\r\nLocalizedElementComponent = __decorate([\r\n    Component({\r\n        selector: 'se-localized-element',\r\n        styles: [\r\n            `\n            :host {\n                display: block;\n            }\n        `\r\n        ],\r\n        template: `<se-tabs *ngIf=\"tabs\" class=\"multi-tabs-editor\" [model]=\"form\" [tabsList]=\"tabs\" [numTabsDisplayed]=\"6\"></se-tabs>`\r\n    }),\r\n    __metadata(\"design:paramtypes\", [ISessionService])\r\n], LocalizedElementComponent);\r\nexport { LocalizedElementComponent };\r\n//# sourceMappingURL=LocalizedElementComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smart-utils/dist/index.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/services/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/utils/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/types.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/components/GenericEditorFieldWrapperComponent.ts"],"map":"{\"version\":3,\"file\":\"LocalizedElementComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/genericEditor/components/LocalizedElementComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/genericEditor/components/LocalizedElementComponent.d.ts","writeByteOrderMark":false,"text":"import { DoCheck } from '@angular/core';\r\nimport { DynamicInputChange, FormGrouping, ISessionService, Payload } from '@smart/utils';\r\nimport { ILanguage } from '../../../services';\r\nimport { GenericEditorField, GenericEditorTab } from '../types';\r\nexport declare class LocalizedElementComponent implements DoCheck, DynamicInputChange {\r\n    private sessionService;\r\n    form: FormGrouping;\r\n    field: GenericEditorField;\r\n    component: Payload;\r\n    languages: ILanguage[];\r\n    tabs: GenericEditorTab[];\r\n    private _previousMessages;\r\n    constructor(sessionService: ISessionService);\r\n    onDynamicInputChange(): void;\r\n    ngDoCheck(): void;\r\n    private _createLocalizedTabs;\r\n}\r\n"}}
