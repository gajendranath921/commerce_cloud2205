{"code":"/*\r\n * Copyright (c) 2022 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/* eslint-disable max-classes-per-file */\r\n/*\r\n * Copyright (c) 2020 SAP SE or an SAP affiliate company. All rights reserved.\r\n */\r\n/* tslint:disable:max-classes-per-file */\r\nvar /* @ngInject */ LegacyGEWidgetToCustomElementConverter_1;\r\nimport { __decorate, __metadata } from \"tslib\";\r\nimport { Injectable } from '@angular/core';\r\nimport { UpgradeModule } from '@angular/upgrade/static';\r\nimport { AbstractAngularJSBasedCustomElement, WindowUtils } from 'smarteditcommons/utils';\r\n/*\r\n * Custom Web Element class Factory aimed at hiding behing a framework agnostic <se-template-ge-widget> tag\r\n * the legacy AngularJS / ng-include / template based implementations of old Generic editor custom widgets.\r\n *\r\n */\r\nfunction genericEditorAngularJSTemplateBasedCustomElementClassFactory(upgrade) {\r\n    return class extends AbstractAngularJSBasedCustomElement {\r\n        constructor() {\r\n            super(upgrade);\r\n            this.angularJSBody = `\n            <div\n                class=\"ySEGenericEditorField ySEGenericEditorField__input-page-name--color\"\n                data-ng-include=\"field.template\"\n            ></div>\n        `;\r\n        }\r\n        internalConnectedCallback() {\r\n            const parent = this.parentElement.closest(`se-generic-editor-field`) ||\r\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\r\n                this.parentElement.closest(`generic-editor-field`);\r\n            if (!parent || !parent.field) {\r\n                return;\r\n            }\r\n            this.markAsProcessed();\r\n            const { editor, model, field, qualifier, id, editorStackId, isFieldDisabled, $ctrl } = parent;\r\n            while (this.firstChild) {\r\n                this.removeChild(this.firstChild);\r\n            }\r\n            this.appendChild(window.smarteditJQuery(this.angularJSBody)[0]);\r\n            this.scope = this.$rootScope.$new(false);\r\n            const scope = this\r\n                .scope;\r\n            scope.editor = editor;\r\n            scope.model = model;\r\n            scope.field = field;\r\n            scope.qualifier = qualifier;\r\n            scope.id = id;\r\n            scope.editorStackId = editorStackId;\r\n            scope.isFieldDisabled = isFieldDisabled;\r\n            scope.$ctrl = $ctrl;\r\n            this.$compile(this)(this.scope);\r\n        }\r\n    };\r\n}\r\nlet /* @ngInject */ LegacyGEWidgetToCustomElementConverter = /* @ngInject */ LegacyGEWidgetToCustomElementConverter_1 = class /* @ngInject */ LegacyGEWidgetToCustomElementConverter {\r\n    constructor(upgrade, windowUtils) {\r\n        this.upgrade = upgrade;\r\n        this.windowUtils = windowUtils;\r\n    }\r\n    /*\r\n     * must only happen in the container, and only once, where generic editor is eligible.\r\n     * If it happens first in smarteditloader or smartedit then the injection of those\r\n     * will be used and the app will miss dependencies and template cache.\r\n     */\r\n    convert() {\r\n        if (!this.windowUtils.isIframe() &&\r\n            !customElements.get(/* @ngInject */ LegacyGEWidgetToCustomElementConverter_1.TEMPLATE_WIDGET_NAME)) {\r\n            const CustomComponentClass = genericEditorAngularJSTemplateBasedCustomElementClassFactory(this.upgrade);\r\n            customElements.define(/* @ngInject */ LegacyGEWidgetToCustomElementConverter_1.TEMPLATE_WIDGET_NAME, CustomComponentClass);\r\n        }\r\n    }\r\n};\r\n/* @ngInject */ LegacyGEWidgetToCustomElementConverter.TEMPLATE_WIDGET_NAME = `se-template-ge-widget`;\r\n/* @ngInject */ LegacyGEWidgetToCustomElementConverter = /* @ngInject */ LegacyGEWidgetToCustomElementConverter_1 = __decorate([\r\n    Injectable(),\r\n    __metadata(\"design:paramtypes\", [UpgradeModule, WindowUtils])\r\n], /* @ngInject */ LegacyGEWidgetToCustomElementConverter);\r\nexport { /* @ngInject */ LegacyGEWidgetToCustomElementConverter };\r\n//# sourceMappingURL=LegacyGEWidgetToCustomElementConverter.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+upgrade@8.2.14_d2ff5303d1bb22207cb4aaa9bb380a83/node_modules/@angular/upgrade/static.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/utils/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/components/genericEditor/components/GenericEditorFieldComponent.ts"],"map":"{\"version\":3,\"file\":\"LegacyGEWidgetToCustomElementConverter.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../src/components/genericEditor/services/LegacyGEWidgetToCustomElementConverter.ts\"],\"names\":[],\"mappings\":\"AAAA;;GAEG;AACH,yCAAyC;AACzC;;GAEG;AACH,yCAAyC;;;AAEzC,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAC3C,OAAO,EAAE,aAAa,EAAE,MAAM,yBAAyB,CAAC;AACxD,OAAO,EACH,mCAAmC,EAEnC,WAAW,EACd,MAAM,wBAAwB,CAAC;AAGhC;;;;GAIG;AACH,SAAS,4DAA4D,CACjE,OAAsB;IAEtB,OAAO,KAAM,SAAQ,mCAAmC;QAQpD;YACI,KAAK,CAAC,OAAO,CAAC,CAAC;YARX,kBAAa,GAAG;;;;;SAKvB,CAAC;QAIF,CAAC;QAED,yBAAyB;YACrB,MAAM,MAAM,GACR,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,yBAAyB,CAAC;gBACrD,4EAA4E;gBAC3E,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,sBAAsB,CAAS,CAAC;YAEhE,IAAI,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE;gBAC1B,OAAO;aACV;YAED,IAAI,CAAC,eAAe,EAAE,CAAC;YAEvB,MAAM,EACF,MAAM,EACN,KAAK,EACL,KAAK,EACL,SAAS,EACT,EAAE,EACF,aAAa,EACb,eAAe,EACf,KAAK,EACR,GAAqC,MAAM,CAAC;YAE7C,OAAO,IAAI,CAAC,UAAU,EAAE;gBACpB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aACrC;YAED,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAEhE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAEzC,MAAM,KAAK,GAA+C,IAAI;iBACzD,KAA8D,CAAC;YAEpE,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;YACtB,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;YACpB,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;YACpB,KAAK,CAAC,SAAS,GAAG,SAAS,CAAC;YAC5B,KAAK,CAAC,EAAE,GAAG,EAAE,CAAC;YACd,KAAK,CAAC,aAAa,GAAG,aAAa,CAAC;YACpC,KAAK,CAAC,eAAe,GAAG,eAAe,CAAC;YACxC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;YAEpB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC;KACJ,CAAC;AACN,CAAC;AAGD,wHAAA;IAGI,YAAoB,OAAsB,EAAU,WAAwB;QAAxD,YAAO,GAAP,OAAO,CAAe;QAAU,gBAAW,GAAX,WAAW,CAAa;IAAG,CAAC;IAEhF;;;;OAIG;IACH,OAAO;QACH,IACI,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE;YAC5B,CAAC,cAAc,CAAC,GAAG,CAAC,wDAAsC,CAAC,oBAAoB,CAAC,EAClF;YACE,MAAM,oBAAoB,GAAG,4DAA4D,CACrF,IAAI,CAAC,OAAO,CACf,CAAC;YACF,cAAc,CAAC,MAAM,CACjB,wDAAsC,CAAC,oBAAoB,EAC3D,oBAA2B,CAC9B,CAAC;SACL;IACL,CAAC;CACJ,CAAA;AAvBmB,2EAAoB,GAAG,uBAAuB,CAAC;AADnE;IADC,UAAU,EAAE;qCAIoB,aAAa,EAAuB,WAAW;0DAqB/E\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/genericEditor/services/LegacyGEWidgetToCustomElementConverter.d.ts","writeByteOrderMark":false,"text":"import { UpgradeModule } from '@angular/upgrade/static';\r\nimport { WindowUtils } from 'smarteditcommons/utils';\r\nexport declare class LegacyGEWidgetToCustomElementConverter {\r\n    private upgrade;\r\n    private windowUtils;\r\n    static readonly TEMPLATE_WIDGET_NAME = \"se-template-ge-widget\";\r\n    constructor(upgrade: UpgradeModule, windowUtils: WindowUtils);\r\n    convert(): void;\r\n}\r\n"}}
