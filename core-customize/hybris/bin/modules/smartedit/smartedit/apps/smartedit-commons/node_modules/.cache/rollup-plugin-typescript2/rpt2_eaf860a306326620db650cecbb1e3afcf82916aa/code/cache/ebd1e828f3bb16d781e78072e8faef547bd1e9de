{"code":"import { __decorate, __metadata } from \"tslib\";\r\nimport { Location } from '@angular/common';\r\nimport { Component, ComponentFactoryResolver, TemplateRef, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { SeDowngradeComponent } from '../../di';\r\nimport { IExperienceService, PriorityService, SeRouteService, SystemEventService, UserTrackingService } from '../../services';\r\nimport { EVENTS, USER_TRACKING_FUNCTIONALITY } from '../../utils';\r\nimport './ShortcutLink.scss';\r\nwindow.__smartedit__.addDecoratorPayload(\"Component\", \"ShortcutLinkComponent\", {\r\n    selector: 'shortcut-link',\r\n    template: `<ng-container #container><ng-template #defaultTemplate let-shortcutLink><div class=\"se-shortcut-link\"><a class=\"se-shortcut-link__item\" [ngClass]=\"{'se-shortcut-link__item--active': shortcutLink.active}\" (click)=\"onClick(shortcutLink)\">{{shortcutLink.titleI18nKey | translate}}</a></div></ng-template></ng-container>`\r\n});\r\nlet /* @ngInject */ ShortcutLinkComponent = class /* @ngInject */ ShortcutLinkComponent {\r\n    constructor(router, location, resolver, experienceService, priorityService, systemEventService, userTrackingService) {\r\n        this.router = router;\r\n        this.location = location;\r\n        this.resolver = resolver;\r\n        this.experienceService = experienceService;\r\n        this.priorityService = priorityService;\r\n        this.systemEventService = systemEventService;\r\n        this.userTrackingService = userTrackingService;\r\n    }\r\n    ngOnInit() {\r\n        this.unregFn = this.systemEventService.subscribe(EVENTS.EXPERIENCE_UPDATE, () => this._createShortcutLink());\r\n    }\r\n    ngOnDestroy() {\r\n        this.unregFn();\r\n    }\r\n    ngAfterViewInit() {\r\n        this._createShortcutLink();\r\n    }\r\n    onClick(shortcutLink) {\r\n        this.userTrackingService.trackingUserAction(USER_TRACKING_FUNCTIONALITY.NAVIGATION, shortcutLink.titleI18nKey);\r\n        this.location.go(shortcutLink.fullPath);\r\n        this.router.navigateByUrl(shortcutLink.fullPath);\r\n    }\r\n    _createShortcutLink() {\r\n        const currentExperience = this.experienceService.getCurrentExperience();\r\n        currentExperience.then((experience) => {\r\n            const shortcutLinks = this._getShortcutLinks(experience);\r\n            const orderedShortcutLinks = this._orderByPriority(shortcutLinks);\r\n            this._createShortcutLinkDynamicComponents(orderedShortcutLinks);\r\n        });\r\n    }\r\n    _createShortcutLinkDynamicComponents(shortcutLinks) {\r\n        this.containerEntry.clear();\r\n        shortcutLinks.forEach((shortcutLink) => {\r\n            if (shortcutLink && shortcutLink.titleI18nKey) {\r\n                this.containerEntry.createEmbeddedView(this.defaultTemplate, {\r\n                    $implicit: shortcutLink\r\n                });\r\n            }\r\n            else if (shortcutLink && shortcutLink.shortcutComponent) {\r\n                const factory = this.resolver.resolveComponentFactory(shortcutLink.shortcutComponent);\r\n                const component = this.containerEntry.createComponent(factory);\r\n                component.instance.shortcutLink = shortcutLink;\r\n            }\r\n        });\r\n    }\r\n    _getShortcutLinks(experience) {\r\n        const url = this.location.path();\r\n        return SeRouteService.routeShortcutConfigs.map((routeShortcut) => {\r\n            let active;\r\n            const path = routeShortcut.fullPath\r\n                .replace(':siteId', experience.catalogDescriptor.siteId)\r\n                .replace(':catalogId', experience.catalogDescriptor.catalogId)\r\n                .replace(':catalogVersion', experience.catalogDescriptor.catalogVersion);\r\n            if (path.startsWith('/')) {\r\n                active = path === url;\r\n            }\r\n            else {\r\n                active = `/${path}` === url;\r\n            }\r\n            const shortcutLink = Object.assign({}, routeShortcut);\r\n            shortcutLink.fullPath = path;\r\n            shortcutLink.active = active;\r\n            return shortcutLink;\r\n        });\r\n    }\r\n    _orderByPriority(shortcutLinks) {\r\n        shortcutLinks.forEach((shortcutLink) => (shortcutLink.priority = shortcutLink.priority || 500));\r\n        return this.priorityService.sort(shortcutLinks);\r\n    }\r\n};\r\n__decorate([\r\n    ViewChild('container', { read: ViewContainerRef, static: false }),\r\n    __metadata(\"design:type\", ViewContainerRef)\r\n], /* @ngInject */ ShortcutLinkComponent.prototype, \"containerEntry\", void 0);\r\n__decorate([\r\n    ViewChild('defaultTemplate', { read: TemplateRef, static: false }),\r\n    __metadata(\"design:type\", TemplateRef)\r\n], /* @ngInject */ ShortcutLinkComponent.prototype, \"defaultTemplate\", void 0);\r\n/* @ngInject */ ShortcutLinkComponent = __decorate([\r\n    SeDowngradeComponent(),\r\n    Component({\r\n        selector: 'shortcut-link',\r\n        template: `<ng-container #container><ng-template #defaultTemplate let-shortcutLink><div class=\"se-shortcut-link\"><a class=\"se-shortcut-link__item\" [ngClass]=\"{'se-shortcut-link__item--active': shortcutLink.active}\" (click)=\"onClick(shortcutLink)\">{{shortcutLink.titleI18nKey | translate}}</a></div></ng-template></ng-container>`\r\n    }),\r\n    __metadata(\"design:paramtypes\", [Router,\r\n        Location,\r\n        ComponentFactoryResolver,\r\n        IExperienceService,\r\n        PriorityService,\r\n        SystemEventService,\r\n        UserTrackingService])\r\n], /* @ngInject */ ShortcutLinkComponent);\r\nexport { /* @ngInject */ ShortcutLinkComponent };\r\n//# sourceMappingURL=ShortcutLinkComponent.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+common@8.2.14_@angular+core@8.2.14+rxjs@6.5.4/node_modules/@angular/common/common.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+core@8.2.14_rxjs@6.5.4+zone.js@0.9.1/node_modules/@angular/core/core.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+router@8.2.14_e9fbe5720e9434eb9ae0f6720f1ca3f4/node_modules/@angular/router/router.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/di/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/services/index.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/src/utils/index.ts"],"map":"{\"version\":3,\"file\":\"ShortcutLinkComponent.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../src/components/shortcutLink/ShortcutLinkComponent.ts\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/node_modules/.cache/rollup-plugin-typescript2/placeholder/components/shortcutLink/ShortcutLinkComponent.d.ts","writeByteOrderMark":false,"text":"import { Location } from '@angular/common';\r\nimport { ComponentFactoryResolver, OnDestroy, OnInit, TemplateRef, ViewContainerRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { IExperienceService, PriorityService, SeRouteShortcutConfig, SystemEventService, UserTrackingService } from '../../services';\r\nimport './ShortcutLink.scss';\r\nexport interface SeShortcutLinkConfig extends SeRouteShortcutConfig {\r\n    active?: boolean;\r\n}\r\nexport declare class ShortcutLinkComponent implements OnInit, OnDestroy {\r\n    private router;\r\n    private location;\r\n    private resolver;\r\n    private experienceService;\r\n    private priorityService;\r\n    private systemEventService;\r\n    private userTrackingService;\r\n    containerEntry: ViewContainerRef;\r\n    defaultTemplate: TemplateRef<any>;\r\n    private unregFn;\r\n    constructor(router: Router, location: Location, resolver: ComponentFactoryResolver, experienceService: IExperienceService, priorityService: PriorityService, systemEventService: SystemEventService, userTrackingService: UserTrackingService);\r\n    ngOnInit(): void;\r\n    ngOnDestroy(): void;\r\n    ngAfterViewInit(): void;\r\n    onClick(shortcutLink: SeShortcutLinkConfig): void;\r\n    private _createShortcutLink;\r\n    private _createShortcutLinkDynamicComponents;\r\n    private _getShortcutLinks;\r\n    private _orderByPriority;\r\n}\r\n"}}
