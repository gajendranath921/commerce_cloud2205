{"code":"/*\r\n * Abstract Class to create Custom Web Elements aimed at triggering some legacy AngularJS compilation\r\n * this class takes care of the following boilerplate:\r\n * - preventing enless recompilation due to AngularJS compilation modifying DOM hence retriggering custom web element processing.\r\n * - destroying the scope upon disconnection\r\n * - checking necessary conditions before triggering native custom element callbacks\r\n */\r\nexport class AbstractAngularJSBasedCustomElement extends HTMLElement {\r\n    constructor(upgrade) {\r\n        super();\r\n        this.upgrade = upgrade;\r\n        this.PROCESSED_ATTRIBUTE_NAME = 'processed';\r\n    }\r\n    // we need to protect against a stack overflow: custom elements -> $compile -> custom elements\r\n    markAsProcessed() {\r\n        this.setAttribute(this.PROCESSED_ATTRIBUTE_NAME, 'true');\r\n    }\r\n    connectedCallback() {\r\n        if (!this.isConnected || this.getAttribute(this.PROCESSED_ATTRIBUTE_NAME)) {\r\n            return;\r\n        }\r\n        this.internalConnectedCallback();\r\n    }\r\n    disconnectedCallback() {\r\n        if (!this.scope || this.isConnected) {\r\n            return;\r\n        }\r\n        this.scope.$destroy();\r\n        this.internalDisconnectedCallback && this.internalDisconnectedCallback();\r\n    }\r\n    attributeChangedCallback(name, oldValue, newValue) {\r\n        /*\r\n         * attributes don't change in the case of decorators:\r\n         * - they come from the shallow clone itself\r\n         * - only active flag changes but because of the full rewrapping it goes through constructor\r\n         */\r\n        if (!this.shouldReactOnAttributeChange()) {\r\n            return;\r\n        }\r\n        this.internalAttributeChangedCallback(name, oldValue, newValue);\r\n    }\r\n    shouldReactOnAttributeChange() {\r\n        return (this.internalAttributeChangedCallback &&\r\n            this.scope &&\r\n            this.isConnected &&\r\n            !!this.getAttribute(this.PROCESSED_ATTRIBUTE_NAME));\r\n    }\r\n    get $rootScope() {\r\n        return this.upgrade.injector.get('$rootScope');\r\n    }\r\n    get $compile() {\r\n        return this.upgrade.injector.get('$compile');\r\n    }\r\n}\r\n//# sourceMappingURL=ICustomElement.js.map","references":["/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@angular+upgrade@8.2.14_d2ff5303d1bb22207cb4aaa9bb380a83/node_modules/@angular/upgrade/static.d.ts","/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedittools/common/temp/node_modules/.pnpm/@types+angular@1.7.3/node_modules/@types/angular/index.d.ts"],"map":"{\"version\":3,\"file\":\"ICustomElement.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/utils/ICustomElement.ts\"],\"names\":[],\"mappings\":\"AAcA;;;;;;GAMG;AACH,MAAM,OAAgB,mCAClB,SAAQ,WAAW;IAenB,YAAoB,OAAsB;QACtC,KAAK,EAAE,CAAC;QADQ,YAAO,GAAP,OAAO,CAAe;QAXlC,6BAAwB,GAAG,WAAW,CAAC;IAa/C,CAAC;IAMD,8FAA8F;IAC9F,eAAe;QACX,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,wBAAwB,EAAE,MAAM,CAAC,CAAC;IAC7D,CAAC;IAED,iBAAiB;QACb,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,wBAAwB,CAAC,EAAE;YACvE,OAAO;SACV;QACD,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACrC,CAAC;IAED,oBAAoB;QAChB,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,WAAW,EAAE;YACjC,OAAO;SACV;QACD,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;QACtB,IAAI,CAAC,4BAA4B,IAAI,IAAI,CAAC,4BAA4B,EAAE,CAAC;IAC7E,CAAC;IAED,wBAAwB,CAAC,IAAY,EAAE,QAAa,EAAE,QAAa;QAC/D;;;;WAIG;QACH,IAAI,CAAC,IAAI,CAAC,4BAA4B,EAAE,EAAE;YACtC,OAAO;SACV;QACD,IAAI,CAAC,gCAAgC,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;IACpE,CAAC;IAEO,4BAA4B;QAChC,OAAO,CACH,IAAI,CAAC,gCAAgC;YACrC,IAAI,CAAC,KAAK;YACV,IAAI,CAAC,WAAW;YAChB,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,wBAAwB,CAAC,CACrD,CAAC;IACN,CAAC;IAED,IAAI,UAAU;QACV,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;IACnD,CAAC;IAED,IAAI,QAAQ;QACR,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;IACjD,CAAC;CACJ\"}","dts":{"name":"/home/wadmin/Documents/cloud-commerce-sample-setup-update-2211/core-customize/hybris/bin/modules/smartedit/smartedit/apps/smartedit-commons/node_modules/.cache/rollup-plugin-typescript2/placeholder/utils/ICustomElement.d.ts","writeByteOrderMark":false,"text":"import { UpgradeModule } from '@angular/upgrade/static';\r\nimport * as angular from 'angular';\r\nexport interface ICustomElement {\r\n    connectedCallback?(): void;\r\n    disconnectedCallback?(): void;\r\n    attributeChangedCallback?(name: string, oldValue: any, newValue: any): void;\r\n}\r\nexport declare type CustomElementConstructor = new (...arg: any[]) => ICustomElement;\r\nexport declare abstract class AbstractAngularJSBasedCustomElement extends HTMLElement implements ICustomElement {\r\n    private upgrade;\r\n    protected scope: angular.IScope;\r\n    private PROCESSED_ATTRIBUTE_NAME;\r\n    abstract internalConnectedCallback(): void;\r\n    constructor(upgrade: UpgradeModule);\r\n    internalAttributeChangedCallback?(name: string, oldValue: any, newValue: any): void;\r\n    internalDisconnectedCallback?(): void;\r\n    markAsProcessed(): void;\r\n    connectedCallback(): void;\r\n    disconnectedCallback(): void;\r\n    attributeChangedCallback(name: string, oldValue: any, newValue: any): void;\r\n    private shouldReactOnAttributeChange;\r\n    get $rootScope(): angular.IRootScopeService;\r\n    get $compile(): angular.ICompileService;\r\n}\r\n"}}
